/**
@license
DayPilot Pro for ASP.NET MVC 2020.2.6016
Copyright (c) 2005 - 2020 Annpoint s.r.o.
https://www.daypilot.org/
Use of this software is subject to license terms.
*/
if(typeof(DayPilot)==='undefined'){DayPilot={};};(function(DayPilot){DayPilot.ModalStatic={};DayPilot.ModalStatic.list=[];DayPilot.ModalStatic.hide=function(){if(this.list.length>0){var $a=this.list.pop();if($a){$a.hide();}}};DayPilot.ModalStatic.remove=function($b){var $c=DayPilot.ModalStatic.list;for(var i=0;i<$c.length;i++){if($c[i]===$b){$c.splice(i,1);return;}}};DayPilot.ModalStatic.close=function($d){DayPilot.ModalStatic.result($d);DayPilot.ModalStatic.hide();};DayPilot.ModalStatic.result=function(r){var $c=DayPilot.ModalStatic.list;if($c.length>0){$c[$c.length-1].result=r;}};DayPilot.ModalStatic.displayed=function($b){var $c=DayPilot.ModalStatic.list;for(var i=0;i<$c.length;i++){if($c[i]===$b){return true;}};return false;};DayPilot.ModalStatic.stretch=function(){if(this.list.length>0){var $a=this.list[this.list.length-1];if($a){$a.stretch();}}};DayPilot.ModalStatic.last=function(){var $c=DayPilot.ModalStatic.list;if($c.length>0){return $c[$c.length-1];};return null;};var $e=function(){var style=document.createElement("style");style.setAttribute("type","text/css");if(!style.styleSheet){style.appendChild(document.createTextNode(""));};var h=document.head||document.getElementsByTagName('head')[0];h.appendChild(style);var $f=!!style.styleSheet;var $g={};$g.rules=[];$g.commit=function(){try{if($f){style.styleSheet.cssText=this.rules.join("\n");}}catch(e){}};$g.add=function($h,$i,$j){if($f){this.rules.push($h+"{"+$i+"\u007d");return;};if(style.sheet.insertRule){if(typeof $j==="undefined"){$j=style.sheet.cssRules.length;};style.sheet.insertRule($h+"{"+$i+"\u007d",$j);}else if(style.sheet.addRule){style.sheet.addRule($h,$i,$j);}else{throw "No CSS registration method found";}};return $g;};var $g=new $e();$g.add(".modal_default_main","border: 10px solid #ccc; max-width: 90%;");$g.add(".modal_default_main:focus","outline: none;");$g.add(".modal_default_content","padding: 10px 0px;");$g.add(".modal_default_inner","padding: 20px;");$g.add(".modal_default_input","padding: 10px 0px;");$g.add(".modal_default_buttons","padding: 10px 0px;");$g.add(".modal_default_form_item","margin: 10px 0px;");$g.add(".modal_default_form_item.modal_default_form_title","font-size: 2em; font-weight: bold;");$g.add(".modal_default_form_item input","width: 100%; box-sizing: border-box;");$g.add(".modal_default_form_item select","width: 100%; box-sizing: border-box;");$g.add(".modal_default_form_item_label","margin: 2px 0px;");$g.add(".modal_default_background","opacity: 0.5; background-color: #000;");$g.add(".modal_default_ok","padding: 3px; width: 80px;");$g.add(".modal_default_cancel","padding: 3px; width: 80px;");if(navigator.userAgent.indexOf("Edge")!==-1){$g.add(".modal_default_form_item_date input::-ms-clear","display: none;");};$g.add(".modal_min_main","border: 1px solid #ccc; max-width: 90%;");$g.add(".modal_min_background","opacity: 0.5; background-color: #000;");$g.add(".modal_min_ok","padding: 3px 10px;");$g.add(".modal_min_cancel","padding: 3px 10px;");$g.add(".navigator_modal_main","border-left: 1px solid #c0c0c0;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;background-color: white;color: #000000; box-sizing: content-box;");$g.add(".navigator_modal_main *, .navigator_modal_main *:before, .navigator_modal_main *:after","box-sizing: content-box;");$g.add(".navigator_modal_month","font-size: 11px;");$g.add(".navigator_modal_day","color: black;");$g.add(".navigator_modal_weekend","background-color: #f0f0f0;");$g.add(".navigator_modal_dayheader","color: black;");$g.add(".navigator_modal_line","border-bottom: 1px solid #c0c0c0;");$g.add(".navigator_modal_dayother","color: gray;");$g.add(".navigator_modal_todaybox","border: 1px solid red;");$g.add(".navigator_modal_title, .navigator_modal_titleleft, .navigator_modal_titleright",'border-top: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;color: #333;background: #f3f3f3;');$g.add(".navigator_modal_busy","font-weight: bold;");$g.add(".navigator_modal_cell","text-align: center;");$g.add(".navigator_modal_select .navigator_modal_cell_box","background-color: #FFE794; opacity: 0.5;");$g.add(".navigator_modal_title","text-align: center;");$g.add(".navigator_modal_titleleft, .navigator_modal_titleright","text-align: center;");$g.add(".navigator_modal_dayheader","text-align: center;");$g.add(".navigator_modal_weeknumber","text-align: center;");$g.add(".navigator_modal_cell_text","cursor: pointer;");$g.commit();DayPilot.Modal=function($k){this.autoFocus=true;this.autoStretch=true;this.autoStretchFirstLoadOnly=false;this.className=null;this.theme="modal_default";this.disposeOnClose=true;this.dragDrop=true;this.loadingHtml=null;this.maxHeight=null;this.scrollWithPage=true;this.useIframe=true;this.zIndex=99999;this.left=null;this.width=600;this.top=20;this.height=200;this.locale=null;this.closed=null;this.onClosed=null;this.onShow=null;var $l=this;this.id='_'+new Date().getTime()+'n'+(Math.random()*10);this.$0K=false;this.$0L=null;this.$0M=null;this.showHtml=function($m){if(DayPilot.ModalStatic.displayed(this)){throw "This modal dialog is already displayed.";};if(!this.div){this.$0N();};this.$0O();if(this.useIframe){var $n=function(p,$o){return function(){p.setInnerHTML(p.id+"iframe",$o);};};window.setTimeout($n(this,$m),0);}else{if($m.nodeType){this.div.appendChild($m);}else{this.div.innerHTML=$m;}};this.$0O();this.$0P();this.$0Q();};this.showUrl=function($p){if(DayPilot.ModalStatic.displayed(this)){throw "This modal dialog is already displayed.";};if(this.useIframe){if(!this.div){this.$0N();};var $q=this.loadingHtml;if($q){this.iframe.src="about:blank";this.setInnerHTML(this.id+"iframe",$q);};this.re(this.iframe,"load",this.$0R);this.iframe.src=$p;this.$0O();this.$0P();this.$0Q();}else{$l.$0S({"url":$p,"success":function($r){var $m=$r.request.responseText;$l.showHtml($m);},"error":function($r){$l.showHtml("Error loading the modal dialog");}})}};this.$0Q=function(){if(typeof $l.onShow==="function"){var $r={};$r.root=$l.$0T();$l.onShow($r);}};this.$0T=function(){return $l.iframe?$l.iframe.contentWindow.document:$l.div;};this.$0S=function($s){var $t=new XMLHttpRequest();if(!$t){return;};var $u=$s.method||"GET";var $v=$s.success||function(){};var $w=$s.error||function(){};var $x=$s.data;var $p=$s.url;$t.open($u,$p,true);$t.setRequestHeader('Content-type','text/plain');$t.onreadystatechange=function(){if($t.readyState!==4)return;if($t.status!==200&&$t.status!==304){if($w){var $r={};$r.request=$t;$w($r);}else{if(window.console){console.log('HTTP error '+$t.status);}};return;};var $r={};$r.request=$t;$v($r);};if($t.readyState===4){return;};if(typeof $x==='object'){$x=JSON.stringify($x);};$t.send($x);};this.$0O=function(){delete this.result;var $y=window;var $z=document;var scrollY=$y.pageYOffset?$y.pageYOffset:(($z.documentElement&&$z.documentElement.scrollTop)?$z.documentElement.scrollTop:$z.body.scrollTop);var $A=function(){return $l.$0U().y;};if(this.theme){this.hideDiv.className=this.theme+"_background";};if(this.zIndex){this.hideDiv.style.zIndex=this.zIndex;};this.hideDiv.style.display='';window.setTimeout(function(){if($l.hideDiv){$l.hideDiv.onclick=function(){$l.hide({"backgroundClick":true});};}},500);if(this.theme){this.div.className=this.theme+"_main";}else{this.div.className="";};if(this.className){this.div.className+=" "+this.className;};if(this.left){this.div.style.left=this.left+"px";}else{this.div.style.marginLeft='-'+Math.floor(this.width/2)+"px";};this.div.style.position='absolute';this.div.style.boxSizing="content-box";this.div.style.top=(scrollY+this.top)+'px';this.div.style.width=this.width+'px';if(this.zIndex){this.div.style.zIndex=this.zIndex;};if(this.height){if(this.useIframe||!this.autoStretch){this.div.style.height=this.height+'px';}else{this.div.style.height='';}};if(this.useIframe&&this.height){this.iframe.style.height=(this.height)+'px';};this.div.style.display='';this.$0V();DayPilot.ModalStatic.remove(this);DayPilot.ModalStatic.list.push(this);};this.$0R=function(){$l.iframe.contentWindow.modal=$l;if($l.autoStretch){$l.stretch();}};this.stretch=function(){var $A=function(){return $l.$0U().y;};var $B=function(){return $l.$0U().x;};if(this.useIframe){var $C=$B()-40;for(var w=this.width;w<$C&&this.$0W();w+=10){this.div.style.width=w+'px';this.div.style.marginLeft='-'+Math.floor(w/2)+"px";};var $D=this.maxHeight||$A()-2*this.top;for(var h=this.height;h<$D&&this.$0X();h+=10){this.iframe.style.height=(h)+'px';this.div.style.height=h+'px';};if(this.autoStretchFirstLoadOnly){this.ue(this.iframe,"load",this.$0R);}}else{this.div.style.height='';}};this.$0W=function(){var document=this.iframe.contentWindow.document;var $E=document.compatMode==='BackCompat'?document.body:document.documentElement;var $F=$E.scrollWidth;var $G=document.body.children;for(var i=0;i<$G.length;i++){var $H=$G[i].offsetLeft+$G[i].offsetWidth;$F=Math.max($F,$H);};var $I=$F>$E.clientWidth;return $I;};this.$0X=function(){var document=this.iframe.contentWindow.document;var $E=document.compatMode==='BackCompat'?document.body:document.documentElement;var $J=$E.scrollHeight;var $G=document.body.children;for(var i=0;i<$G.length;i++){var $H=$G[i].offsetTop+$G[i].offsetHeight;$J=Math.max($J,$H);};var $K=$J>$E.clientHeight;return $K;};this.$0U=function(){var $z=document;if($z.compatMode==="CSS1Compat"&&$z.documentElement&&$z.documentElement.clientWidth){var x=$z.documentElement.clientWidth;var y=$z.documentElement.clientHeight;return{x:x,y:y};}else{var x=$z.body.clientWidth;var y=$z.body.clientHeight;return{x:x,y:y};}};this.$0P=function(){if(this.$0K){return;};this.re(window,'resize',this.$0Y);this.re(window,'scroll',this.$0Z);if(this.dragDrop){this.re(document,'mousemove',this.$10);this.re(document,'mouseup',this.$11);};this.$0K=true;};this.$12=function(){this.ue(window,'resize',this.$0Y);this.ue(window,'scroll',this.$0Z);if(this.dragDrop){this.ue(document,'mousemove',this.$10);this.ue(document,'mouseup',this.$11);};this.$0K=false;};this.$13=function(e){if(e.target!==$l.div){return;};$l.div.style.cursor="move";$l.$14();$l.$0M=$l.mc(e||window.event);$l.$0L={x:$l.div.offsetLeft,y:$l.div.offsetTop};};this.$10=function(e){if(!$l.$0M){return;};var e=e||window.event;var $L=$l.mc(e);var x=$L.x-$l.$0M.x;var y=$L.y-$l.$0M.y;$l.div.style.marginLeft='0px';$l.div.style.top=($l.$0L.y+y)+"px";$l.div.style.left=($l.$0L.x+x)+"px";};this.$11=function(e){if(!$l.$0M){return;};$l.$15();$l.div.style.cursor=null;$l.$0M=null;};this.$14=function(){if(!this.useIframe){return;};var $M=80;var $N=document.createElement("div");$N.style.backgroundColor="#ffffff";$N.style.filter="alpha(opacity="+$M+")";$N.style.opacity="0."+$M;$N.style.width="100%";$N.style.height=this.height+"px";$N.style.position="absolute";$N.style.left='0px';$N.style.top='0px';this.div.appendChild($N);this.mask=$N;};this.$15=function(){if(!this.useIframe){return;};this.div.removeChild(this.mask);this.mask=null;};this.$0Y=function(){$l.$16();$l.$0V();};this.$0Z=function(){$l.$16();};this.$0V=function(){if($l.left){return;};if(!$l.div){return;};var $B=$l.div.offsetWidth;$l.div.style.marginLeft='-'+Math.floor($B/2)+"px";};this.$16=function(){if(!$l.hideDiv){return;};if(!$l.div){return;};if($l.hideDiv.style.display==='none'){return;};if($l.div.style.display==='none'){return;};var scrollY=$l.$17.scrollY();if(!$l.scrollWithPage){$l.div.style.top=(scrollY+$l.top)+'px';}};this.$17={};this.$17.container=function(){return $l.container||document.body;};this.$17.scrollY=function(){var c=$l.$17.container();if(c===document.body){return window.pageYOffset?window.pageYOffset:((document.documentElement&&document.documentElement.scrollTop)?document.documentElement.scrollTop:document.body.scrollTop);}else{return c.scrollTop;}};this.re=function(el,ev,$O){if(el.addEventListener){el.addEventListener(ev,$O,false);}else if(el.attachEvent){el.attachEvent("on"+ev,$O);}};this.ue=function(el,ev,$O){if(el.removeEventListener){el.removeEventListener(ev,$O,false);}else if(el.detachEvent){el.detachEvent("on"+ev,$O);}};this.mc=function(ev){if(ev.pageX||ev.pageY){return{x:ev.pageX,y:ev.pageY};};return{x:ev.clientX+document.documentElement.scrollLeft,y:ev.clientY+document.documentElement.scrollTop};};this.abs=function(element){var r={x:element.offsetLeft,y:element.offsetTop};while(element.offsetParent){element=element.offsetParent;r.x+=element.offsetLeft;r.y+=element.offsetTop;};return r;};this.$0N=function(){var $P=$l.$17.container();var $Q=$P===document.body;var $R=$Q?"fixed":"absolute";var $S=document.createElement("div");$S.id=this.id+"hide";$S.style.position=$R;$S.style.left="0px";$S.style.top="0px";$S.style.right="0px";$S.style.bottom="0px";$S.oncontextmenu=function(){return false;};$S.onmousedown=function(){return false;};$P.appendChild($S);var $T=document.createElement("div");$T.id=this.id+'popup';$T.style.position=$R;$T.style.left='50%';$T.style.top='0px';$T.style.backgroundColor='white';$T.style.width="50px";$T.style.height="50px";if(this.dragDrop){$T.onmousedown=this.$13;};var $U=50;var $V=null;if(this.useIframe){$V=document.createElement("iframe");$V.id=this.id+"iframe";$V.name=this.id+"iframe";$V.frameBorder='0';$V.style.width='100%';$V.style.height=$U+'px';$T.appendChild($V);};$P.appendChild($T);this.div=$T;this.iframe=$V;this.hideDiv=$S;};this.setInnerHTML=function(id,$o){var $W=window.frames[id];var $z=$W.contentWindow||$W.document||$W.contentDocument;if($z.document){$z=$z.document;};if($z.body==null){$z.write("<body></body>");};if($o.nodeType){$z.body.appendChild($o);}else{$z.body.innerHTML=$o;};if($l.autoStretch){if(!$l.autoStretchFirstLoadOnly||!$l.$18){$l.stretch();$l.$18=true;}}};this.close=function($d){this.result=$d;this.hide();};this.closeSerialized=function(){var $X=$l.$0T();var $Y=$X.querySelectorAll("input, textarea, select");var $d={};for(var i=0;i<$Y.length;i++){var $Z=$Y[i];var name=$Z.name;if(!name){continue;};var $00=$Z.value;if($Z.picker){$00=$Z.picker.date?$Z.picker.date.toString():null;};if($Z.tagName==="SELECT"){var $01=$Z.options[$Z.selectedIndex];if($01&&typeof $01.$19!=="undefined"){$00=$01.$19;}};$d[name]=$00;};$l.close($d);};this.hide=function($k){$k=$k||{};var $r={};$r.backgroundClick=!!$k.backgroundClick;$r.result=this.result;$r.canceled=typeof this.result==="undefined";$r.preventDefault=function(){this.preventDefault.value=true;};if(typeof this.onClose==="function"){this.onClose($r);if($r.preventDefault.value){return;}};if(this.div){this.div.style.display='none';this.hideDiv.style.display='none';if(!this.useIframe){this.div.innerHTML=null;}};window.focus();DayPilot.ModalStatic.remove(this);if(typeof this.onClosed==="function"){this.onClosed($r);}else if(this.closed){this.closed();};delete this.result;if(this.disposeOnClose){$l.$12();$l._de($l.div);$l._de($l.hideDiv);$l.div=null;$l.hideDiv=null;$l.iframe=null;}};this._de=function(e){if(!e){return;};e.parentNode&&e.parentNode.removeChild(e);};this.$1a=function(){if(!$k){return;};for(var name in $k){this[name]=$k[name];}};this.$1a();};DayPilot.Modal.alert=function($02,$k){$k=$k||{};$k.height=$k.height||40;$k.useIframe=false;var $03=$k.okText||"OK";var $04=$k.cancelText||"Cancel";return DayPilot.getPromise(function($v,$05){$k.onClosed=function($r){$v($r);};var $b=new DayPilot.Modal($k);var $T=document.createElement("div");$T.className=$b.theme+"_inner";var $06=document.createElement("div");$06.className=$b.theme+"_content";$06.innerHTML=$02;var $07=document.createElement("div");$07.className=$b.theme+"_buttons";var $08=document.createElement("button");$08.innerText=$03;$08.className=$b.theme+"_ok";$08.onclick=function(e){DayPilot.ModalStatic.close("OK");};$07.appendChild($08);$T.appendChild($06);$T.appendChild($07);$b.showHtml($T);if($b.autoFocus){$08.focus();}});};DayPilot.Modal.confirm=function($02,$k){$k=$k||{};$k.height=$k.height||40;$k.useIframe=false;var $03=$k.okText||"OK";var $04=$k.cancelText||"Cancel";return DayPilot.getPromise(function($v,$05){$k.onClosed=function($r){$v($r);};var $b=new DayPilot.Modal($k);var $T=document.createElement("div");$T.className=$b.theme+"_inner";var $06=document.createElement("div");$06.className=$b.theme+"_content";$06.innerHTML=$02;var $07=document.createElement("div");$07.className=$b.theme+"_buttons";var $08=document.createElement("button");$08.innerText=$03;$08.className=$b.theme+"_ok";$08.onclick=function(e){DayPilot.ModalStatic.close("OK");};var $09=document.createTextNode(" ");var $0a=document.createElement("button");$0a.innerText=$04;$0a.className=$b.theme+"_cancel";$0a.onclick=function(e){DayPilot.ModalStatic.close();};$07.appendChild($08);$07.appendChild($09);$07.appendChild($0a);$T.appendChild($06);$T.appendChild($07);$b.showHtml($T);if($b.autoFocus){$08.focus();}});};DayPilot.Modal.prompt=function($02,$0b,$k){if(typeof $0b==="object"){$k=$0b;$0b="";};$k=$k||{};$k.height=$k.height||40;$k.useIframe=false;var $03=$k.okText||"OK";var $04=$k.cancelText||"Cancel";var $0c=$0b||"";return DayPilot.getPromise(function($v,$05){$k.onClosed=function($r){$v($r);};var $b=new DayPilot.Modal($k);var $T=document.createElement("div");$T.className=$b.theme+"_inner";var $06=document.createElement("div");$06.className=$b.theme+"_content";$06.innerHTML=$02;var $0d=document.createElement("div");$0d.className=$b.theme+"_input";var $0e=document.createElement("input");$0e.value=$0c;$0e.style.width="100%";$0e.onkeydown=function(e){var $0f=false;switch(e.keyCode){case 13:$b.close(this.value);break;case 27:$b.close();break;default:$0f=true;break;};if(!$0f){e.preventDefault();e.stopPropagation();}};$0d.appendChild($0e);var $07=document.createElement("div");$07.className=$b.theme+"_buttons";var $08=document.createElement("button");$08.innerText=$03;$08.className=$b.theme+"_ok";$08.onclick=function(e){$b.close($0e.value);};var $09=document.createTextNode(" ");var $0a=document.createElement("button");$0a.innerText=$04;$0a.className=$b.theme+"_cancel";$0a.onclick=function(e){$b.close();};$07.appendChild($08);$07.appendChild($09);$07.appendChild($0a);$T.appendChild($06);$T.appendChild($0d);$T.appendChild($07);$b.showHtml($T);if($b.autoFocus){$0e.focus();}});};var $0g=function($0h){var $0i=["text","date","select"];if($0i.indexOf($0h.type)!==-1){return $0h.type;};if($0h.options){return "select";};if($0h.dateFormat){return "date";};return "text";};var $0j=function($0h,$b){var $0k={"text":function($b){var $0e=document.createElement("input");$0e.name=$0h.id;$0e.onkeydown=function(e){var $0f=false;switch(e.keyCode){case 13:$b.closeSerialized();break;case 27:$b.close();break;default:$0f=true;break;};if(!$0f){e.preventDefault();e.stopPropagation();}};return $0e;},"date":function($b){var $0e=document.createElement("input");$0e.className=$b.theme+"_input_date";$0e.name=$0h.id;$0e.onkeydown=function(e){var $0f=false;switch(e.keyCode){case 13:$b.closeSerialized();break;case 27:$0e.picker.close();$b.close();break;case 9:$0e.picker&&$0e.picker.close();$0f=true;break;default:$0f=true;break;};if(!$0f){e.preventDefault();e.stopPropagation();}};$0e.onfocus=function(){$0e.picker.show();};$0e.onclick=function(){$0e.picker.show();};var $0l=DayPilot.DatePicker||DayPilot.ModalDatePicker;var $0m=new $0l({$0n:$0e,$0o:"navigator_modal",$0p:$b.zIndex+1,$0q:false,$0r:"left"});if($0h.dateFormat){$0m.pattern=$0h.dateFormat;};var $0s=$0h.locale||$b.locale;if($0s){$0m.locale=$0s;};$0e.picker=$0m;return $0e;},"select":function($b){var $0t=document.createElement("select");$0t.name=$0h.id;if($0u($0h.options)){$0h.options.forEach(function(i){var $01=document.createElement("option");$01.innerText=i.name;$01.value=i.id;$01.$19=i.id;$0t.appendChild($01);});};return $0t;}};var $0v=$0g($0h);return $0k[$0v]($b);};var $0w=function($b,$0h){var $0e=null;var $0x=typeof $0h.id==="string";var $0v=$0g($0h);if($0x){$0e=$0j($0h,$b);};var $0y=document.createElement("div");$0y.className=$b.theme+"_form_item_label";$0y.innerHTML=$0h.name;var $T=document.createElement("div");$T.className=$b.theme+"_form_item";if(!$0h.id){$T.className+=" "+$b.theme+"_form_title";};if($0h.cssClass){$T.className+=" "+$0h.cssClass;};if($0x){$T.className+=" "+$b.theme+"_form_item_"+$0v;};$T.appendChild($0y);if($0e){$T.appendChild($0e);};var $Z={};$Z.div=$T;$Z.label=$0y;$Z.element=$0e;$Z.type=$0v;$Z.set=function($00){if($Z.element){if($Z.type==="date"){var $0m=$Z.element.picker;$0m.date=new DayPilot.Date($00);var $0z=new DayPilot.Date($00).toString($0h.dateFormat||$0m.pattern,$0m.locale);$Z.element.value=$0z;}else{$Z.element.value=$00;}}};$Z.focus=function(){if($0e){$0e.focus();}};$Z.canFocus=function(){return !!$0e;};return $Z;};var $0u=function($0A){return Object.prototype.toString.call($0A)==='[object Array]';};DayPilot.Modal.form=function($0B,$x,$k){if(arguments.length===1){var $0A=$0B;var $0C=$0u($0A);if($0C){$x={};}else if(typeof $0A==="object"){$x=$0B;$0B=[];for(var name in $x){var $0h={};$0h.name=name;$0h.id=name;$0B.push($0h);}}else{throw "Invalid DayPilot.Modal.form() parameter";}};var $0D={};for(var name in $k){$0D[name]=$k[name];};$0D.height=$0D.height||40;$0D.useIframe=false;if(typeof $0D.autoFocus==="undefined"){$0D.autoFocus=false;};var $03=$0D.okText||"OK";var $04=$0D.cancelText||"Cancel";var $02=$0D.message||"";return DayPilot.getPromise(function($v,$05){$0D.onClosed=function($r){var $0E={};for(var name in $x){$0E[name]=$x[name];};for(var name in $r.result){$0E[name]=$r.result[name];};$r.result=$0E;$v($r);};var $b=new DayPilot.Modal($0D);var $T=document.createElement("div");$T.className=$b.theme+"_inner";var $06=document.createElement("div");$06.className=$b.theme+"_content";$06.innerHTML=$02;var $0d=document.createElement("div");$0d.className=$b.theme+"_input";var $Y=[];var $0F={};$0B.forEach(function($0h){var $Z=$0w($b,$0h);$Y.push($Z);$0F[$0h.id]=$Z;});for(var name in $x){if($0F[name]){$0F[name].set($x[name]);}};$Y.forEach(function($Z){$0d.appendChild($Z.div);});var $07=document.createElement("div");$07.className=$b.theme+"_buttons";var $08=document.createElement("button");$08.innerText=$03;$08.className=$b.theme+"_ok";$08.onclick=function(e){$b.closeSerialized();};var $09=document.createTextNode(" ");var $0a=document.createElement("button");$0a.innerText=$04;$0a.className=$b.theme+"_cancel";$0a.onclick=function(e){$b.close();};$07.appendChild($08);$07.appendChild($09);$07.appendChild($0a);$T.appendChild($06);$T.appendChild($0d);$T.appendChild($07);$b.showHtml($T);$b.div.setAttribute("tabindex","-1");$b.div.addEventListener("keydown",function(e){switch(e.keyCode){case 27:$b.close();break;case 13:$b.closeSerialized();break;}});if($b.autoFocus){var $0G=$Y.find(function($Z){return $Z.canFocus();});$0G&&$0G.focus();}else{$b.div.focus();}});};DayPilot.Modal.close=function($d){var opener=DayPilot.Modal.opener();if(!opener){return;};opener.close($d);};DayPilot.Modal.stretch=function($d){var opener=DayPilot.Modal.opener();if(!opener){throw "Unable to find the opener DayPilot.Modal instance.";};opener.stretch();};DayPilot.Modal.closeSerialized=function(){var $a=DayPilot.Modal.opener()||DayPilot.ModalStatic.last();};DayPilot.Modal.opener=function(){if(typeof DayPilot!=="undefined"&&typeof DayPilot.ModalStatic!=="undefined"&&DayPilot.ModalStatic.list.length>0){return DayPilot.ModalStatic.list[DayPilot.ModalStatic.list.length-1];};return parent&&parent.DayPilot&&parent.DayPilot.ModalStatic&&parent.DayPilot.ModalStatic.list[parent.DayPilot.ModalStatic.list.length-1];};if(typeof DayPilot.getPromise==="undefined"){DayPilot.getPromise=function(f){if(typeof $0H!=='undefined'){return new $0H(f);};DayPilot.Promise=function(f){var p=this;this.then=function($0I,$0J){$0I=$0I||function(){};$0J=$0J||function(){};f($0I,$0J);return DayPilot.getPromise(f);};this['catch']=function($0J){p.then(null,$0J);return DayPilot.getPromise(f);};};return new DayPilot.Promise(f);};}})(DayPilot);


