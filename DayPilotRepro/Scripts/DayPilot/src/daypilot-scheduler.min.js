/**
@license
DayPilot Pro for ASP.NET MVC 2020.2.6016
Copyright (c) 2005 - 2020 Annpoint s.r.o.
https://www.daypilot.org/
Use of this software is subject to license terms.
*/
if(typeof DayPilot==='undefined'){var DayPilot={};};if(typeof DayPilot.Global==='undefined'){DayPilot.Global={};};(function(DayPilot){if(typeof DayPilot.Scheduler!=='undefined'){return;};var $b=(function(){var $c=navigator.userAgent;return(($c.indexOf('Mozilla/5.0')>-1&&$c.indexOf('Android ')>-1&&$c.indexOf('AppleWebKit')>-1)&&!($c.indexOf('Chrome')>-1));})();var $d=navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1;var DayPilotScheduler={};var $e=function(){};var debug=false;var $f=function($g){if(!debug){return;};window.console&&window.console.log.apply(window.console,arguments);};var $h=function($g){if(typeof $i==="undefined"){return;};$f($g);};var console={"log":$f};DayPilot.Scheduler=function(id,$j){this.v='2020.2.6016';var $k=this;this.id=id;this.isScheduler=true;this.allowDefaultContextMenu=false;this.allowEventOverlap=true;this.allowMultiMove=false;this.allowMultiRange=false;this.allowMultiResize=false;this.allowMultiSelect=true;this.api=2;this.autoRefreshCommand='refresh';this.autoRefreshEnabled=false;this.autoRefreshInterval=60;this.autoRefreshMaxCount=20;this.autoScroll="Drag";this.blockOnCallBack=false;this.navigatorBackSync=null;this.backendUrl=null;this.beforeCellRenderCaching=true;this.businessBeginsHour=9;this.businessEndsHour=18;this.businessWeekends=false;this.cellDuration=60;this.cellGroupBy='Day';this.cellSweeping=true;this.cellSweepingCacheSize=1000;this.cellWidth=40;this.cellWidthMin=1;this.cellWidthSpec="Fixed";this.cellsMarkBusiness=true;this.cornerHtml='';this.crosshairTimeHeaderLevel="Last";this.crosshairType='Header';this.cssClassPrefix="scheduler_default";this.days=1;this.doubleClickTimeout=300;this.dragOutAllowed=false;this.drawBlankCells=true;this.durationBarHeight=3;this.durationBarVisible=true;this.durationBarMode="Duration";this.dynamicEventRendering='Progressive';this.dynamicEventRenderingMargin=50;this.dynamicEventRenderingMarginX=null;this.dynamicEventRenderingMarginY=null;this.dynamicEventRenderingCacheSweeping=false;this.dynamicEventRenderingCacheSize=200;this.dynamicLoading=false;this.eventEditMinWidth=100;this.eventEndSpec="DateTime";this.eventHeight=35;this.eventHtmlLeftMargin=10;this.eventHtmlRightMargin=10;this.eventMarginLeft=0;this.eventMarginRight=0;this.eventMarginBottom=0;this.eventMinWidth=1;this.eventMoveMargin=5;this.eventMoveToPosition=false;this.eventMoveSkipNonBusiness=false;this.eventResizeMargin=5;this.eventStackingLineHeight=100;this.eventTapAndHoldHandling="Move";this.eventTextWrappingEnabled=false;this.eventUpdateInplaceOptimization=false;this.eventsLoadMethod="GET";this.eventVersionHeight=25;this.eventVersionMargin=2;this.eventVersionPosition="Above";this.eventVersionsEnabled=false;this.eventVersionsReserveSpace=false;this.floatingEvents=$d?false:true;this.floatingTimeHeaders=true;this.groupConcurrentEvents=false;this.groupConcurrentEventsLimit=1;this.headerHeight=30;this.heightSpec='Max';this.height=600;this.hideBorderFor100PctHeight=false;this.hideUntilInit=true;this.infiniteScrollingEnabled=false;this.infiniteScrollingMargin=50;this.infiniteScrollingStepDays=30;this.initEventEnabled=true;this.jointEventsResize=true;this.jointEventsMove=true;this.layout='Auto';this.linkCreateHandling="Disabled";this.linkBottomMargin=17;this.linkPointSize=10;this.linksLoadMethod="GET";this.locale="en-us";this.loadingLabelText="Loading...";this.loadingLabelVisible=true;this.overrideWheelScrolling=false;this.messageBarPosition="Top";this.messageHideAfter=5000;this.messageHideOnMouseOut=true;this.multiMoveVerticalMode="Disabled";this.moveBy='Full';this.notifyCommit='Immediate';this.progressiveRowRendering=true;this.progressiveRowRenderingPreload=25;this.rectangleSelectMode="Free";this.rectangleSelectHandling="Disabled";this.rowCreateHeight=null;this.rowCreateHtml="New row...";this.rowDragHandleWidth=10;this.rowHeaderColumnDefaultWidth=80;this.rowHeaderHideIconEnabled=false;this.rowHeaderScrolling=false;this.rowHeaderSplitterWidth=3;this.rowHeaderWidthAutoFit=true;this.rowHeaderWidthMarginRight=0;this.rowHeaderColumnsResizable=true;this.rowHeaderColumnsMode="Tabular";this.rowHeaderColumns=null;this.rowHeaderWidth=80;this.rowMarginBottom=0;this.rowMarginTop=0;this.rowMinHeight=0;this.rowsLoadMethod="GET";this.rowSortingMode="LeavesOnly";this.scale="CellDuration";this.scaleManualLimitBeyond=true;this.scrollDelayDynamic=500;this.scrollDelayEvents=200;this.scrollDelayCells=$d?100:0;this.scrollDelayFloats=0;this.scrollDelayRows=0;this.scrollStep=null;this.scrollX=0;this.scrollY=0;this.selectedRows=[];this.separators=[];this.showNonBusiness=true;this.showNonBusinessForceHours=false;this.showToolTip=true;this.snapToGrid=true;this.snapToGridTimeRangeSelecting=true;this.snapToGridEventMoving=true;this.snapToGridEventResizing=true;this.startDate=DayPilot.Date.today();this.syncResourceTree=false;this.tapAndHoldTimeout=300;this.timeHeaders=[{"groupBy":"Default"},{"groupBy":"Cell"}];this.timeHeaderPosition="Top";this.timeHeaderTextWrappingEnabled=false;this.treeAnimation=true;this.treeAutoExpand=true;this.treeEnabled=false;this.treeIndent=20;this.treeImageMarginLeft=5;this.treeImageMarginTop=3;this.treeImageMarginRight=2;this.treeImageWidth=10;this.treeImageHeight=10;this.treePreventParentUsage=false;this.timeFormat="Auto";this.timeline=null;this.useEventBoxes='Always';this.viewType='Resources';this.visible=true;this.watchWidthChanges=true;this.weekStarts='Auto';this.width=null;this.zoomLevels=[];this.zoomPosition="left";this.eventClickHandling='Enabled';this.eventDeleteHandling="Disabled";this.eventHoverHandling='Bubble';this.eventDoubleClickHandling='Disabled';this.eventEditHandling='Update';this.eventMoveHandling='Update';this.eventResizeHandling='Update';this.eventRightClickHandling='ContextMenu';this.eventSelectHandling='Update';this.resourceCollapseHandling="Enabled";this.resourceExpandHandling="Enabled";this.rowClickHandling='Enabled';this.rowDoubleClickHandling="Disabled";this.rowRightClickHandling='ContextMenu';this.rowCreateHandling="Disabled";this.rowEditHandling='Update';this.rowHeaderColumnResizedHandling="Update";this.rowSelectHandling='Update';this.rowMoveHandling="Disabled";this.timeHeaderClickHandling="Enabled";this.timeHeaderRightClickHandling="Enabled";this.timeRangeClickHandling="Enabled";this.timeRangeDoubleClickHandling='Disabled';this.timeRangeSelectedHandling='Enabled';this.timeRangeRightClickHandling="ContextMenu";this.timeRangeSelectingStartEndEnabled=false;this.timeRangeSelectingStartEndFormat="MMMM d, yyyy";this.eventMovingStartEndEnabled=false;this.eventMovingStartEndFormat="MMMM d, yyyy";this.eventResizingStartEndEnabled=false;this.eventResizingStartEndFormat="MMMM d, yyyy";if(typeof DayPilot.Bubble==="function"){this.bubble=new DayPilot.Bubble();}else{this.bubble=null;};this.cellBubble=null;this.resourceBubble=null;this.linkBubble=null;if(DayPilot.browser.ie){this.scrollDelayCells=100;this.scrollDelayFloats=100;};if($k.api===1){this.onEventMove=function(){};this.onEventResize=function(){};this.onResourceExpand=function(){};this.onResourceCollapse=function(){};};this.onEventClick=null;this.onEventClicked=null;this.onEventMove=null;this.onEventMoved=null;this.onEventMoving=null;this.onEventResize=null;this.onEventResized=null;this.onEventResizing=null;this.onEventRightClick=null;this.onEventRightClicked=null;this.onEventMouseOver=null;this.onEventMouseOut=null;this.onIncludeTimeCell=null;this.onLinkClick=null;this.onLinkClicked=null;this.onRowClick=null;this.onRowClicked=null;this.onRowDoubleClick=null;this.onRowDoubleClicked=null;this.onRowMouseOver=null;this.onRowMouseOut=null;this.onRowRightClick=null;this.onRowRightClicked=null;this.onTimeHeaderClick=null;this.onTimeHeaderClicked=null;this.onTimeHeaderRightClick=null;this.onTimeHeaderRightClicked=null;this.onTimeRangeClick=null;this.onTimeRangeClicked=null;this.onTimeRangeDoubleClick=null;this.onTimeRangeDoubleClicked=null;this.onTimeRangeSelect=null;this.onTimeRangeSelected=null;this.onTimeRangeSelecting=null;this.onTimeRangeRightClick=null;this.onTimeRangeRightClicked=null;this.onRowHeaderColumnResized=null;this.onRowHeaderResized=null;this.onCellMouseOver=null;this.onCellMouseOut=null;this.onGridMouseDown=null;this.onBeforeCellRender=null;this.onBeforeCornerRender=null;this.onBeforeCornerDomAdd=null;this.onBeforeCornerDomRemove=null;this.onBeforeEventRender=null;this.onBeforeEventDomAdd=null;this.onBeforeEventDomRemove=null;this.onBeforeTimeHeaderRender=null;this.onBeforeTimeHeaderDomAdd=null;this.onBeforeTimeHeaderDomRemove=null;this.onBeforeResHeaderRender=null;this.onBeforeRowHeaderRender=null;this.onBeforeRowHeaderColumnRender=null;this.onBeforeRowHeaderDomAdd=null;this.onBeforeRowHeaderDomRemove=null;this.onBeforeCellExport=null;this.onBeforeEventExport=null;this.onBeforeTimeHeaderExport=null;this.onBeforeRowHeaderExport=null;this.onAfterEventRender=null;this.onAfterCellRender=null;this.onEventFilter=null;this.onRowFilter=null;this.onRectangleSelecting=null;this.onRectangleSelect=null;this.onRectangleSelected=null;this.onDimensionsChanged=null;this.onAfterUpdate=null;this.$dy=0;this.$dz=true;this.$dA=false;this.$dB=false;this.$dC=false;this.$dD=-1;this.$dE=-1;this.$dF=false;this.$dG=-1;this.$dH=false;this.$dI=true;this.rowlist=DayPilot.list();this.itline=DayPilot.list();this.events={};this.cells={};this.elements={};this.elements.events=[];this.elements.bars=[];this.elements.text=[];this.elements.cells=[];this.elements.linesVertical=[];this.elements.separators=[];this.elements.range=[];this.elements.breaks=[];this.elements.links=[];this.elements.linkpoints=[];this.elements.rectangle=[];this.elements.hover=[];this.elements.timeHeader=[];this.$dJ={};this.$dJ.cells=[];this.$dJ.linesVertical={};this.$dJ.linesHorizontal={};this.$dJ.timeHeaderGroups=[];this.$dJ.timeHeader={};this.$dJ.pixels=[];this.$dJ.breaks=[];this.$dJ.events=[];this.clientState={};this.members={};this.members.obsolete=["Init","cleanSelection","cssClassPrefix","getHScrollPosition","setHScrollPosition","getVScrollPosition","setVScrollPosition","showBaseTimeHeader"];this.members.ignoreFilter=function(name){if(name.indexOf("div")===0){return true;};return false;};this.members.ignore=["internal","nav","debug","temp","elements","members","cellProperties","itline","rowlist","timeHeader","timeouts","rowHeaderCols"];this.members.noCssOnly=[];this.$dK='netmvc';this.nav={};this.$dL=function($l,$m){var $l=JSON.parse($l);$k.onScrollCalled=false;if($l.CallBackRedirect){document.location.href=$l.CallBackRedirect;return;};if(typeof $k.onCallBackResult==="function"){var $n={};$n.result=$l;$n.preventDefault=function(){$n.preventDefault.value=true;};$k.onCallBackResult($n);if($n.preventDefault.value){$k.$dM();$k.$dN();$k.$dO();if($l.Message){if($k.message){$k.message($l.Message);}};$k.$dP($l.CallBackData,true);$k.$dQ();$k.$dR();return;}};if($l.BubbleGuid){var $o=$l.BubbleGuid;var $p=this.bubbles[$o];delete this.bubbles[$o];$k.$dN();if(typeof $l.Result.BubbleHTML!=='undefined'&&$p){$p.updateView($l.Result.BubbleHTML,$p);};$k.$dQ();return;};if(typeof DayPilot.Bubble!=="undefined"){DayPilot.Bubble.hideActive();};if(typeof $l.ClientState!=='undefined'){if($l.ClientState===null){$k.clientState={};}else{$k.clientState=$l.ClientState;}};if($l.UpdateType==="None"){$k.$dN();$k.$dQ();if($l.Message){$k.message($l.Message);};$k.$dP($l.CallBackData,true);return;};if($l.VsUpdate){var $q=document.createElement("input");$q.type='hidden';$q.name=$k.id+"_vsupdate";$q.id=$q.name;$q.value=$l.VsUpdate;$k.$dS.innerHTML='';$k.$dS.appendChild($q);};if(typeof $l.TagFields!=='undefined'){$k.tagFields=$l.TagFields;};if(typeof $l.SortDirections!=='undefined'){$k.sortDirections=$l.SortDirections;};$k.$dJ.drawArea=null;if($l.UpdateType==="Full"){$k.resources=$l.Resources;$k.colors=$l.Colors;$k.palette=$l.Palette;$k.dirtyColors=$l.DirtyColors;$k.cellProperties=$l.CellProperties;$k.cellConfig=$l.CellConfig;$k.separators=$l.Separators;$k.timeline=$l.Timeline;$k.timeHeader=$l.TimeHeader;$k.timeHeaders=$l.TimeHeaders;if(typeof $l.Links!=="undefined"){$k.links.list=$l.Links;};if(typeof $l.RowHeaderColumns!=='undefined')$k.rowHeaderColumns=$l.RowHeaderColumns;$k.startDate=$l.StartDate?new DayPilot.Date($l.StartDate):$k.startDate;$k.days=$l.Days?$l.Days:$k.days;$k.cellDuration=$l.CellDuration?$l.CellDuration:$k.cellDuration;$k.cellGroupBy=$l.CellGroupBy?$l.CellGroupBy:$k.cellGroupBy;$k.cellWidth=$l.CellWidth?$l.CellWidth:$k.cellWidth;if(typeof $l.Scale!=='undefined')$k.scale=$l.Scale;$k.viewType=$l.ViewType?$l.ViewType:$k.viewType;if(typeof $l.ShowNonBusiness!=='undefined')$k.showNonBusiness=$l.ShowNonBusiness;$k.businessBeginsHour=$l.BusinessBeginsHour?$l.BusinessBeginsHour:$k.businessBeginsHour;$k.businessEndsHour=$l.BusinessEndsHour?$l.BusinessEndsHour:$k.businessEndsHour;if(typeof $l.DynamicLoading!=='undefined')$k.dynamicLoading=$l.DynamicLoading;if(typeof $l.TreeEnabled!=='undefined')$k.treeEnabled=$l.TreeEnabled;$k.locale=$l.Locale?$l.Locale:$k.locale;if(typeof $l.TimeZone!=='undefined')$k.timeZone=$l.TimeZone;$k.timeFormat=$l.TimeFormat?$l.TimeFormat:$k.timeFormat;$k.rowHeaderCols=$l.RowHeaderCols?$l.RowHeaderCols:$k.rowHeaderCols;if(typeof $l.DurationBarMode!=="undefined")$k.durationBarMode=$l.DurationBarMode;if(typeof $l.CornerHTML!=='undefined'){$k.cornerHtml=$l.CornerHTML;};$k.hashes=$l.Hashes;$k.$dT();$k.$dU();$k.$dV();$k.$dW();};if($l.Action!=="Scroll"){$k.$dX($l.Events);};if($l.UpdateType==='Full'){$k.$dY();$k.$dZ();$k.$e0();};$k.$e1();$k.$e2();$k.$e3();$k.$dJ.drawArea=null;if($l.Action!=="Scroll"){$k.$e4();$k.$e5();if($k.heightSpec==='Auto'||$k.heightSpec==='Max'){$k.$e6();};$k.$e7();$k.$e8();$k.$e9();$k.multiselect.clear(true);$k.multiselect.$ea($l.SelectedEvents);$k.$eb();$k.$ec();$k.$ed();}else{$k.multiselect.clear(true);$k.multiselect.$ea($l.SelectedEvents);$k.$ee($l.Events);};if($k.timeRangeSelectedHandling!=="HoldForever"){$k.$ef();};if($l.UpdateType==="Full"){$k.setScroll($l.ScrollX,$l.ScrollY);$k.$eg();};$k.$eh();$k.$dM();if($l.SelectedRows){$k.$ei($l.SelectedRows);};$k.$dN();if($l.UpdateType==='Full'&&navigator.appVersion.indexOf("MSIE 7.")!==-1){window.setTimeout(function(){$k.$dY();$k.$e6();},0);};$k.$dO();if($l.Message){if($k.message){$k.message($l.Message);}};$k.$dP($l.CallBackData,true);$k.$dQ();$k.$dR();if($l.UpdateType==='Full'&&$l.Action!=="Scroll"&&!$k.onScrollCalled){setTimeout(function(){$k.$ej();},0);}};this.$dM=function(){if($k.todo){if($k.todo.del){var $r=$k.todo.del;$r.parentNode.removeChild($r);$k.todo.del=null;}}};this.$dP=function($s,$t){var $u=function($s,$v){return function(){if($k.$ek()){if(typeof $k.onAfterRender==='function'){var $n={};$n.isCallBack=$v;$n.isScroll=false;$n.data=$s;$k.onAfterRender($n);}}else{if($k.afterRender){$k.afterRender($s,$v);}}};};window.setTimeout($u($s,$t),0);};this.scrollTo=function($w,$x,$y){var $z=DayPilot.Util.overlaps($k.visibleStart(),$k.visibleEnd(),$w,$w);if($k.infiniteScrollingEnabled&&!$z){$k.infinite.scrollTo($w);return;};if($k.$el.enabled){$k.$el.scrollToRequested=$w;setTimeout(function(){var $w=$k.$el.scrollToRequested;if($w){$k.$em($w,$x,$y);}},0);}else{$k.$em($w,$x,$y);}};this.$em=function($w,$x,$y){if(!$w){return;};if(!$k.$en){$k.$eo={$w:$w,$x:$x,$y:$y};return;};if($k.viewType==="Days"){var $A=$k.$ep(new DayPilot.Date($w));if(!$A){return;};setTimeout(function(){var scrollY=$A.top;$k.nav.scroll.scrollTop=scrollY;},100);return;};var $B;if($w instanceof DayPilot.Date){$B=this.getPixels($w).left;}else if(typeof $w==="string"){$B=this.getPixels(new DayPilot.Date($w)).left;}else if(typeof $w==="number"){$B=$w;}else{throw "Invalid scrollTo() parameter. Accepted parameters: string (ISO date), number (pixels), DayPilot.Date object";};var $C=$k.$eq.clientWidth;var $D=$k.nav.scroll.clientWidth;$y=$y||"left";switch($y.toLowerCase()){case "left":break;case "middle":$B-=$D/2;break;case "right":$B-=$D;break;};if($B<0){$B=0;};if($B>$C-$D){$B=$C-$D;};if(!$x){$k.$er($B);return;};var $E=Math.abs($k.nav.scroll.scrollLeft-$B);var $F=$E/$C;var $G=50;if(typeof $x==="number"){$G=$x;}else if(typeof $x==="string"){switch($x){case "fast":$G=30;break;case "normal":$G=50;break;case "slow":$G=100;break;case "linear":$G=Math.floor(100*$F);break;}};if($F>.6){$G=Math.min($G,80);};$k.$es($B,$G);};this.$es=function($B,$G){var $H={};$H.steps=[];$H.index=0;$H.delay=10;$H.next=function(){var $I=$H.steps[$H.index];$H.index+=1;return $I;};$H.finished=function(){$k.$ej();};var $J=$k.getScrollX();var $G=$G||100;var $K=$B-$J;for(var i=0;i<$G;i++){var x=i/$G;var $L=((x-.5)*2)/(Math.pow(((x-0.5)*2),2)+1)+.5;$H.steps.push($J+$K*$L);};$H.steps.push($B);scrollStep($H);function scrollStep($H){var $I=$H.next();if(typeof $I==="undefined"){$H.finished&&$H.finished();return;};$k.setScrollX($I);window.clearTimeout($k.refreshTimeout);setTimeout(function(){scrollStep($H);},$H.delay);}};this.scrollToResource=function($M){DayPilot.complete(function(){var $A;if(typeof $M==="string"||typeof $M==="number"){$A=$k.$et($M);}else if($M instanceof DayPilot.Row){$A=$k.$et($M.id);}else{throw new DayPilot.Exception("Invalid scrollToResource() argument: id or DayPilot.Row expected");};if(!$A){return;};setTimeout(function(){var scrollY=$A.top;$k.nav.scroll.scrollTop=scrollY;},100);});};this.$eu=function(){if(!this.floatingTimeHeaders){return;};if(!this.timeHeader){return;};var $N=$k.$ev();if(!$N){return;};$k.$ew();var $O=$N.pixels.left+$P.shiftX;var end=$N.pixels.right+$P.shiftX+$N.sw;var $Q=[];for(var y=0;y<this.timeHeader.length;y++){for(var x=0;x<this.timeHeader[y].length;x++){var h=this.timeHeader[y][x];var $R=h.left;var $S=h.left+h.width;var $T=null;if($R<$O&&$O<$S){$T={};$T.x=x;$T.y=y;$T.marginLeft=$O-$R;$T.marginRight=0;$T.div=$k.$dJ.timeHeader[x+"_"+y];$Q.push($T);};if($R<end&&end<$S){if(!$T){$T={};$T.x=x;$T.y=y;$T.marginLeft=0;$T.div=$k.$dJ.timeHeader[x+"_"+y];$Q.push($T);};$T.marginRight=$S-end;break;}}};for(var i=0;i<$Q.length;i++){var $T=$Q[i];$k.$ex($T.div,$T.marginLeft,$T.marginRight);}};this.$eh=function(){$k.$eu();$k.$ey();};this.$ez={};var $U=$k.$ez;$U.eventsInRectangle=function(x,y,$D,$V){var $W=x;var $X=x+$D;var $Y=y;var $Z=y+$V;return DayPilot.list($k.elements.events).filter(function(e){var $s=e.event;var $R=$s.part.left;var $S=$s.part.left+$s.part.width;var $A=$k.rowlist[$s.part.dayIndex];var top=$A.top+$s.part.top;var $00=top+$s.part.height;if(DayPilot.Util.overlaps($R,$S,$W,$X)&&DayPilot.Util.overlaps(top,$00,$Y,$Z)){return true;}});};$U.events=function($01){var $02=[];var $01=$01||"All";var $N=$k.$ev();if(!$N){return DayPilot.list($02);};var $O=$N.pixels.left;var end=$N.pixels.right;for(var i=0;i<$k.elements.events.length;i++){var e=$k.elements.events[i];var $s=e.event;var $R=$s.part.left;var $S=$s.part.left+$s.part.width;switch($01){case "Left":if($R<$O&&$O<$S){$02.push(e);};break;case "All":if(DayPilot.Util.overlaps($R,$S,$O,end)){$02.push(e);};break;}};return DayPilot.list($02).addProps({"area":$N});};this.$ey=function(){if(!this.floatingEvents){return;};var $03=$U.events("Left");$k.$eA();$03.filter(function($04){return $04.event.data.type!=="Milestone";}).forEach(function($04){var e=$04.event;var $R=$03.area.pixels.left;var $O=e.part.left;var $05=$R-$O;$k.$eB($04,$05,0);});};this.elements.sections=[];this.elements.hsections=[];this.$ex=function($06,$05,$07){var $08=document.createElement("div");$08.setAttribute("unselectable","on");$08.className=$k.$eC("_timeheader_float");$08.style.position="absolute";$08.style.left=$05+"px";$08.style.right=$07+"px";$08.style.top="0px";$08.style.bottom="0px";$08.style.overflow="hidden";var $09=document.createElement("div");$09.className=$k.$eC("_timeheader_float_inner");$09.setAttribute("unselectable","on");var $0a=$06.cell.th;if($0a.innerHTML){$09.innerHTML=$0a.innerHTML;};if($0a.fontColor){$09.style.color=$0a.fontColor;};$08.appendChild($09);$06.section=$08;$06.insertBefore($08,$06.firstChild.nextSibling);if($06.domArgs&&$06.domArgs.element){var el=$06.firstChild&&$06.firstChild.firstChild;if(el){el.style.display="none";}}else{$06.firstChild.innerHTML='';};this.elements.hsections.push($06);};this.$ew=function(){for(var i=0;i<this.elements.hsections.length;i++){var e=this.elements.hsections[i];var $s=e.cell;if($s&&e.firstChild){if(e.domArgs&&e.domArgs.element){var el=e.firstChild&&e.firstChild.firstChild;if(el){el.style.display="";}}else{e.firstChild.innerHTML=$s.th.innerHTML;}};DayPilot.de(e.section);e.section=null;};this.elements.hsections=[];};this.$eB=function($06,$05,$07){var $08=document.createElement("div");$08.setAttribute("unselectable","on");$08.className=$k.$eC($0b.eventFloat);$08.style.position="absolute";$08.style.left=$05+"px";$08.style.right=$07+"px";$08.style.top="0px";$08.style.bottom="0px";$08.style.overflow="hidden";var $09=document.createElement("div");$09.className=$k.$eC($0b.eventFloatInner);$09.setAttribute("unselectable","on");$09.innerHTML=$06.event.client.html();$08.appendChild($09);$06.section=$08;$06.insertBefore($08,$06.firstChild.nextSibling);if($06.domArgs&&$06.domArgs.element){var el=$06&&$06.firstChild&&$06.firstChild.firstChild;if(el){el.style.display="none";}}else{$06.firstChild.innerHTML="";};var e=$06.event;var $0c=e.cache||e.data;var $0d=e.cache?e.cache.areas:e.data.areas;$0d=$0d||[];if($0c.fontColor){$09.style.color=$06.event.data.fontColor;};var $j={"offsetX":$k.$eD($09),"eventDiv":$06,"areas":$0d.filter(function(a){return !(a.start||a.end);})};DayPilot.Areas.attach($08,$06.event,$j);DayPilot.Areas.disable($06);this.elements.sections.push($06);};this.$eE=null;this.$eD=function($09){if($k.$eE===null){$k.$eE=parseInt(new DayPilot.StyleReader($09).get("padding-left"));};return $k.$eE;};this.$eA=function(){for(var i=0;i<this.elements.sections.length;i++){var e=this.elements.sections[i];var $s=e.event;if($s){if(e.domArgs&&e.domArgs.element){var el=e&&e.firstChild&&e.firstChild.firstChild;if(el){el.style.display='';}}else{e.firstChild.innerHTML=$s.client.html();}};DayPilot.de(e.section);DayPilot.Areas.enable(e);e.section=null;};this.elements.sections=[];};this.setScrollX=function(scrollX){if(!$k.$el.enabled){$k.$er(scrollX);}else{$k.$el.scrollXRequested=scrollX;setTimeout(function(){var scrollX=$k.$el.scrollXRequested;if(typeof scrollX==="number"){$k.$er(scrollX);}},0);}};this.$er=function(scrollX){var scroll=$k.nav.scroll;var $0e=$k.$eF();if(scroll.clientWidth+scrollX>$0e){scrollX=$0e-scroll.clientWidth;};$k.divTimeScroll.scrollLeft=scrollX;scroll.scrollLeft=scrollX;};this.setScrollY=function(scrollY){var $j=$j||{};if(!$k.$el.enabled){$k.$eG(scrollY);}else{$k.$el.scrollYRequested=scrollY;setTimeout(function(){var scrollY=$k.$el.scrollYRequested;if(typeof scrollY==="number"){$k.$eG(scrollY);}},0);}};this.$eG=function(scrollY){var scroll=$k.nav.scroll;var $0f=$k.$dG;if(scroll.clientHeight+scrollY>$0f){scrollY=$0f-scroll.clientHeight;};$k.divResScroll.scrollTop=scrollY;scroll.scrollTop=scrollY;};this.setScroll=function(scrollX,scrollY){$k.setScrollX(scrollX);$k.setScrollY(scrollY);};this.$eH=function(){return $k.$eI()+$0g.splitterWidth()-1;};this.message=function($0h,$0i){if($0h===null){return;};if(!$k.$en){return;};var $j={};if(typeof arguments[1]==="object"){$j=arguments[1];$0i=$j.delay;};var $0i=$0i||this.messageHideAfter||2000;var top=$k.$eJ()+1;var $R=$k.$eH();var $S=DayPilot.sw($k.nav.scroll)+1;var $00=DayPilot.sh($k.nav.scroll);var $06;if(!this.nav.message){$06=document.createElement("div");$06.style.position="absolute";$06.style.left=$R+"px";$06.style.right=$S+"px";$06.style.display='none';DayPilot.re($06,DayPilot.touch.start,function(e){$k.nav.message.style.display='none';e.preventDefault();e.stopPropagation();});$06.onmousemove=function(){if(!$k.messageHideOnMouseOut){return;};if($06.messageTimeout&&!$06.status){clearTimeout($06.messageTimeout);}};$06.onmouseout=function(){if(!$k.messageHideOnMouseOut){return;};if($k.nav.message.style.display!=='none'){$06.messageTimeout=setTimeout($k.$eK,500);}};var $09=document.createElement("div");$09.onclick=function(){$k.nav.message.style.display='none';};$09.className=$k.$eC("_message");$06.appendChild($09);var close=document.createElement("div");close.style.position="absolute";close.className=$k.$eC("_message_close");close.onclick=function(){$k.nav.message.style.display='none';};$06.appendChild(close);this.nav.top.appendChild($06);this.nav.message=$06;}else{$06=$k.nav.message;};var $0j=function(){var $06=$k.nav.message;$06.firstChild.className=$k.$eC("_message");if($j.cssClass){DayPilot.Util.addClass($06.firstChild,$j.cssClass);};var $09=$k.nav.message.firstChild;$09.innerHTML=$0h;var $S=DayPilot.sw($k.nav.scroll);$k.nav.message.style.right=$S+"px";var $y=$k.messageBarPosition||"Top";if($y==="Bottom"){$k.nav.message.style.bottom=$00+"px";$k.nav.message.style.top="";}else if($y==="Top"){$k.nav.message.style.bottom="";$k.nav.message.style.top=top+"px";};var end=function(){$06.messageTimeout=setTimeout($k.$eK,$0i);};DayPilot.fade($k.nav.message,0.2,end);};clearTimeout($06.messageTimeout);if(this.nav.message.style.display!=='none'){DayPilot.fade($k.nav.message,-0.2,$0j);}else{$0j();}};this.$eK=function(){if(!$k.nav){return;};if(!$k.nav.message){return;};var end=function(){$k.nav.message.style.display='none';};DayPilot.fade($k.nav.message,-0.2,end);};this.$eL=function(){if(!$k.nav){return;};if(!$k.nav.message){return;};$k.nav.message.style.display='none';};this.message.show=function($0h){$k.message($0h);};this.message.hide=function(){$k.$eK();};this.$eM=null;this.$e6=function(){if(!this.nav.scroll){return;};(function fromDrawCells(){var $D=$k.$eF();$k.$eq.style.height=$k.$dG+"px";$k.$eq.style.width=$D+"px";if($k.cellWidthSpec==="Auto"&&!$k.$eN){$k.nav.scroll.style.overflowX="hidden";$k.nav.scroll.scrollLeft=0;}else{if($D>$k.nav.scroll.clientWidth){$k.nav.scroll.style.overflowX="auto";}else{$k.nav.scroll.style.overflowX="hidden";}}})();var $0k=$k.timeHeaderPosition==="None"?0:1;if(this.$eM!==null){this.nav.top.style.border=this.$eM;this.$eM=null;};if(this.heightSpec==='Parent100Pct'||this.heightSpec==="Max100Pct"){this.nav.top.style.height="100%";if(this.hideBorderFor100PctHeight){this.$eM=this.nav.top.style.border;this.nav.top.style.border="0 none";};this.height=parseInt(this.nav.top.clientHeight,10)-(this.$eJ())-$0k;};this.nav.scroll.style.height='30px';var $V=this.$eO();var $0l=$V+this.$eJ()+$0k;if($V>=0){this.nav.scroll.style.height=($V)+'px';this.$eP.style.height=($V)+'px';};if(this.nav.divider){if(!$0l||isNaN($0l)||$0l<0){$0l=0;};this.nav.divider.style.height=($0l)+"px";};if(this.heightSpec!=="Parent100Pct"){this.nav.top.style.height=($0l)+"px";};if($k.nav.resScrollSpace){var $0m=30;if($k.heightSpec==="Auto"){$0m=DayPilot.sh($k.nav.scroll);};$k.nav.resScrollSpace.style.height=$0m+"px";};for(var i=0;i<this.elements.separators.length;i++){this.elements.separators[i].style.height=this.$dG+'px';};for(var i=0;i<this.elements.linesVertical.length;i++){this.elements.linesVertical[i].style.height=this.$dG+'px';};$k.$eQ();$k.$eR();};this.$dU=function(){this.startDate=new DayPilot.Date(this.startDate).getDatePart();this.$dJ.pixels=[];this.itline=DayPilot.list();var $0n=this.cellWidthSpec==="Auto";var $0o=function(){if(!$0n){return;};var $0p=0;if($k.$eS()&&$k.timeline){$0p=$k.timeline.length;}else{if($k.scale==="Manual"){$0p=$k.timeline.length;}else{$k.$eT();$0p=$k.itline.length;$k.itline=DayPilot.list();}};var $D=$k.$eU();if($0p>0&&$D>0){var $T=$D/$0p;$k.cellWidth=DayPilot.Util.atLeast($T,$k.cellWidthMin);$k.$eN=$T<$k.cellWidthMin;}};$0o();if(this.$eS()&&this.timeline){if(this.timeline){this.itline=DayPilot.list();var $0q=null;var $R=0;for(var i=0;i<this.timeline.length;i++){var $0r=this.timeline[i];var $T={};$T.start=new DayPilot.Date($0r.start);$T.end=$0r.end?new DayPilot.Date($0r.end):$T.start.addMinutes(this.cellDuration);if(!$0r.width){var $S=Math.floor($R+this.cellWidth);var $D=$S-Math.floor($R);$T.left=Math.floor($R);$T.width=$D;$R+=this.cellWidth;}else{$T.left=$0r.left||$R;$T.width=$0r.width||this.cellWidth;$R+=$T.width;};$T.breakBefore=$0q&&$0q.ticks!==$T.start.ticks;$0q=$T.end;this.itline.push($T);}};if($0n){this.$eV();}}else{this.timeHeader=[];if(this.scale==="Manual"){this.itline=DayPilot.list();var $R=0;var $0q=null;for(var i=0;this.timeline&&i<this.timeline.length;i++){var $0r=this.timeline[i];var $T={};$T.start=new DayPilot.Date($0r.start);$T.end=$0r.end?new DayPilot.Date($0r.end):$T.start.addMinutes(this.cellDuration);if($0q&&$T.start.ticks<$0q.ticks){throw "The timeline must be sequential";};var w=$0r.width||this.cellWidth;var $S=Math.floor($R+w);var $D=$S-Math.floor($R);$T.left=Math.floor($R);$T.width=$D;$R+=w;$T.breakBefore=$0q&&$0q.ticks!==$T.start.ticks;$0q=$T.end;this.itline.push($T);}}else{this.$eT();};this.$eW();}};this.infinite={};this.infinite.shiftStart=function($0s){$P.shiftStart($0s);};this.infinite.scrollTo=function($w){$P.shiftTo($w);};this.$eX={};var $P=this.$eX;$P.shiftX=0;$P.active=false;$P.updateRowStarts=function(){$k.$eY().forEach(function($A,i){$A.start=$k.$eZ();$A.data=null;$k.$f0($A.index,$A.grid);});};$P.isEnabled=function(){return $k.infiniteScrollingEnabled&&!$k.$eS();};$P.shiftTo=function($0t){var $0t=new DayPilot.Date($0t);var $O=$0t.addDays(-$k.infiniteScrollingStepDays).getDatePart();var $K=new DayPilot.Duration($O.getTime()-$k.startDate.getDatePart().getTime()).totalDays();$P.shiftStart($K,$0t);};$P.shiftStart=function($0s,scrollTo){var $B;$P.active=true;var $0u=$k.startDate;var $0v=$k.startDate.addDays($0s);if($0s>0){$B=-$k.getPixels($0v).left;};$k.startDate=$k.startDate.addDays($0s);$k.itline=DayPilot.list();$k.$dJ.pixels=[];$k.$f1={};$k.$eT();$P.updateRowStarts();if($0s<0){$B=$k.getPixels($0u).left;};$k.timeHeader=[];$k.$eW();$k.$e0();$k.cellProperties={};$k.$e7();$k.$e9();$k.$dX();$k.$e8();$k.$e1();$k.$e4();$k.$e6();if(typeof scrollTo!=='undefined'){$k.scrollTo(new DayPilot.Date(scrollTo));$k.$ej();}else{$k.nav.scroll.scrollLeft+=$B;};$k.$ec();$k.$ed();$P.active=false;};this.$eT=function(){var $0w=(this.viewType!=='Days')?this.startDate.addDays(this.days):this.startDate.addDays(1);var $O=this.startDate;var end=this.$f2($O);var $0x=false;var $R=0;var $0y=null;while(end.ticks<=$0w.ticks&&end.ticks>$O.ticks){var $0z=$O;var $0A=end;if($k.showNonBusinessForceHours&&$k.scale=="Day"){$0z=$O.addHours($k.businessBeginsHour);$0A=$O.addHours($k.businessEndsHour);};var $n=this.$f3($0z,$0A,true);if(!$n.cell.start||!$n.cell.end){throw new DayPilot.Exception("Invalid timeline cell start/end: start and/or end not specified");};$n.cell.start=new DayPilot.Date($n.cell.start);$n.cell.end=new DayPilot.Date($n.cell.end);if($n.cell.start>=$n.cell.end){throw new DayPilot.Exception("Invalid timeline cell start/end: end before start");};if($0y&&$0y.ticks>$n.cell.start.ticks){throw new DayPilot.Exception("Invalid timeline cell start/end: overlapping cells");};if($0y&&$0y.ticks<$n.cell.start.ticks){$0x=true;}else{$0x=false;};var $0B=$n.cell.width||$k.cellWidth;if($n.cell.visible){var $S=Math.floor($R+$0B);var $D=$S-Math.floor($R);var $0C={};$0C.start=$n.cell.start;$0C.end=$n.cell.end;$0C.left=Math.floor($R);$0C.width=$D;$0C.breakBefore=$0x;this.itline.push($0C);$R+=$0B;$0y=$n.cell.end;};$O=end;end=this.$f2($O);}};this.$eV=function(){if(!this.timeHeader){return;};for(var y=0;y<this.timeHeader.length;y++){var $A=this.timeHeader[y];for(var x=0;x<$A.length;x++){var h=$A[x];h.left=this.getPixels(new DayPilot.Date(h.start)).left;var $S=this.getPixels(new DayPilot.Date(h.end)).left;var $D=$S-h.left;h.width=$D;}}};this.$eW=function(){var $0D=this.timeHeaders;if(!$0D){$0D=[{"groupBy":this.cellGroupBy},{"groupBy":"Cell"}];};if(this.itline.isEmpty()){this.timeHeader=[];for(var i=0;i<$0D.length;i++){this.timeHeader[i]=[];};return;};var $0E=$k.$f4();for(var i=0;i<$0D.length;i++){var $0F=$0D[i].groupBy;var $0G=$0D[i].format;if($0F==="Default"){$0F=this.cellGroupBy;};var $0H=[];var $O=this.$eZ();while($O.ticks<$0E.ticks){var h={};h.start=$O;h.end=this.$f5(h.start,$0F);if(h.start.ticks===h.end.ticks){break;};h.left=this.getPixels(h.start).left;var $S=this.getPixels(h.end).left;var $D=$S-h.left;h.width=$D;h.colspan=Math.ceil($D/(1.0*this.cellWidth));if(typeof $0G==="string"){h.innerHTML=h.start.toString($0G,$0g.locale());}else{h.innerHTML=this.$f6(h,$0F);};h.text=h.innerHTML;if($D>0){if(typeof this.onBeforeTimeHeaderRender==='function'){var $T={};$T.start=h.start;$T.end=h.end;$T.text=h.innerHTML;$T.html=h.innerHTML;$T.toolTip=h.innerHTML;$T.backColor=null;$T.fontColor=null;$T.level=this.timeHeader.length;$T.cssClass=null;var $n={};$n.header=$T;this.onBeforeTimeHeaderRender($n);h.text=h.innerHTML;h.innerHTML=$T.html;h.backColor=$T.backColor;h.fontColor=$T.fontColor;h.toolTip=$T.toolTip;h.areas=$T.areas;h.cssClass=$T.cssClass;};$0H.push(h);};$O=h.end;};this.timeHeader.push($0H);}};this.$f3=function($O,end){var $T={};$T.start=$O;$T.end=end;$T.visible=true;$T.width=null;var $n={};$n.cell=$T;if(typeof this.onIncludeTimeCell==='function'){this.onIncludeTimeCell($n);return $n;};if(this.showNonBusiness){return $n;};var $0I=$k.viewType==="Days";$n.cell.visible=this.isBusiness({"start":$O,"end":end},$0I);return $n;};this.getPixels=function($w){var $0J=$w.ticks;var $0c=this.$dJ.pixels[$0J];if($0c){return $0c;};var $0K=null;var $0L=221876841600000;if(this.itline.length===0||$0J<this.itline[0].start.ticks){var $l={};$l.cut=false;$l.left=0;$l.boxLeft=$l.left;$l.boxRight=$l.left;$l.i=null;return $l;};var $0M=this.$f7($w);var si=DayPilot.Util.atLeast($0M.i-1,0);for(var i=si;i<this.itline.length;i++){var $T=this.itline[i];var $0N=$T.start.ticks;var $0O=$T.end.ticks;if($0N<$0J&&$0J<$0O){var offset=$0J-$0N;var $l={};$l.cut=false;$l.left=$T.left+this.$f8($T,offset);$l.boxLeft=$T.left;$l.boxRight=$T.left+$T.width;$l.i=i;break;}else if($0N===$0J){var $l={};$l.cut=false;$l.left=$T.left;$l.boxLeft=$l.left;$l.boxRight=$l.left+$T.width;$l.i=i;break;}else if($0O===$0J){var $l={};$l.cut=false;$l.left=$T.left+$T.width;$l.boxLeft=$l.left;$l.boxRight=$l.left;$l.i=i+1;break;}else if($0J<$0N&&$0J>$0L){var $l={};$l.cut=true;$l.left=$T.left;$l.boxLeft=$l.left;$l.boxRight=$l.left;$l.i=i;break;};$0L=$0O;};if(!$l){var $0P=this.itline[this.itline.length-1];var $l={};$l.cut=true;$l.left=$0P.left+$0P.width;$l.boxLeft=$l.left;$l.boxRight=$l.left;$l.i=null;};this.$dJ.pixels[$0J]=$l;return $l;};this.getDate=function($R,$0Q,$0R){var $y=this.$f9($R,$0R);if(!$y){return null;};var x=$y.x;var $0S=this.itline[x];if(!$0S){return null;};var $O=($0R&&!$0Q)?$0S.end:$0S.start;if(!$0Q){return $O;}else{return $O.addTime(this.$fa($y.cell,$y.offset));}};this.$f9=function($B,$0R){if(this.itline.length===0){return null;};var $J=0;var $0K=0;for(var i=0;i<this.itline.length;i++){var $T=this.itline[i];var $D=$T.width||this.cellWidth;$J+=$D;if(($B<$J)||($0R&&$B===$J)){var $l={};$l.x=i;$l.offset=$B-$0K;$l.cell=$T;return $l;};$0K=$J;};var $T=$k.itline.last();var $l={};$l.x=this.itline.length-1;$l.offset=$T.width||this.cellWidth;$l.cell=$T;return $l;};this.$fb=function($0T){return this.$f7($0T);};this.$f7=function($0T){var $J=new DayPilot.Date($0T);var $0U=0;var $0V=this.itline[0];if($J.ticks<$0V.start.ticks){var $l={};$l.hidden=true;$l.previous=null;$l.current=null;$l.next=this.itline[0];$l.i=-1;return $l;};var to=this.itline.length-1;var $0P=this.itline[to];if($J.ticks>$0P.end.ticks){var $l={};$l.past=true;$l.previous=this.itline[this.itline.length-1];$l.i=this.itline.length;return $l;};if($J.ticks===$0P.end.ticks){var $l={};$l.past=false;$l.current=this.itline[this.itline.length-1];$l.i=this.itline.length-1;return $l;};var si=(function(){var $0W=$k.itline;var $0X;while($0U<=to){$0X=Math.floor(($0U+to)/2);if($0W[$0X].start.ticks>$J.ticks){to=$0X-1;}else if($0W[$0X].end.ticks<$J.ticks){$0U=$0X+1;}else{return $0X;}};return $0U;})();for(var i=si;i<this.itline.length;i++){var $T=this.itline[i];if($T.start.ticks<=$J.ticks&&$J.ticks<$T.end.ticks){var $l={};$l.hidden=false;$l.current=$T;$l.i=i;return $l;};if($J.ticks<$T.start.ticks){var $l={};$l.hidden=true;$l.previous=i>0?this.itline[i-1]:null;$l.current=null;$l.next=this.itline[i];$l.i=i;return $l;}};var $l={};$l.past=true;$l.previous=this.itline[this.itline.length-1];$l.i=this.itline.length;return $l;};this.$f8=function($T,$0J){var $D=$T.width||this.cellWidth;var $0Y=$T.end.ticks-$T.start.ticks;return Math.floor(($D*$0J)/($0Y));};this.$fa=function($T,$B){var $0Y=$T.end.ticks-$T.start.ticks;var $D=$T.width||this.cellWidth;return Math.floor($B/$D*$0Y);};this.$fc=function(ev){if(DayPilot.Global.touch.start){return;};if(DayPilotScheduler.preventEventClick){return;};$k.$fd={};$k.$fe(this,ev);};this.eventClickPostBack=function(e,$s){this.$ff('EventClick',e,$s);};this.eventClickCallBack=function(e,$s){this.$fg('EventClick',e,$s);};this.$fe=function($06,ev){var e=$06.event;if(!e){return;};var ev=ev||window.event;if(typeof(DayPilot.Bubble)!=='undefined'){DayPilot.Bubble.hideActive();};if(!e.client.doubleClickEnabled()){$k.$fh($06,ev);return;};if(!$k.timeouts.click){$k.timeouts.click=[];};var $0Z=function($06,ev){return function(){$k.$fh($06,ev);};};$k.timeouts.click.push(window.setTimeout($0Z($06,ev),$k.doubleClickTimeout));};this.$fi=function(x){return $k.itline[x];};this.$fh=function($06,ev){if(typeof ev==="boolean"){throw "Invalid _eventClickSingle parameters";};var e=$06.event;if(!e){return;};var $10=ev.ctrlKey;var $11=ev.metaKey;if(!e.client.clickEnabled()){return;};$k.$fj(ev);if($k.$ek()){var $n={};$n.e=e;$n.div=$06;$n.originalEvent=ev;$n.ctrl=$10;$n.meta=$11;$n.shift=ev.shiftKey;$n.preventDefault=function(){this.preventDefault.value=true;};$n.control=$k;$n.toJSON=function(){return DayPilot.Util.copyProps($n,{},["e","ctrl","meta","shift"]);};if(typeof $k.onEventClick==='function'){$k.onEventClick($n);if($n.preventDefault.value){return;}};switch($k.eventClickHandling){case 'PostBack':$k.eventClickPostBack(e);break;case 'CallBack':$k.eventClickCallBack(e);break;case 'Edit':$k.$fk($06);break;case 'Select':$k.$fl($06,e,$10,$11);break;case 'ContextMenu':var $12=e.client.contextMenu();if($12){$12.show(e);}else{if($k.contextMenu){$k.contextMenu.show(e);}};break;case 'Bubble':if($k.bubble){$k.bubble.showEvent(e);};break;case "RectangleSelect":if($0g.$fm()!=="Disabled"){$13.start();return false;};break;};if(typeof $k.onEventClicked==='function'){$k.onEventClicked($n);}}else{switch($k.eventClickHandling){case 'PostBack':$k.eventClickPostBack(e);break;case 'CallBack':$k.eventClickCallBack(e);break;case 'JavaScript':$k.onEventClick(e);break;case 'Edit':$k.$fk($06);break;case 'Select':$k.$fl($06,e,$10,$11);break;case 'ContextMenu':var $12=e.client.contextMenu();if($12){$12.show(e);}else{if($k.contextMenu){$k.contextMenu.show(e);}};break;case 'Bubble':if($k.bubble){$k.bubble.showEvent(e);};break;case "RectangleSelect":if($0g.$fm()!=="Disabled"){$13.start();return false;};break;}}};this.$fn=function(e){if($k.$ek()){var $n={};$n.e=e;$n.preventDefault=function(){this.preventDefault.value=true;};$n.control=$k;$n.toJSON=function(){return DayPilot.Util.copyProps($n,{},["e"]);};if(typeof $k.onEventDelete==='function'){$k.onEventDelete($n);if($n.preventDefault.value){return;}};switch($k.eventDeleteHandling){case 'PostBack':$k.eventDeletePostBack(e);break;case 'CallBack':$k.eventDeleteCallBack(e);break;case 'Update':$k.events.remove(e);break;};if(typeof $k.onEventDeleted==='function'){$k.onEventDeleted($n);}}else{switch($k.eventDeleteHandling){case 'PostBack':$k.eventDeletePostBack(e);break;case 'CallBack':$k.eventDeleteCallBack(e);break;case 'JavaScript':$k.onEventDelete(e);break;}}};this.eventDeletePostBack=function(e,$s){this.$ff('EventDelete',e,$s);};this.eventDeleteCallBack=function(e,$s){this.$fg('EventDelete',e,$s);};this.setHScrollPosition=function($B){this.nav.scroll.scrollLeft=$B;};this.getScrollX=function(){return this.nav.scroll.scrollLeft;};this.getHScrollPosition=this.getScrollX;this.getScrollY=function(){return this.nav.scroll.scrollTop;};this.$fl=function($06,e,$10,$11){$k.$fo($06,e,$10,$11);};this.eventSelectPostBack=function(e,$14,$s){var $15={};$15.e=e;$15.change=$14;this.$ff('EventSelect',$15,$s);};this.eventSelectCallBack=function(e,$14,$s){var $15={};$15.e=e;$15.change=$14;this.$fg('EventSelect',$15,$s);};this.$fo=function($06,e,$10,$11){var m=$k.multiselect;var $16=false;var $17=m.isSelected(e);var $18=$10||$11;if(!$18&&$17&&!$16&&m.$fp.length===1){return;};if($k.$ek()){m.$fq=m.events();var $n={};$n.e=e;$n.selected=$17;$n.ctrl=$10;$n.meta=$11;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onEventSelect==='function'){$k.onEventSelect($n);if($n.preventDefault.value){return;}};switch($k.eventSelectHandling){case 'PostBack':$k.eventSelectPostBack(e,$14);break;case 'CallBack':if(typeof WebForm_InitCallback!=='undefined'){window.__theFormPostData="";window.__theFormPostCollection=[];WebForm_InitCallback();};$k.eventSelectCallBack(e,$14);break;case 'Update':m.$fr($06,$10,$11);break;};if(typeof $k.onEventSelected==='function'){$n.change=m.isSelected(e)?"selected":"deselected";$n.selected=m.isSelected(e);$k.onEventSelected($n);}}else{m.$fq=m.events();m.$fr($06,$10,$11);var $14=m.isSelected(e)?"selected":"deselected";switch($k.eventSelectHandling){case 'PostBack':$k.eventSelectPostBack(e,$14);break;case 'CallBack':if(typeof WebForm_InitCallback!=='undefined'){window.__theFormPostData="";window.__theFormPostCollection=[];WebForm_InitCallback();};$k.eventSelectCallBack(e,$14);break;case 'JavaScript':$k.onEventSelect(e,$14);break;}}};this.eventRightClickPostBack=function(e,$s){this.$ff('EventRightClick',e,$s);};this.eventRightClickCallBack=function(e,$s){this.$fg('EventRightClick',e,$s);};this.$fs=function(ev){if(DayPilot.Global.touch.active||DayPilot.Global.touch.start){return;};var e=this.event;ev=ev||window.event;ev.cancelBubble=true;if(!this.event.client.rightClickEnabled()){return false;};$k.$fj(ev);if($k.$ek()){var $n={};$n.e=e;$n.div=this;$n.originalEvent=ev;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onEventRightClick==='function'){$k.onEventRightClick($n);if($n.preventDefault.value){return false;}};switch($k.eventRightClickHandling){case 'PostBack':$k.eventRightClickPostBack(e);break;case 'CallBack':$k.eventRightClickCallBack(e);break;case 'ContextMenu':var $12=e.client.contextMenu();if($12){$12.show(e);}else{if($k.contextMenu){$k.contextMenu.show(this.event);}};break;case 'Bubble':if($k.bubble){$k.bubble.showEvent(e);};break;};if(typeof $k.onEventRightClicked==='function'){$k.onEventRightClicked($n);}}else{switch($k.eventRightClickHandling){case 'PostBack':$k.eventRightClickPostBack(e);break;case 'CallBack':$k.eventRightClickCallBack(e);break;case 'JavaScript':$k.onEventRightClick(e);break;case 'ContextMenu':var $12=e.client.contextMenu();if($12){$12.show(e);}else{if($k.contextMenu){$k.contextMenu.show(this.event);}};break;case 'Bubble':if($k.bubble){$k.bubble.showEvent(e);};break;}};return false;};this.eventDoubleClickPostBack=function(e,$s){this.$ff('EventDoubleClick',e,$s);};this.eventDoubleClickCallBack=function(e,$s){this.$fg('EventDoubleClick',e,$s);};this.$ft=function(ev){if(typeof(DayPilot.Bubble)!=='undefined'){DayPilot.Bubble.hideActive();};if($k.timeouts.click){for(var $19 in $k.timeouts.click){window.clearTimeout($k.timeouts.click[$19]);};$k.timeouts.click=null;};var ev=ev||window.event;var e=this.event;ev.stopPropagation&&ev.stopPropagation();ev.cancelBubble=true;if($k.$ek()){var $n={};$n.e=e;$n.originalEvent=ev;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onEventDoubleClick==='function'){$k.onEventDoubleClick($n);if($n.preventDefault.value){return;}};switch($k.eventDoubleClickHandling){case 'PostBack':$k.eventDoubleClickPostBack(e);break;case 'CallBack':$k.eventDoubleClickCallBack(e);break;case 'Edit':$k.$fk(this);break;case 'Select':$k.$fl($06,e,ev.ctrlKey,ev.metaKey);break;case 'Bubble':if($k.bubble){$k.bubble.showEvent(e);};break;case 'ContextMenu':var $12=e.client.contextMenu();if($12){$12.show(e);}else{if($k.contextMenu){$k.contextMenu.show(e);}};break;};if(typeof $k.onEventDoubleClicked==='function'){$k.onEventDoubleClicked($n);}}else{switch($k.eventDoubleClickHandling){case 'PostBack':$k.eventDoubleClickPostBack(e);break;case 'CallBack':$k.eventDoubleClickCallBack(e);break;case 'JavaScript':$k.onEventDoubleClick(e);break;case 'Edit':$k.$fk(this);break;case 'Select':$k.$fl($06,e,ev.ctrlKey,ev.metaKey);break;case 'Bubble':if($k.bubble){$k.bubble.showEvent(e);};break;case 'ContextMenu':var $12=e.client.contextMenu();if($12){$12.show(e);}else{if($k.contextMenu){$k.contextMenu.show(e);}};break;}}};this.eventResizePostBack=function(e,$0v,$1a,$s){this.$fu("PostBack",e,$0v,$1a,$s);};this.eventResizeCallBack=function(e,$0v,$1a,$s){this.$fu("CallBack",e,$0v,$1a,$s);};this.$fu=function($01,e,$0v,$1a,$s){var $1b=e&&!!e.preventDefault;var $15={};if($1b){var $n=e;$15.e=$n.e;$15.newStart=$n.newStart;$15.newEnd=$n.newEnd;$15.multiresize=[];$n.multiresize.forEach(function($04){var $1c={};$1c.e=$04.event;$1c.newStart=$04.start;$1c.newEnd=$04.end;$15.multiresize.push($1c);});}else{$15.e=e;$15.newStart=$0v;$15.newEnd=$1a;};this.$fv($01,"EventResize",$15,$s);};this.$fw=function(e,$0v,$1a,$1d){if(this.eventResizeHandling==='Disabled'){return;};$1a=$k.$fx($1a);var $n={};$n.e=e;$n.async=false;$n.loaded=function(){$1e();};$n.newStart=$0v;$n.newEnd=$1a;$n.what=$1d;$n.preventDefault=function(){this.preventDefault.value=true;};$n.multiresize=DayPilot.list($1f.list);$n.control=$k;$n.toJSON=function(){return DayPilot.Util.copyProps($n,{},["e","async","newStart","newEnd","multiresize"]);};var $1g={};$1g.event=e;$1g.start=$0v;$1g.end=$1a;$n.multiresize.splice(0,0,$1g);if($k.$ek()){var $1e=function(){$1h.hide();if($n.preventDefault.value){return;};$0v=$n.newStart;$1a=$n.newEnd;switch($k.eventResizeHandling){case 'PostBack':$k.eventResizePostBack($n);break;case 'CallBack':$k.eventResizeCallBack($n);break;case 'Notify':$k.eventResizeNotify($n);break;case 'Update':$k.$fy($n);break;};if(typeof $k.onEventResized==='function'){$k.onEventResized($n);}};if(typeof $k.onEventResize==='function'){$k.onEventResize($n);};if(!$n.async){$1e();}else{if($k.blockOnCallBack){$1h.show();}}}else{switch($k.eventResizeHandling){case 'PostBack':$k.eventResizePostBack($n);break;case 'CallBack':$k.eventResizeCallBack($n);break;case 'JavaScript':$k.onEventResize(e,$0v,$1a);break;case 'Notify':$k.eventResizeNotify($n);break;case 'Update':$k.$fy($n);break;}}};this.eventMovePostBack=function(e,$0v,$1a,$1i,$s,$0H){this.$fz("PostBack",e,$0v,$1a,$1i,$s,$0H);};this.eventMoveCallBack=function(e,$0v,$1a,$1i,$s,$0H){this.$fz("CallBack",e,$0v,$1a,$1i,$s,$0H);};this.$fz=function($01,e,$0v,$1a,$1i,$s,$0H){var $1b=e&&!!e.preventDefault;var $15={};if($1b){var $n=e;$15.e=$n.e;$15.newStart=$n.newStart;$15.newEnd=$n.newEnd;$15.newResource=$n.newResource;$15.position=$n.position;$15.multimove=[];$n.multimove.forEach(function($04){var $1c={};$1c.e=$04.event;$1c.newStart=$04.start;$1c.newEnd=$04.end;$1c.newResource=$04.event.resource();if($1c.e===$n.e||$1c.e.data.id==$n.e.data.id){$1c.newResource=$n.newResource;}else if(mm.rowoffset){var ri=$04.event.part.dayIndex+mm.rowoffset;$1c.newResource=$k.rowlist[ri].id;};$15.multimove.push($1c);});}else{$15.e=e;$15.newStart=$0v;$15.newEnd=$1a;$15.newResource=$1i;$15.position=$0H;};this.$fv($01,"EventMove",$15,$s);};this.$fA=function($01,$n,$s){var $15={};$15.start=$n.start;$15.end=$n.end;$15.resource=$n.resource;$15.multirange=[];$n.multirange.forEach(function($04){var $1j={};$1j.start=$04.start;$1j.end=$04.end;$1j.resource=$04.resource;$15.multirange.push($1j);});this.$fv($01,"TimeRangeSelected",$15,$s);};this.$fv=function($01,$1k,$15,$s){if($01==='PostBack'){$k.$ff($1k,$15,$s);}else if($01==='CallBack'){$k.$fg($1k,$15,$s,"CallBack");}else if($01==='Immediate'){$k.$fg($1k,$15,$s,"Notify");}else if($01==='Queue'){$k.queue.add(new DayPilot.Action(this,$1k,$15,$s));}else if($01==='Notify'){if($0g.notifyType()==='Notify'){$k.$fg($1k,$15,$s,"Notify");}else{$k.queue.add(new DayPilot.Action($k,$1k,$15,$s));}}else{throw "Invalid event invocation type";}};this.eventMoveNotify=function(e,$0v,$1a,$1i,$s,$0H){var $1b=e&&!!e.preventDefault;if($1b){var $n=e;$n.old=new DayPilot.Event($n.e.copy(),$k);$n.multimove.forEach(function($04){$04.old=new DayPilot.Event($04.event.copy(),$k);});$k.$fy($n);$n.e=$n.old;delete $n.old;$n.multimove.forEach(function($04){$04.event=$04.old;delete $04.old;});}else{e=new DayPilot.Event(e.copy(),$k);var $1l=$k.events.$fB(e.data);e.start($0v);e.end($1a);e.resource($1i);e.commit();$1l=$1l.concat($k.events.$fC(e.data));$k.$fD($1l);$k.$fE();$k.$fF($1l);};this.$fz("Notify",e,$0v,$1a,$1i,$s,$0H);};this.eventResizeNotify=function(e,$0v,$1a,$s){var $1b=e&&!!e.preventDefault;if($1b){var $n=e;$n.old=new DayPilot.Event($n.e.copy(),$k);$n.multiresize.forEach(function($04){$04.old=new DayPilot.Event($04.event.copy(),$k);});$k.$fy($n);$n.e=$n.old;delete $n.old;$n.multiresize.forEach(function($04){$04.event=$04.old;delete $04.old;});}else{e=new DayPilot.Event(e.copy(),$k);var $1l=$k.events.$fB(e.data);e.start($0v);e.end($1a);e.commit();$1l=$1l.concat($k.events.$fC(e.data));$k.$fD($1l);$k.$fE();$k.$fF($1l);};this.$fu("Notify",e,$0v,$1a,$s);};this.$fG={};var $1m=this.$fG;$1m.$fH=function(){return $k.resourcesTop||$k.resourcesBottom;};this.zoom={};this.zoom.active=-1;this.zoom.setActive=function($1n,$y){var $1o;if(typeof $1n==="number"){$1o=$k.zoomLevels[$1n];}else if(typeof $1n==="string"){var i=$k.zoom.$fI($1n);$1o=$k.zoomLevels[i];}else{throw new DayPilot.Exception("Unexpected parameter type (string or number required): "+typeof $1n);};if(!$1o){throw new DayPilot.Exception("Zoom level not found: "+$1n);};if($1n===$k.zoom.active){return;};var $w=$k.zoom.$fJ($y);$k.zoom.$fK($1n,$w);if($k.$en){$k.update();};if($w){$k.scrollTo($w,null,$y||$k.zoomPosition);}};this.zoom.$fI=function(id){return DayPilot.list($k.zoomLevels).findIndex(function($1o){return $1o.id===id;});};this.zoom.$fJ=function($y){$y=$y||$k.zoomPosition||"left";var $w=null;if(!$k.nav.scroll){return null;};var $U=$k.getViewPort();switch($y){case "left":$w=$U.start;break;case "middle":$w=$U.start&&$U.start.addTime(($k.getViewPort().end.getTime()-$k.getViewPort().start.getTime())/2);break;case "right":$w=$U.end;break;};return $w;};this.zoom.$fK=function($1n,$w){var $C=$k.zoomLevels.length-1;if($1n>$C){$1n=$C;};if($1n<0){$1n=0;};$k.zoom.active=$1n;var $1o=$k.zoomLevels[$1n];var $n={};$n.date=$w||new DayPilot.Date($k.startDate);$n.level=$1o;DayPilot.Util.ownPropsAsArray($1o.properties).forEach(function($04){if($04.key.indexOf("on")===0){return;};if(typeof $04.val==="function"){$k[$04.key]=$04.val($n);return;};$k[$04.key]=$04.val;});return $n;};this.multiselect={};this.multiselect.$fp=[];this.multiselect.$fL=[];this.multiselect.$fq=[];this.multiselect.$ea=function($02){$k.multiselect.$fp=DayPilot.list($02).map(function($04){return new DayPilot.Event($04,$k);});};this.multiselect.$fM=function(){var m=$k.multiselect;return JSON.stringify(m.events());};this.multiselect.events=function(){var m=$k.multiselect;var $03=DayPilot.list();$03.ignoreToJSON=true;for(var i=0;i<m.$fp.length;i++){$03.push(m.$fp[i]);};return $03;};this.multiselect.get=function(){return $k.multiselect.events();};this.multiselect.$fN=function(){};this.multiselect.$fr=function($06,$1p,$1q){var m=$k.multiselect;if(m.isSelected($06.event)){if($k.allowMultiSelect){if($1p||$1q){m.remove($06.event,true);}else{var $0p=m.$fp.length;m.clear();if($0p>1){m.add($06.event,true);}}}else{m.clear();}}else{if($k.allowMultiSelect){if($1p||$1q){m.add($06.event,true);}else{m.clear();m.add($06.event,true);}}else{m.clear();m.add($06.event,true);}};m.$fO($06);m.$fN();};this.multiselect.$fP=function(ev){var m=$k.multiselect;return m.$fQ(ev,m.$fp);};this.multiselect.$fR=function(){var m=$k.multiselect;var $02=[];for(var i=0;i<m.$fp.length;i++){var event=m.$fp[i];$02.push(event.value());};alert($02.join("\n"));};this.multiselect.add=function(ev,$1r){var m=$k.multiselect;if(m.indexOf(ev)===-1){m.$fp.push(ev);};if($1r){return;};m.$fS(ev);};this.multiselect.remove=function(ev,$1r){var m=$k.multiselect;var i=m.indexOf(ev);if(i!==-1){m.$fp.splice(i,1);};if($1r){return;};m.$fS(ev);};this.multiselect.clear=function($1r){var m=$k.multiselect;m.$fp=[];if($1r){return;};m.redraw();};this.multiselect.redraw=function(){var m=$k.multiselect;m.$fL=[];for(var i=0;i<$k.elements.events.length;i++){var $06=$k.elements.events[i];if(!$06.event){continue;};if(!$06.event.isEvent){continue;};if(m.isSelected($06.event)){m.$fT($06);}else{m.$fU($06);}}};this.multiselect.$fO=function($06){if(!$06){return;};var m=$k.multiselect;if(m.isSelected($06.event)){m.$fT($06);}else{m.$fU($06);}};this.multiselect.$fS=function(e){var m=$k.multiselect;var $06=$k.$fV(e);m.$fO($06);};this.multiselect.$fT=function($06){var m=$k.multiselect;var cn=$k.$eC("_selected");var $06=m.$fW($06);DayPilot.Util.addClass($06,cn);m.$fL.push($06);};this.multiselect.$fW=function($06){return $06;};this.multiselect.$fX=function(){var m=$k.multiselect;for(var i=0;i<m.$fL.length;i++){var $06=m.$fL[i];m.$fU($06,true);};m.$fL=[];};this.multiselect.$fU=function($06,$1s){var m=$k.multiselect;var cn=$k.$eC("_selected");DayPilot.Util.removeClass($06,cn);if($1s){return;};var i=DayPilot.indexOf(m.$fL,$06);if(i!==-1){m.$fL.splice(i,1);}};this.multiselect.isSelected=function(ev){if(!ev){return false;};if(!ev.isEvent){return false;};return $k.multiselect.$fQ(ev,$k.multiselect.$fp);};this.multiselect.indexOf=function(ev){var $s=ev.data;for(var i=0;i<$k.multiselect.$fp.length;i++){var $04=$k.multiselect.$fp[i];if($k.$fY($04.data,$s)){return i;}};return -1;};this.multiselect.$fQ=function(e,$02){if(!$02){return false;};for(var i=0;i<$02.length;i++){var ei=$02[i];if($k.$fY(e,ei)){return true;}};return false;};this.multiselect.startRectangle=function(){$13.start();};this.$fZ=function(){this.$e9();this.$ec();};this.$g0=function(){$k.$g1();$k.$dY();$k.$e4();$k.$g2();if($k.progressiveRowRendering){$k.$g3();}};this.$fO=function($n){$n=$n||{};var $1t=!$n.eventsOnly;window.clearTimeout($k.$g4);if($1t){if(!this.$eS()){$k.timeHeader=null;$k.cellProperties={};};$k.$f1={};$k.$dT();$k.$dU();if(!$n||!$n.dontLoadResources){$k.$dV();};if($k.$g5!==$k.timeHeaderPosition){$k.$g6();};$k.events.$g7();$k.$g8.clearCache();$k.clearSelection();};this.$dX();this.$g9();$k.$e1();$k.$dY();if($1t){$k.$ga();$k.$dZ();$k.$e0();$k.$ei($k.selectedRows);$k.$gb();};$k.$e4();$k.$g2();$k.$e5();$1u.hideLinkpoints();this.$e8();this.$e7();this.$dR();this.$dW();this.$eb();this.$fZ();$k.$e6();if($n.immediateEvents||$n.eventsOnly){$k.$ed();}else{setTimeout(function(){$k.$ed();},100);};if(this.visible){if($k.$dI!=$k.visible){this.show();}}else{this.hide();};this.$dI=this.visible;this.$eh();var angular=$k.$gc.scope||$k.$el.enabled;if(!angular||$k.$en){this.$ej();};this.$gd();this.$dO();};this.$gd=function(){if(typeof $k.onAfterUpdate!=="function"){return;};var $n={};$k.onAfterUpdate($n);};this.update=function($j){if($k.$dF){throw new DayPilot.Exception("You are trying to update a DayPilot.Scheduler object that has been disposed already. Calling .dispose() destroys the object and makes it unusable.");};$1v.request($j);};var $1v={};$1v.timeout=null;$1v.options=null;$1v.enabled=false;$1v.request=function($j){if($1v.enabled){clearTimeout($1v.timeout);$1v.mergeOptions($j);$1v.timeout=setTimeout($1v.doit);}else{$1v.mergeOptions($j);$1v.doit();}};$1v.mergeOptions=function($j){if(!$j){return;};if(!$1v.options){$1v.options={};};for(var name in $j){$1v.options[name]=$j[name];}};$1v.doit=function(){var $j=$1v.options;$1v.options=null;if(!$k.$en){$k.$ge($j);return;};if(DayPilot.Util.isOnlyProperty($j,"events")){$k.events.list=$j.events;$k.$fO({"eventsOnly":true});return;};if(DayPilot.Util.isOnlyProperty($j,"separators")){$k.separators=$j.separators;$k.$fZ();return;};if(DayPilot.Util.isOnlyProperty($j,"rowHeaderColumns")&&!$k.$gf()){$k.rowHeaderColumns=$j.rowHeaderColumns;$k.$g0();return;};$k.$ge($j);$k.$fO({"immediateEvents":true});$k.$gg();$k.$dP(null,false);};this.$gh=function($1l){$1l.forEach(function($A){$k.$gi($A.index,$A.grid);});};this.$gj=function($1l){if(!$1l||$1l.length===0){return[];};if($1l[0].isRow){return $1l;};return $1l.map(function(i){return $k.rowlist[i];});};this.$fF=function($1l,$1w,$1x){$1l=DayPilot.ua($1l);$1l=$k.$gj($1l);$k.$gh($1l);if(this.$gk){this.$e1();this.$e4();this.$e7();this.$e9();$1l.forEach(function($A){$k.$gl($A.index,$A.grid);});$1l.forEach(function($A){$k.$gm($A.index,$A.grid);});this.$eb();this.$ec();this.$gn();}else{$1l.forEach(function($A){if(!$1w){$k.$gl($A.index,$A.grid);};$k.$gm($A.index,$A.grid);});$1l.forEach(function($A){$k.$go($A.index,$A.grid);});$k.$eb();};$k.$ey();$1u.load();$k.multiselect.redraw();if($1x){$1x();};this.$dR();};this.$fx=function($w){if($k.eventEndSpec==="DateTime"){return $w;};if($w.getDatePart().ticks===$w.ticks){return $w.addDays(-1);};return $w.getDatePart();};this.$gp=function($w){if($k.eventEndSpec==="DateTime"){return $w;};return $w.getDatePart().addDays(1);};this.$gq=function($w){if($k.eventEndSpec==="DateTime"){return $w;};return $w.getDatePart();};this.$gr=function(e,$0v,$1a,$1i,external,ev,$0H){$k.$gs=null;if($k.eventMoveHandling==='Disabled'){return;};$1a=$k.$fx($1a);var $n={};$n.e=e;$n.newStart=$0v;$n.newEnd=$1a;$n.newResource=$1i;$n.external=external;$n.ctrl=false;$n.meta=false;$n.shift=false;if(ev){$n.shift=ev.shiftKey;$n.ctrl=ev.ctrlKey;$n.meta=ev.metaKey;};$n.multimove=DayPilot.list(mm.list);$n.areaData=DayPilot.Global.movingAreaData;$n.control=$k;$n.toJSON=function(){return DayPilot.Util.copyProps($n,{},["e","newStart","newEnd","newResource","external","ctrl","meta","shift","multimove","areaData"]);};var $1g={};$1g.event=e;$1g.start=$0v;$1g.end=$1a;$1g.overlapping=false;$1g.resource=$1i;$n.multimove.splice(0,0,$1g);$n.position=$0H;$n.preventDefault=function(){this.preventDefault.value=true;};if($k.$ek()){var $1y=function(){$n.loaded=function(){};$1h.hide();if($n.preventDefault.value){$k.$gt();return;};$0v=$n.newStart;$1a=$n.newEnd;switch($k.eventMoveHandling){case 'PostBack':$k.eventMovePostBack($n);break;case 'CallBack':$k.eventMoveCallBack($n);break;case 'Notify':$k.eventMoveNotify($n);break;case 'Update':$k.$fy($n);break;};$k.$gt();if(typeof $k.onEventMoved==='function'){$k.onEventMoved($n);}};$n.async=false;$n.loaded=function(){$1y();};if(typeof $k.onEventMove==='function'){$k.onEventMove($n);};if(!$n.async){$1y();}else{if($k.blockOnCallBack){$1h.show();}}}else{switch($k.eventMoveHandling){case 'PostBack':$k.eventMovePostBack($n);break;case 'CallBack':$k.eventMoveCallBack($n);break;case 'JavaScript':$k.onEventMove(e,$0v,$1a,$1i,external,ev?ev.ctrlKey:false,ev?ev.shiftKey:false,$0H);break;case 'Notify':$k.eventMoveNotify($n);break;case 'Update':$k.$fy($n);break;};$k.$gt();}};this.$fy=function($n){var e=$n.e;var $0v=$n.newStart;var $1a=$n.newEnd;var $1i=$n.newResource;var external=$n.external;e.start($0v);e.end($1a);e.resource($1i);if(external){e.commit();$k.events.add(e);}else{$k.events.update(e);};if($n.multimove&&!$n.multimove.isEmpty()){$n.multimove.forEach(function($04){if($04.event===e){return;};$04.event.start($04.start);$04.event.end($04.end);$04.event.resource($04.resource);$04.event.commit();$k.events.update($04.event);});};if($n.multiresize&&!$n.multiresize.isEmpty()){$n.multiresize.forEach(function($04){if($04.event===e){return;};$04.event.start($04.start);$04.event.end($04.end);$04.event.commit();$k.events.update($04.event);});};$k.events.immediateRefresh();$k.$dM();};this.$gu=function($n,$p){var $o=$k.$gv($p);var $15={};$15.args=$n;$15.guid=$o;$k.$fg("Bubble",$15);};this.$gv=function($p){var $o=DayPilot.guid();if(!this.bubbles){this.bubbles=[];};this.bubbles[$o]=$p;return $o;};this.eventMenuClickPostBack=function(e,$1z,$s){var $15={};$15.e=e;$15.command=$1z;this.$ff('EventMenuClick',$15,$s);};this.eventMenuClickCallBack=function(e,$1z,$s){var $15={};$15.e=e;$15.command=$1z;this.$fg('EventMenuClick',$15,$s);};this.$gw=function($1z,e,$1A){switch($1A){case 'PostBack':$k.eventMenuClickPostBack(e,$1z);break;case 'CallBack':$k.eventMenuClickCallBack(e,$1z);break;}};this.timeRangeSelectedPostBack=function($O,end,$1B,$s){var $1C={};$1C.start=$O;$1C.end=end;$1C.resource=$1B;this.$ff('TimeRangeSelected',$1C,$s);};this.timeRangeSelectedCallBack=function($O,end,$1B,$s){var $1C={};$1C.start=$O;$1C.end=end;$1C.resource=$1B;this.$fg('TimeRangeSelected',$1C,$s);};this.$gx=function($1C){if(!$1C){return;};if($1C.disabled){$k.clearSelection();return;};if($1C.args){$k.$gy($1C.args.start,$1C.args.end,$1C.args.resource);}else{var $1D=$k.$gz($1C);if(!$1D){return;};$k.$gy($1D.start,$1D.end,$1D.resource);}};this.$gy=function($O,end,$1B){if($k.timeRangeSelectedHandling==='Disabled'){return;};var $1E=end;end=$k.$fx($1E);var $n={};$n.control=$k;$n.start=$O;$n.end=end;$n.resource=$1B;$n.preventDefault=function(){this.preventDefault.value=true;};$n.multirange=DayPilot.list(mr.list).map(function($04){return $k.$gz($04);});if($n.multirange.isEmpty()){$n.multirange.push({"start":$n.start,"end":$n.end,"resource":$n.resource});};$n.toJSON=function(){return DayPilot.Util.copyProps($n,{},["start","end","resource","multirange"]);};if($k.$ek()){if(typeof $k.onTimeRangeSelect==='function'){$k.onTimeRangeSelect($n);if($n.preventDefault.value){return;};$O=$n.start;end=$n.end;};end=$k.$gp(end);$k.$gA($k.rangeHold,$O,end,$n.multirange);$k.$gB($k.rangeHold);switch($k.timeRangeSelectedHandling){case 'PostBack':$k.$fA("PostBack",$n);break;case 'CallBack':$k.$fA("CallBack",$n);break;};if(typeof $k.onTimeRangeSelected==='function'){$k.onTimeRangeSelected($n);}}else{switch($k.timeRangeSelectedHandling){case 'PostBack':$k.$fA("PostBack",$n);break;case 'CallBack':$k.$fA("CallBack",$n);break;case 'JavaScript':$k.onTimeRangeSelected($O,end,$1B,$n.multirange);break;case 'Hold':break;}}};this.$gA=function($1C,$O,end,$1F){if(!$1C||($1F&&$1F.length>1)){return;};var $1E=end;var $0S,$T;var $1G=0;if($k.viewType==="Days"){var $A=$k.$ep($O);$1G=$A.start.getTime()-$k.$eZ().getTime();};if($O.getTime()<$k.itline[0].start.getTime()){$1C.start.x=0;$1C.start.time=$k.itline[0].start.getTime();}else{$0S=$k.$fb($O.addTime(-$1G));$T=$0S.current||$0S.previous;$1C.start.x=DayPilot.indexOf($k.itline,$T);$1C.start.time=$O;};$0S=$k.$fb($1E.addMilliseconds(-1).addTime(-$1G));if($0S.past){$1C.end.x=$k.itline.length-1;$1C.end.time=$k.itline[$k.itline.length-1].end.getTime();}else{$T=$0S.current||$0S.next;$1C.end.x=DayPilot.indexOf($k.itline,$T);$1C.end.time=end;}};this.$ep=function($O){var $0t=$O.getDatePart();return DayPilot.list($k.rowlist).find(function($04){return $04.start.getDatePart()===$0t;});};this.timeRangeDoubleClickPostBack=function($O,end,$1B,$s){var $1C={};$1C.start=$O;$1C.end=end;$1C.resource=$1B;this.$ff('TimeRangeDoubleClick',$1C,$s);};this.timeRangeDoubleClickCallBack=function($O,end,$1B,$s){var $1C={};$1C.start=$O;$1C.end=end;$1C.resource=$1B;this.$fg('TimeRangeDoubleClick',$1C,$s);};this.$gC=function($O,end,$1B){end=$k.$fx(end);if($k.$ek()){var $n={};$n.start=$O;$n.end=end;$n.resource=$1B;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onTimeRangeDoubleClick==='function'){$k.onTimeRangeDoubleClick($n);if($n.preventDefault.value){return;}};switch($k.timeRangeDoubleClickHandling){case 'PostBack':$k.timeRangeDoubleClickPostBack($O,end,$1B);break;case 'CallBack':$k.timeRangeDoubleClickCallBack($O,end,$1B);break;};if(typeof $k.onTimeRangeDoubleClicked==='function'){$k.onTimeRangeDoubleClicked($n);}}else{switch($k.timeRangeDoubleClickHandling){case 'PostBack':$k.timeRangeDoubleClickPostBack($O,end,$1B);break;case 'CallBack':$k.timeRangeDoubleClickCallBack($O,end,$1B);break;case 'JavaScript':$k.onTimeRangeDoubleClick($O,end,$1B);break;}}};this.timeRangeMenuClickPostBack=function(e,$1z,$s){var $15={};$15.selection=e;$15.command=$1z;this.$ff("TimeRangeMenuClick",$15,$s);};this.timeRangeMenuClickCallBack=function(e,$1z,$s){var $15={};$15.selection=e;$15.command=$1z;this.$fg("TimeRangeMenuClick",$15,$s);};this.$gD=function($1z,e,$1A){switch($1A){case 'PostBack':$k.timeRangeMenuClickPostBack(e,$1z);break;case 'CallBack':$k.timeRangeMenuClickCallBack(e,$1z);break;}};this.linkMenuClickPostBack=function(e,$1z,$s){var $15={};$15.link=e;$15.command=$1z;this.$ff("LinkMenuClick",$15,$s);};this.linkMenuClickCallBack=function(e,$1z,$s){var $15={};$15.link=e;$15.command=$1z;this.$fg("LinkMenuClick",$15,$s);};this.$gE=function($1z,e,$1A){switch($1A){case 'PostBack':$k.linkMenuClickPostBack(e,$1z);break;case 'CallBack':$k.linkMenuClickCallBack(e,$1z);break;}};this.rowMenuClickPostBack=function(e,$1z,$s){var $15={};$15.resource=e;$15.command=$1z;this.$ff("RowMenuClick",$15,$s);};this.resourceHeaderMenuClickPostBack=this.rowMenuClickPostBack;this.rowMenuClickCallBack=function(e,$1z,$s){var $15={};$15.resource=e;$15.command=$1z;this.$fg("RowMenuClick",$15,$s);};this.resourceHeaderMenuClickCallBack=this.rowMenuClickCallBack;this.$gF=function($1z,e,$1A){switch($1A){case 'PostBack':$k.rowMenuClickPostBack(e,$1z);break;case 'CallBack':$k.rowMenuClickCallBack(e,$1z);break;}};this.$gG=function($1H,$1I){var r=$k.$gH($1H);r.data.name=$1I;if(r.data.html){r.data.html=$1I;};$k.rows.update(r);};this.$gI=function($A,$1I){if(!$1I){return;};var $n={};$n.text=$1I;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onRowCreate==="function"){$k.onRowCreate($n);if($n.preventDefault.value){return;}};switch($k.rowCreateHandling){case "CallBack":$k.rowCreateCallBack($n.text);break;case "PostBack":$k.rowCreatePostBack($n.text);break;};if(typeof $k.onRowCreated==="function"){$k.onRowCreated($n);}};this.$gJ=function($A,$1I,$1J){if($A.isNewRow){if(!$1J){$k.$gI($A,$1I);};return;};var $1n=DayPilot.indexOf($k.rowlist,$A);var e=$k.$gH($A,$1n);if($k.$ek()){var $n={};$n.resource=e;$n.row=e;$n.newText=$1I;$n.canceled=$1J;$n.preventDefault=function(){this.preventDefault.value=true;};$n.async=false;$n.loaded=function(){$1K();};var $1K=function(){if(!$1J){switch($k.rowEditHandling){case 'PostBack':$k.rowEditPostBack(e,$1I);break;case 'CallBack':$k.rowEditCallBack(e,$1I);break;case 'Update':$k.$gG($A,$1I);break;};if(typeof $k.onRowEdited==='function'){$k.onRowEdited($n);}}};if(typeof $k.onRowEdit==='function'){$k.onRowEdit($n);if($n.preventDefault.value){return;}};if(!$n.async){$1K();}}else{switch($k.rowEditHandling){case 'PostBack':$k.rowEditPostBack(e,$1I);break;case 'CallBack':$k.rowEditCallBack(e,$1I);break;case 'JavaScript':$k.onrowEdit(e,$1I);break;}}};this.rowCreatePostBack=function($1I,$s){var $15={};$15.text=$1I;this.$ff("RowCreate",$15,$s);};this.rowCreateCallBack=function($1I,$s){var $15={};$15.text=$1I;this.$fg("RowCreate",$15,$s);};this.rowEditPostBack=function(e,$1I,$s){var $15={};$15.resource=e;$15.newText=$1I;this.$ff("RowEdit",$15,$s);};this.rowEditCallBack=function(e,$1I,$s){var $15={};$15.resource=e;$15.newText=$1I;this.$fg("RowEdit",$15,$s);};this.rowMovePostBack=function($1L,$1M,$y,$s){var $15={};$15.source=$1L;$15.target=$1M;$15.position=$y;this.$ff("RowMove",$15,$s);};this.rowMoveCallBack=function($1L,$1M,$y,$s){var $15={};$15.source=$1L;$15.target=$1M;$15.position=$y;this.$fg("RowMove",$15,$s);};this.rowMoveNotify=function($1L,$1M,$y,$s){var $15={};$15.source=$1L;$15.target=$1M;$15.position=$y;this.$fg("RowMove",$15,$s,"Notify");};this.rowClickPostBack=function(e,$s){var $15={};$15.resource=e;this.$ff("RowClick",$15,$s);};this.resourceHeaderClickPostBack=this.rowClickPostBack;this.rowClickCallBack=function(e,$s){var $15={};$15.resource=e;this.$fg("RowClick",$15,$s);};this.resourceHeaderClickCallBack=this.rowClickCallBack;this.$gK=function(e,$1p,$1N,$1q){if($k.rowDoubleClickHandling==="Disabled"){$k.$gL(e,$1p,$1N,$1q);return;};if(!$k.timeouts.resClick){$k.timeouts.resClick=[];};var $1O=function(e,$1p,$1N,$1q){return function(){$k.$gL(e,$1p,$1N,$1q);};};$k.timeouts.resClick.push(window.setTimeout($1O(e,$1p,$1N,$1q),$k.doubleClickTimeout));};this.$gL=function(e,$1p,$1N,$1q){var $1P=$k.resourceHeaderClickHandling||$k.rowClickHandling;if($k.$ek()){var $n={};$n.resource=e;$n.row=e;$n.ctrl=$1p;$n.shift=$1N;$n.meta=$1q;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onRowClick==='function'){$k.onRowClick($n);if($n.preventDefault.value){return;}};if(typeof $k.onResourceHeaderClick==='function'){$k.onResourceHeaderClick($n);if($n.preventDefault.value){return;}};switch($1P){case 'PostBack':$k.rowClickPostBack(e);break;case 'CallBack':$k.rowClickCallBack(e);break;case 'Select':$k.$gM(e.$.row,$1p,$1N,$1q);break;case 'Edit':$k.$gN.edit(e.$.row);break;};if(typeof $k.onRowClicked==='function'){$k.onRowClicked($n);};if(typeof $k.onResourceHeaderClicked==='function'){$k.onResourceHeaderClicked($n);}}else{switch($1P){case 'PostBack':$k.rowClickPostBack(e);break;case 'CallBack':$k.rowClickCallBack(e);break;case 'JavaScript':$k.onRowClick(e);break;case 'Select':$k.$gM(e.$.row,$1p,$1N);break;case 'Edit':$k.$gN.edit(e.$.row);break;}}};this.timeHeaderClickPostBack=function(e,$s){var $15={};$15.header=e;this.$ff("TimeHeaderClick",$15,$s);};this.timeHeaderClickCallBack=function(e,$s){var $15={};$15.header=e;this.$fg("TimeHeaderClick",$15,$s);};this.$gO=function(e){if($k.$ek()){var $n={};$n.header=e;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onTimeHeaderClick==='function'){$k.onTimeHeaderClick($n);if($n.preventDefault.value){return;}};switch(this.timeHeaderClickHandling){case 'PostBack':$k.timeHeaderClickPostBack(e);break;case 'CallBack':$k.timeHeaderClickCallBack(e);break;};if(typeof $k.onTimeHeaderClicked==='function'){$k.onTimeHeaderClicked($n);}}else{switch(this.timeHeaderClickHandling){case 'PostBack':$k.timeHeaderClickPostBack(e);break;case 'CallBack':$k.timeHeaderClickCallBack(e);break;case 'JavaScript':$k.onTimeHeaderClick(e);break;}}};this.resourceCollapsePostBack=function(e,$s){var $15={};$15.resource=e;this.$ff("ResourceCollapse",$15,$s);};this.resourceCollapseCallBack=function(e,$s){var $15={};$15.resource=e;this.$fg("ResourceCollapse",$15,$s);};this.$gP=function(e){if($k.$ek()){var $n={};$n.resource=e;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onResourceCollapse==='function'){$k.onResourceCollapse($n);if($n.preventDefault.value){return;}};switch(this.resourceCollapseHandling){case 'PostBack':$k.resourceCollapsePostBack(e);break;case 'CallBack':$k.resourceCollapseCallBack(e);break;}}else{switch(this.resourceCollapseHandling){case 'PostBack':$k.resourceCollapsePostBack(e);break;case 'CallBack':$k.resourceCollapseCallBack(e);break;case 'JavaScript':$k.onResourceCollapse(e);break;}}};this.resourceExpandPostBack=function(e,$s){var $15={};$15.resource=e;this.$ff("ResourceExpand",$15,$s);};this.resourceExpandCallBack=function(e,$s){var $15={};$15.resource=e;this.$fg("ResourceExpand",$15,$s);};this.$gQ=function(e){if($k.$ek()){var $n={};$n.resource=e;$n.row=e;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onResourceExpand==='function'){$k.onResourceExpand($n);if($n.preventDefault.value){return;}};switch(this.resourceExpandHandling){case 'PostBack':$k.resourceExpandPostBack(e);break;case 'CallBack':$k.resourceExpandCallBack(e);break;}}else{switch(this.resourceExpandHandling){case 'PostBack':$k.resourceExpandPostBack(e);break;case 'CallBack':$k.resourceExpandCallBack(e);break;case 'JavaScript':$k.onResourceExpand(e);break;}}};this.eventEditPostBack=function(e,$1I,$s){var $15={};$15.e=e;$15.newText=$1I;this.$ff("EventEdit",$15,$s);};this.eventEditCallBack=function(e,$1I,$s){var $15={};$15.e=e;$15.newText=$1I;this.$fg("EventEdit",$15,$s);};this.eventEditNotify=function(e,$1I,$s,$j){var $1Q=new DayPilot.Event(e.copy(),this);e.text($1I);$k.events.update(e,null,$j);var $15={};$15.e=$1Q;$15.newText=$1I;this.$fg("EventEdit",$15,$s,"Notify");};this.$gR=function(e,$1I,$1J){if($k.$ek()){var $n={};$n.e=e;$n.newText=$1I;$n.canceled=$1J;$n.preventDefault=function(){this.preventDefault.value=true;};$n.async=false;$n.loaded=function(){$1K();};var $1K=function(){$n.loaded=function(){};if(!$1J){switch($k.eventEditHandling){case 'PostBack':$k.eventEditPostBack(e,$1I);break;case 'CallBack':$k.eventEditCallBack(e,$1I);break;case 'Update':e.text(DayPilot.Util.escapeHtml($1I));$k.events.update(e,null,{"inplace":true});break;}};if(typeof $k.onEventEdited==='function'){$k.onEventEdited($n);}};if(typeof $k.onEventEdit==='function'){$k.onEventEdit($n);if($n.preventDefault.value){return;}};if(!$n.async){$1K();}}else{switch($k.eventEditHandling){case 'PostBack':$k.eventEditPostBack(e,$1I);break;case 'CallBack':$k.eventEditCallBack(e,$1I);break;case 'Notify':$k.eventEditNotify(e,$1I,null,{"inplace":true});break;case 'JavaScript':$k.onEventEdit(e,$1I);break;}}};this.commandCallBack=function($1z,$s){this.$gS("CallBack",$1z,$s);};this.commandPostBack=function($1z,$s){this.$gS("PostBack",$1z,$s);};this.$gS=function($01,$1z,$s){var $15={};$15.command=$1z;this.$fv($01,"Command",$15,$s);};this.$ff=function($1k,$1R,$s){var $1S={};$1S.action=$1k;$1S.type="PostBack";$1S.parameters=$1R;$1S.data=$s;$1S.header=this.$gT();var $1T="JSON"+JSON.stringify($1S);__doPostBack($k.uniqueID,$1T);};this.$fg=function($1k,$1R,$s,$01){if(!$k.$eS()){$k.debug.message("Callback invoked without the server-side backend specified. Callback canceled.","warning");return;};if(typeof $01==='undefined'){$01="CallBack";};this.$gU();$k.$gV({"delay":100});var $1S={};$1S.action=$1k;$1S.type=$01;$1S.parameters=$1R;$1S.data=$s;$1S.header=this.$gT();var $1U=JSON.stringify($1S);var $1T;if(typeof Iuppiter!=='undefined'&&Iuppiter.compress){$1T="LZJB"+Iuppiter.Base64.encode(Iuppiter.compress($1U));}else{$1T="JSON"+$1U;};this.$gW($1S);var $m=null;if(this.backendUrl){DayPilot.request(this.backendUrl,this.$gX,$1T,this.$gY);}else if(typeof WebForm_DoCallback==='function'){WebForm_DoCallback(this.uniqueID,$1T,this.$dL,$m,this.callbackError,true);}};this.$gW=function($1S){var $n={};if(typeof $k.onCallBackStart==='function'){$k.onCallBackStart($n);}};this.$dQ=function(){var $n={};if(typeof $k.onCallBackEnd==='function'){setTimeout(function(){$k.onCallBackEnd($n);},0);}};this.$eS=function(){return($k.$dK!=="javasc"&&$k.$dK.indexOf("DCODE")===-1)||$k.devsb;};this.$gZ=function(){if(typeof WebForm_DoCallback==='function'&&this.uniqueID){return true;};return false;};this.$gY=function($1V){if(typeof $k.onAjaxError==='function'){var $n={};$n.request=$1V;$k.onAjaxError($n);}else if(typeof $k.ajaxError==='function'){$k.ajaxError($1V);}};this.$gX=function($1W){$k.$dL($1W.responseText);};this.callbackProps=[];this.$gT=function(){var h={};h.v=this.v;h.control="dps";h.id=this.id;h.startDate=$k.startDate;h.days=$k.days;h.cellDuration=$k.cellDuration;h.cellGroupBy=$k.cellGroupBy;h.cellWidth=$k.cellWidth;h.cellWidthSpec=$k.cellWidthSpec;h.viewType=$k.viewType;h.showNonBusiness=$k.showNonBusiness;h.businessBeginsHour=$k.businessBeginsHour;h.businessEndsHour=$k.businessEndsHour;h.weekStarts=$k.weekStarts;h.treeEnabled=$k.treeEnabled;h.locale=$k.locale;h.timeZone=$k.timeZone;h.tagFields=$k.tagFields;h.timeHeaders=$k.timeHeaders;h.cssClassPrefix=$k.cssClassPrefix;h.durationBarMode=$k.durationBarMode;h.rowHeaderColumns=$k.rowHeaderColumns;h.rowMarginBottom=$k.rowMarginBottom;h.rowMarginTop=$k.rowMarginTop;h.rowMinHeight=$k.rowMinHeight;h.scale=$k.scale;h.clientState=$k.clientState;if(this.nav.scroll){h.scrollX=DayPilot.Util.atLeast(0,this.nav.scroll.scrollLeft);h.scrollY=DayPilot.Util.atLeast(0,this.nav.scroll.scrollTop);};h.selected=$k.multiselect.events();h.selectedRows=$1X.$h0();h.hashes=$k.hashes;var $N=$k.$h1(h.scrollX,h.scrollY);if($N){var $1C=$k.$h2($N);var $1Y=$k.$h3($N);h.rangeStart=$1C.start;h.rangeEnd=$1C.end;h.resources=$1Y;}else{h.rangeStart=$k.startDate;h.rangeEnd=$k.startDate;h.resources=[];};h.dynamicLoading=$k.dynamicLoading;h.separators=this.separators;if(this.syncResourceTree&&this.viewType!="Days"){h.tree=this.$h4();};if(this.syncLinks){h.links=this.$h5();};if(this.scale==="Manual"){h.timeline=this.$h6();};if(typeof $k.onCallBackHeader==="function"){var $n={};$n.header=h;$k.onCallBackHeader($n);};var $0a=$k.callbackProps;if(DayPilot.isArray($0a)){h.props={};$0a.forEach(function(name){h.props[name]=$k[name];});};return h;};this.$h6=function(){var $02=[];DayPilot.list($k.timeline).forEach(function($04){var $1U={};$1U.start=$04.start;$1U.end=$04.end;$1U.width=$04.width;$02.push($1U);});return $02;};this.$h5=function(){var $02=[];var $1Z=function(link){var $l={};if(link.tags){for(var name in link.tags){$l[name]=""+link.tags[name];}};return $l;};if(!DayPilot.isArray($k.links.list)){return $02;};for(var i=0;i<$k.links.list.length;i++){var link=$k.links.list[i];var $1U={};$1U.id=link.id;$1U.from=link.from;$1U.to=link.to;$1U.type=link.type;$1U.tags=$1Z(link);$02.push($1U);};return $02;};this.getViewPort=function(){var scrollX=this.nav.scroll.scrollLeft-$P.shiftX;var scrollY=this.nav.scroll.scrollTop;var $U={};if($k.viewType!=="Days"){var $N=$k.$h1(scrollX,scrollY);var $1C=$k.$h2($N);var $1Y=$k.$h3($N);var $20=$k.itline[$N.start.x];var $21=$k.itline[$N.end.x];$U.start=$k.getDate(scrollX,true);$U.end=$k.getDate(scrollX+$k.nav.scroll.clientWidth,true,true);$U.resources=$1Y;if($20){$U.topLeft={"start":$20.start,"end":$20.end,x:$N.start.x,y:$N.start.y,"resource":$1Y[0]};};if($21){$U.bottomRight={"start":$21.start,"end":$21.end,x:$N.end.x,y:$N.end.y,"resource":$1Y[$1Y.length-1]};}}else{var $N=$k.$h1(scrollX,scrollY);var $1C=$k.$h7($N);$U.start=$1C.start;$U.end=$1C.end;$U.resources=[];};$U.rows=function(){return $U.resources.map(function(r){return $k.rows.find(r)});};$U.events=function(){if($k.viewType==="Days"){return $k.events.forRange($U.start,$U.end);};var $03=[];$U.rows().forEach(function(r){$03=$03.concat(r.events.forRange($U.start,$U.end));});return $03;};return $U;};this.$h1=function(scrollX,scrollY){var $N={};$N.start={};$N.end={};var $O=$k.$f9(scrollX);var end=$k.$f9(scrollX+$k.nav.scroll.clientWidth);if($O){$N.start.x=$O.x;};if(end){$N.end.x=end.x;};$N.start.y=$k.$h8(scrollY).i;$N.end.y=$k.$h8(scrollY+$k.nav.scroll.clientHeight).i;$N.start.x=DayPilot.Util.atLeast($N.start.x,0);var $22=this.itline.length;if($N.end.x>=$22){$N.end.x=$22-1;};return $N;};this.$h9=function(){var scrollX=this.nav.scroll.scrollLeft-$P.shiftX;var scrollY=this.nav.scroll.scrollTop;return $k.$h1(scrollX,scrollY);};this.$h2=function($N){var $l={};if(this.itline.length<=0){$l.start=this.startDate;$l.end=this.startDate;return $l;};if(!this.itline[$N.start.x]){throw 'Internal error: area.start.x is null.';};$l.start=this.itline[$N.start.x].start;$l.end=this.itline[$N.end.x].end;return $l;};this.$h3=function($N){if(!$N){var $N=this.$h1(this.nav.scroll.scrollLeft,this.nav.scroll.scrollTop);};var $1Y=[];$1Y.ignoreToJSON=true;for(var i=$N.start.y;i<=$N.end.y;i++){var r=$k.rowlist[i];if(r&&!r.hidden){$1Y.push(r.id);}};return $1Y;};this.$h7=function($N){if(!$N){var $N=this.$h1(this.nav.scroll.scrollLeft,this.nav.scroll.scrollTop);};var $1Y={};if($k.rowlist.length===0){return $1Y;};var $23=$k.itline[$k.itline.length-1].end.getTime()-$k.itline[0].start.getTime();$1Y.start=$k.rowlist[$N.start.y]&&$k.rowlist[$N.start.y].start;$1Y.end=$k.rowlist[$N.end.y]&&$k.rowlist[$N.end.y].start.addTime($23);return $1Y;};this.$h4=function(){var $24=[];$24.ignoreToJSON=true;for(var i=0;i<this.rowlist.length;i++){var $A=this.rowlist[i];if($A.level>0){continue;};if($A.isNewRow){continue;};var $25=this.$ha(i);$24.push($25);};return $24;};this.$hb=function($26){var $27=[];$27.ignoreToJSON=true;for(var i=0;i<$26.length;i++){var $1n=$26[i];var $A=$k.rowlist[$1n];if($A.isNewRow){continue;};$27.push($k.$ha($1n));};return $27;};this.$ha=function(i){var $A=this.rowlist[i];if(typeof $k.onGetNodeState==="function"){var $n={};$n.row=$A;$n.preventDefault=function(){$n.preventDefault.value=true;};$n.result={};$k.onGetNodeState($n);if($n.preventDefault.value){return $n.result;}};var $25={};$25.Value=$A.id;$25.BackColor=$A.backColor;$25.Name=$A.name;$25.InnerHTML=$A.html;$25.ToolTip=$A.toolTip;$25.Expanded=$A.expanded;$25.Children=this.$hb($A.children);$25.Loaded=$A.loaded;$25.IsParent=$A.isParent;$25.Columns=this.$hc($A);if($A.start.getTime()!==$k.$eZ().getTime()){$25.Start=$A.start;};if($A.minHeight!==$k.rowMinHeight){$25.MinHeight=$A.minHeight;};if($A.marginBottom!==$k.rowMarginBottom){$25.MarginBottom=$A.marginBottom;};if($A.marginTop!==$k.rowMarginTop){$25.MarginTop=$A.marginTop;};if($A.eventHeight!==$k.eventHeight){$25.EventHeight=$A.eventHeight;};return $25;};this.$hc=function($A){if(!$A.columns||$A.columns.length===0){return null;};var $28=[];$28.ignoreToJSON=true;for(var i=0;i<$A.columns.length;i++){var c={};c.InnerHTML=$A.columns[i].html;$28.push(c);};return $28;};this.$eC=function($29){var $2a=this.theme||this.cssClassPrefix;if($2a){return $2a+$29;}else{return "";}};this.$ga=function(){var $2b=$k.nav.top.className!==$k.$eC("_main");if(!$2b){return;};$k.nav.top.className=$k.$eC("_main");$k.nav.dh1.className=$k.$eC("_divider_horizontal");$k.nav.dh2.className=$k.$eC("_divider_horizontal");$k.divResScroll.className=$k.$eC("_rowheader_scroll");$k.nav.divider.className=$k.$eC("_divider")+" "+$k.$eC("_splitter");$k.nav.scroll.className=$k.$eC("_scrollable");$k.$eq.className=$k.$eC("_matrix")+" "+$k.$eC("_grid_main");$k.nav.loading.className=$k.$eC("_loading");};this.$hd=function(){this.nav.top.dispose=this.dispose;this.nav.limit;};this.dispose=function(){var c=$k;if(!c.$he){return;};if(c.$dF){return;};c.$dF=true;c.$gU();clearInterval(c.$hf);clearInterval(c.$hg);for(var name in c.timeouts){var $04=c.timeouts[name];if(DayPilot.isArray($04)){DayPilot.list($04).forEach(function(t){clearTimeout(t);});}else{clearTimeout($04);}};c.$e8();c.$hh();c.$hi();c.$hj();c.divBreaks=null;c.divCells=null;c.divCorner=null;c.divCrosshair=null;c.divEvents=null;if(c.divHeader){c.divHeader.rows=null;};c.divHeader=null;c.divLines=null;c.divNorth=null;c.divRange=null;c.divResScroll=null;c.divSeparators=null;c.divSeparatorsAbove=null;c.divStretch=null;c.divTimeScroll=null;c.$eP=null;c.$dS=null;c.$eq.calendar=null;c.$eq=null;c.nav.loading=null;c.nav.top.onmousemove=null;c.nav.top.onmouseout=null;c.nav.top.dispose=null;c.nav.top.ontouchstart=null;c.nav.top.ontouchmove=null;c.nav.top.ontouchend=null;c.nav.top.removeAttribute('style');c.nav.top.removeAttribute('class');var $2c=!($k.$hk.reactDOM&&DayPilot.browser.ie);if($2c){c.nav.top.innerHTML="";};c.nav.top.dp=null;c.nav.top=null;c.nav.scroll.onscroll=null;c.nav.scroll.root=null;c.nav.scroll=null;clearTimeout(c.refreshTimeout);if(c.$hl){c.$hl.dispose();c.$hl=null;};if(c.daypilot){delete c.daypilot;};DayPilot.ue(window,'resize',c.$hm);DayPilotScheduler.unregister(c);$2d=null;(function clearProps(){return;for(var name in c){c[name]=null;}})();};this.$hi=function(){if(typeof $k.onBeforeRowHeaderDomAdd!=="function"&&typeof $k.onBeforeRowHeaderDomRemove!=="function"){return;};var $2e=typeof $k.onBeforeRowHeaderDomAdd==="function"&&$k.$hk.reactDOM;if($2e||typeof $k.onBeforeRowHeaderDomRemove==="function"){for(var i=0;i<$k.rowlist.length;i++){if($k.divHeader.rows[i]){$k.$hn(i);}}}};this.$hj=function(){if(typeof $k.onBeforeTimeHeaderDomAdd!=="function"&&typeof $k.onBeforeTimeHeaderDomRemove!=="function"){return;};$k.elements.timeHeader.forEach(function($06){var $2f=$06.domArgs;$06.domArgs=null;if(typeof $k.onBeforeTimeHeaderDomRemove==="function"){$k.onBeforeTimeHeaderDomRemove($2f);};if(typeof $k.onBeforeTimeHeaderDomAdd==="function"&&$k.$hk.reactDOM){var $1M=$2f&&$2f.$ho;if($1M){var $2g=DayPilot.Util.isReactComponent($2f.element);if($2g){if(!$k.$hk.reactDOM){throw new DayPilot.Exception("Can't reach ReactDOM");};$k.$hk.reactDOM.unmountComponentAtNode($1M);}}}});};this.$hp=function($2h){var event=null;if($2h.nodeType){event=$2h.event;}else{event=$2h;};var ev=event;var $2i=(ev.cache&&typeof ev.cache.moveVDisabled!=='undefined')?!ev.cache.moveVDisabled:!ev.data.moveVDisabled;var $2j=(ev.cache&&typeof ev.cache.moveHDisabled!=='undefined')?!ev.cache.moveHDisabled:!ev.data.moveHDisabled;var $2k=$k.$hq(event);var $2l=$k.$hr[$2k.grid];if(!$2i&&DayPilotScheduler.moving){$2l=$k.$hr[event.part.grid];};var $2m=$2l.rowlist;if($k.$hs($2k.rowIndex,$2k.grid)){return null;};var $V=event.part.height||$k.$g8.eventHeight();var top=(event.part&&event.part.top&&$2m[event.part.dayIndex])?(event.part.top+$2m[event.part.dayIndex].top):$2k.top;var $R=$2k.left;var $D=$2k.width;if(!$2i&&DayPilotScheduler.moving){top=$2m[ev.part.dayIndex].top;};if(!$2j&&DayPilotScheduler.moving){$R=event.part.left;if(typeof $R==="undefined"){var $0Y=DayPilot.DateUtil.diff(event.start(),event.end());$0Y=DayPilot.Util.atLeast($0Y,1);$R=$0g.useBox($0Y)?$k.getPixels(event.start()).boxLeft:$k.getPixels(event.start()).left;var $S=$0g.useBox($0Y)?$k.getPixels(event.end()).boxRight:$k.getPixels(event.end()).left;$D=$S-$R;}};var $2n=document.createElement('div');$2n.setAttribute('unselectable','on');$2n.style.position='absolute';$2n.style.width=$D+'px';$2n.style.height=$V+'px';$2n.style.left=$R+'px';$2n.style.top=top+'px';$2n.style.overflow='hidden';var $09=document.createElement("div");$2n.appendChild($09);$2n.className=this.$eC("_shadow");$09.className=this.$eC("_shadow_inner");$2l.divShadow.appendChild($2n);$2n.calendar=$k;$2n.grid=$2k.grid;return $2n;};this.$h8=function(y,$2o){$2o=$2o||"main";var $2l=$k.$hr[$2o];var $2m=$2l.rowlist;var $l={};var element;var top=0;var $2p=0;if($2o==="main"){top=$k.$hr.top.height;$2p=top;};var $2q=$2m.length;for(var i=0;i<$2q;i++){var $A=$2m[i];if($A.hidden){continue;};$2p+=$A.height;top=$2p-$A.height;element=$A;$l.top=top;$l.bottom=$2p;$l.i=i;$l.element=element;$l.grid=$2o;if(y<$2p){break;}};return $l;};this.links={};this.links.list=[];this.links.add=function(link){if(!link){return;};var $s=link;if(link instanceof DayPilot.Link){$s=link.data;};$k.links.list.push(link);$1u.load();};this.links.remove=function(link){var $0a=link.data;if(!link.isLink){$0a=link;};$1u.remove($0a);};this.links.find=function(id){if(!DayPilot.isArray($k.links.list)){return null;};var $s=$k.link.list.find(function($04){return $04.id===id;});if($s){return new DayPilot.Link($s,$k);};return null;};this.links.findByFromTo=function($0U,to){if(!DayPilot.isArray($k.links.list)){return null;};var $s=$k.link.list.find(function($04){return $04.from===$0U&&$04.to===to;});if($s){return new DayPilot.Link($s,$k);};return null;};this.links.load=function($2r,$2s,$2t,$j){if(!$2r){throw new DayPilot.Exception("links.load(): 'url' parameter required");};$j=$j||{};var $2u=function($n){var $2v={};$2v.exception=$n.exception;$2v.request=$n.request;if(typeof $2t==='function'){$2t($2v);}};var $2w=function($n){var r=$n.request;var $s;try{$s=JSON.parse(r.responseText);}catch(e){var $2x={};$2x.exception=e;$2u($2x);return;};if(DayPilot.isArray($s)){var $2y={};$2y.preventDefault=function(){this.preventDefault.value=true;};$2y.data=$s;if(typeof $2s==="function"){$2s($2y);};if($2y.preventDefault.value){return;};$k.links.list=$s;if($k.$en){$k.update();}}};var $2z=$k.linksLoadMethod&&$k.linksLoadMethod.toUpperCase()==="POST";if($2z){DayPilot.ajax({"method":"POST","contentType":"application/json","data":{"start":$k.visibleStart().toString(),"end":$k.visibleEnd().toString()},"url":$2r,"success":$2w,"error":$2u});}else{var $2A=$2r;if(!$j.dontAddStartEnd){var $2B="start="+$k.visibleStart().toString()+"&end="+$k.visibleEnd().toString();if($2A.indexOf("?")>-1){$2A+="&"+$2B;}else{$2A+="?"+$2B;}};DayPilot.ajax({"method":"GET","url":$2A,"success":$2w,"error":$2u});}};var $1u={};this.$ht=$1u;$1u.items=[];$1u.clear=function(){$k.divLinksAbove.innerHTML='';$k.divLinksBelow.innerHTML='';$k.elements.links=[];$1u.items=[];};$1u.remove=function($0a){var $04=$1u.findItem($0a);DayPilot.rfa($k.links.list,$0a);if(!$04){return;};$04.clear();DayPilot.rfa($1u.items,$04);};$1u.findItem=function($0a){for(var i=0;i<$1u.items.length;i++){var $04=$1u.items[i];if($04.props===$0a){return $04;}};return null;};$1u.showLinkpoints=function(){var $03=$U.events();$03.forEach(function($06){$1u.showLinkpoint($06);});};$1u.showLinkpoint=function($06){var $D=$k.linkPointSize;var $2C=$D/2;var $R=$06.event.part.left;var top=$k.rowlist[$06.event.part.dayIndex].top+$06.event.part.top;var $V=$06.event.part.height;var $S=$06.event.part.right;var $O=DayPilot.Util.div($k.divLinkpoints,$R-$2C,top-$2C+$V/2,$D,$D);$O.className=$k.$eC("_linkpoint");$O.style.boxSizing="border-box";$O.coords={x:$R,y:top+$V/2};$O.type="Start";$O.event=$06.event;$1u.activateLinkpoint($O);$k.elements.linkpoints.push($O);var end=DayPilot.Util.div($k.divLinkpoints,$S-$2C,top-$2C+$V/2,$D,$D);end.className=$k.$eC("_linkpoint");end.style.boxSizing="border-box";end.coords={x:$S,y:top+$V/2};end.type="Finish";end.event=$06.event;$1u.activateLinkpoint(end);$k.elements.linkpoints.push(end);};$1u.activateLinkpoint=function($06){$06.onmousedown=function(ev){var ev=ev||window.event;$2D.source=$06;$2D.calendar=$k;$1u.showLinkpoints();ev.preventDefault&&ev.preventDefault();ev.stopPropagation&&ev.stopPropagation();return false;};$06.onmousemove=function(ev){DayPilot.Util.addClass($06,$k.$eC("_linkpoint_hover"));$1u.clearHideTimeout();};$06.onmouseout=function(ev){if(!$2D.source||$2D.source.event!==$06.event){DayPilot.Util.removeClass($06,$k.$eC("_linkpoint_hover"));}};$06.onmouseup=function(ev){if($2D.source){var $01=$2D.source.type+"To"+$06.type;var $0U=$2D.source.event.id();var to=$06.event.id();var $n={};$n.from=$0U;$n.to=to;$n.type=$01;$n.id=null;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onLinkCreate==="function"){$k.onLinkCreate($n);if($n.preventDefault.value){return;}};var $2E=function(){if(!DayPilot.isArray($k.links.list)){$k.links.list=[];};$k.links.list.push({"from":$0U,"to":to,"type":$01,"id":$n.id});$1u.load();};switch($k.linkCreateHandling){case "Update":$2E();break;case "CallBack":$k.$hu($n);break;case "PostBack":$k.$hv($n);break;case "Notify":$2E();$k.$hw($n);break;};if(typeof $k.onLinkCreated==="function"){$k.onLinkCreated($n);}}};};$1u.hideLinkpoints=function(){$k.divLinkpoints.innerHTML='';$k.elements.linkpoints=[];};$1u.hideTimeout=null;$1u.hideLinkpointsWithDelay=function(){$1u.hideTimeout=setTimeout(function(){$1u.hideLinkpoints();},100);};$1u.clearHideTimeout=function(){if($1u.hideTimeout){clearTimeout($1u.hideTimeout);$1u.hideTimeout=null;}};$1u.load=function(){$1u.clear();if(!DayPilot.isArray($k.links.list)){return;};for(var i=0;i<$k.links.list.length;i++){var link=$k.links.list[i];$1u.drawLinkId(link.from,link.to,link);}};$1u.drawLinkId=function($0U,to,$0a){var $2F=$k.events.find($0U);var $O=$k.events.$hx($2F&&$2F.data);var $2G=$k.events.find(to);var end=$k.events.$hx($2G&&$2G.data);$1u.drawLink2($O,end,$0a);};$1u.getEventRect=function($2H,$2I){var $2J=$2H&&$2H.tagName&&$2H.tagName.toLowerCase()==="div";if($2J){var $06=$2H;return{"top":$06.offsetTop,"right":$06.offsetLeft+$06.offsetWidth,"left":$06.offsetLeft,"height":$06.offsetHeight};}else if($2H instanceof DayPilot.Event){var e=$2H;var $A=$k.rowlist[e.part.dayIndex];var $2K=$2I?$A.absTop:$A.top;return{"top":$2K+(e.part.top||0),"right":e.part.left+e.part.width,"left":e.part.left,"height":e.part.height};}else{return null;}};$1u.drawLink2=function($0U,to,$0a){var $2L=$1u.getSegments($0U,to,$0a);if(!$2L){return null;};var $04=$1u.drawLinkSegments($2L,$0a);if(!$04){return null;};$1u.items.push($04);return $04;};$1u.drawLinkSegments=function($2L,$0a){if(!$2L){return null;};var $l={"divs":[],"props":$0a,"clear":function(){var link=this;DayPilot.de(link.divs);link.divs.forEach(function($06){DayPilot.rfa($k.elements.links,$06);});}};var $2M=$k.eventHeight/2;var $D=$0a.width||1;var $2N=$0a.color;var style=$0a.style;var $2O=$0a.layer||"Above";var $2P=$2O==="Above";var $2Q=$2P?$k.divLinksAbove:$k.divLinksBelow;var $2R=function($06,$2S){if($2N){$06.style["border"+$2S+"Color"]=$2N;};if(style){$06.style["border"+$2S+"Style"]=style;}};var $2T=[];var $2U=function($06,$2V){$k.elements.links.push($06);$2W($06);$2X($06);$2Y($06);$06.divs=$2T;if(!$2V){$2T.push($06);};$l.divs.push($06);};var $2X=function($06){$06.onmousedown=function(ev){ev.cancelBubble=true;};$06.oncontextmenu=function(ev){ev=ev||window.event;if($k.contextMenuLink){var link=new DayPilot.Link($0a,$k);$k.contextMenuLink.show(link);};ev.cancelBubble=true;ev.preventDefault?ev.preventDefault():null;};};var $2W=function($06){$06.onmouseenter=function(){DayPilot.Util.addClass($06.divs,$k.$eC("_link_hover"));if($k.linkBubble){$k.linkBubble.showLink(new DayPilot.Link($0a,$k));}};$06.onmouseleave=function(){DayPilot.Util.removeClass($06.divs,$k.$eC("_link_hover"));if($k.linkBubble){$k.linkBubble.hideOnMouseOut();}};};var $2Y=function($06){$06.onclick=function(ev){var $n={};$n.link=$0a;if(typeof $k.onLinkClick==="function"){$k.onLinkClick($n);};if(typeof $k.onLinkClicked==="function"){$k.onLinkClicked($n);}};};$2L.forEach(function(s){switch(s.type){case "Dot":var w=10;var a;if($2N){a=DayPilot.Util.div($2Q,s.endX-w/2, s.endY - w/2,w,w);a.style.borderRadius=w+"px";a.style.backgroundColor=$2N;}else{a=DayPilot.Util.div($2Q,s.endX-w/2, s.endY - w/2,w,w);a.className=$k.$eC("_link_dot");DayPilot.Util.addClass(a,$0a.cssClass);};$2U(a,true);break;case "HorizontalLine":var h1=DayPilot.Util.div($2Q,s.startX,s.startY,s.endX-s.startX,$D);h1.style.boxSizing="border-box";h1.style.borderBottomWidth=$D+"px";h1.className=$k.$eC("_link_horizontal");DayPilot.Util.addClass(h1,$0a.cssClass);$2R(h1,"Bottom");$2U(h1);break;case "VerticalLine":var v1=DayPilot.Util.div($2Q,s.startX,s.startY,$D,s.endY-s.startY);v1.style.boxSizing="border-box";v1.style.borderRightWidth=$D+"px";v1.className=$k.$eC("_link_vertical");DayPilot.Util.addClass(v1,$0a.cssClass);$2R(v1,"Right");$2U(v1);break;case "ArrowUp":var a;if($2N){a=DayPilot.Util.div($2Q,s.endX-5+Math.floor($D/2),s.endY-5,0,0);a.style.borderColor="transparent transparent "+$2N+" transparent";a.style.borderStyle="solid";a.style.borderWidth="5px";}else{a=DayPilot.Util.div($2Q,s.endX-6+Math.floor($D/2),s.endY-6,6,6);a.className=$k.$eC("_link_arrow_up");DayPilot.Util.addClass(a,$0a.cssClass);};$2U(a,true);break;case "ArrowDown":var a;if($2N){a=DayPilot.Util.div($2Q,s.endX-5+Math.floor($D/2),s.endY-5,0,0);a.style.borderColor=$2N+" transparent transparent transparent";a.style.borderStyle="solid";a.style.borderWidth="5px";}else{a=DayPilot.Util.div($2Q,s.endX-5+Math.floor($D/2),s.endY-6,6,6);a.className=$k.$eC("_link_arrow_down");DayPilot.Util.addClass(a,$0a.cssClass);};$2U(a,true);break;case "ArrowRight":var a;if($2N){a=DayPilot.Util.div($2Q,s.endX-6,s.endY-5,0,0);a.style.borderWidth="6px";a.style.borderColor="transparent transparent transparent "+$2N;a.style.borderStyle="solid";}else{a=DayPilot.Util.div($2Q,s.endX-6,s.endY-5,6,6);a.className=$k.$eC("_link_arrow_right");DayPilot.Util.addClass(a,$0a.cssClass);};$2U(a,true);break;case "ArrowLeft":var a;if($2N){a=DayPilot.Util.div($2Q,s.endX-6,s.endY-5,0,0);a.style.borderColor="transparent "+$2N+" transparent transparent";a.style.borderStyle="solid";a.style.borderWidth="6px";}else{a=DayPilot.Util.div($2Q,s.endX-6,s.endY-5,6,6);a.className=$k.$eC("_link_arrow_left");DayPilot.Util.addClass(a,$0a.cssClass);};$2U(a,true);break;default:throw new DayPilot.Exception("Invalid segment type");}});return $l;};$1u.getSegments=function($0U,to,$0a,$2I){var $2Z=$1u.getEventRect($0U,$2I);var $30=$1u.getEventRect(to,$2I);if(!$2Z){return null;};if(!$30){return null;};var $01=$0a.type||"FinishToStart";var $D=$0a.width||1;var $V=$k.eventHeight;var $00=$k.linkBottomMargin;var $2M=$k.eventHeight/2;var $O,end;switch($01){case "FinishToStart":$O={x:$2Z.right,y:$2Z.top};end={x:$30.left,y:$30.top};if($O.y>end.y){if($30.top+$30.height>$2Z.top){end.y=$O.y;}else if($O.x<=end.x){end.y+=$30.height;end.bottom=true;}};break;case "StartToFinish":$O={x:$2Z.left,y:$2Z.top};end={x:$30.right,y:$30.top};break;case "StartToStart":$O={x:$2Z.left,y:$2Z.top};end={x:$30.left,y:$30.top};break;case "FinishToFinish":$O={x:$2Z.right,y:$2Z.top};end={x:$30.right,y:$30.top};break;};var $2L=[];if($01==="FinishToStart"){if($O.y===end.y&&$O.x===end.x&&!end.bottom){var $31=$O.x;var $32=$O.y+$V-$00;$2L.push({"type":"Dot","startX":$31,"startY":$32,"endX":$31,"endY":$32});}else if($O.y>end.y||($O.y==end.y&&end.bottom)){if($O.x<=end.x){var $33=$O.x;var $34=$O.y+$V-$00;var $31=end.x+$2M;var $32=end.y;$2L.push({"type":"HorizontalLine","startX":$33,"startY":$34,"endX":$31,"endY":$34});$2L.push({"type":"VerticalLine","startX":$31,"startY":$34,"endX":$31,"endY":$32});$2L.push({"type":$O.y<end.y?"ArrowDown":"ArrowUp","startX":$31,"startY":$32,"endX":$31,"endY":$32});}else{var $35=5;var $36=end.y+$V+$35;$2L.push({"type":"HorizontalLine","startX":$O.x,"startY":$O.y+$V-$00,"endX":$O.x+$2M+$D,"endY":$O.y+$V-$00});$2L.push({"type":"VerticalLine","startX":$O.x+$2M,"startY":$O.y+$V-$00,"endX":$O.x+$2M,"endY":$36});$2L.push({"type":"HorizontalLine","startX":end.x-$2M,"startY":$36,"endX":$O.x+$2M+$D,"endY":$36});$2L.push({"type":"VerticalLine","startX":end.x-$2M,"startY":$36,"endX":end.x-$2M,"endY":end.y+$V-$00});$2L.push({"type":"HorizontalLine","startX":end.x-$2M,"startY":end.y+$V-$00,"endX":end.x-$2M+$2M,"endY":end.y+$V-$00});$2L.push({"type":"ArrowRight","startX":end.x,"startY":end.y+$V-$00,"endX":end.x,"endY":end.y+$V-$00});}}else if($O.y===end.y){if($O.x<end.x){var $33=$O.x;var $34=$O.y+$V-$00;var $31=end.x;$2L.push({"type":"HorizontalLine","startX":$33,"startY":$34,"endX":$31,"endY":$34});$2L.push({"type":"ArrowRight","startX":end.x,"startY":end.y+$V-$00,"endX":end.x,"endY":end.y+$V-$00});}else{var $35=5;var $36=end.y+$V+$35;$2L.push({"type":"HorizontalLine","startX":$O.x,"startY":$O.y+$V-$00,"endX":$O.x+$2M+$D,"endY":$O.y+$V-$00});$2L.push({"type":"VerticalLine","startX":$O.x+$2M,"startY":$O.y+$V-$00,"endX":$O.x+$2M,"endY":$36});$2L.push({"type":"HorizontalLine","startX":end.x-$2M,"startY":$36,"endX":$O.x+$2M+$D,"endY":$36});$2L.push({"type":"VerticalLine","startX":end.x-$2M,"startY":$36,"endX":end.x-$2M,"endY":end.y+$V-$00});$2L.push({"type":"HorizontalLine","startX":end.x-$2M,"startY":end.y+$V-$00,"endX":end.x,"endY":end.y+$V-$00});$2L.push({"type":"ArrowRight","startX":end.x,"startY":end.y+$V-$00,"endX":end.x,"endY":end.y+$V-$00});}}else{if($O.x>end.x){var $2P=5;var $36=end.y-$2P;$2L.push({"type":"HorizontalLine","startX":$O.x,"startY":$O.y+$V-$00,"endX":$O.x+$2M,"endY":$O.y+$V-$00});$2L.push({"type":"VerticalLine","startX":$O.x+$2M,"startY":$O.y+$V-$00,"endX":$O.x+$2M,"endY":$36});$2L.push({"type":"HorizontalLine","startX":end.x-$2M,"startY":$36,"endX":$O.x+$2M,"endY":$36});$2L.push({"type":"VerticalLine","startX":end.x-$2M,"startY":$36,"endX":end.x-$2M,"endY":end.y+$V-$00});$2L.push({"type":"HorizontalLine","startX":end.x-$2M,"startY":end.y+$V-$00,"endX":end.x-$2M+$2M,"endY":end.y+$V-$00});$2L.push({"type":"ArrowRight","startX":end.x,"startY":end.y+$V-$00,"endX":end.x,"endY":end.y+$V-$00});}else{var $33=$O.x;var $34=$O.y+$V-$00;var $31=end.x+$2M;var $32=end.y;$2L.push({"type":"HorizontalLine","startX":$33,"startY":$34,"endX":$31,"endY":$34});$2L.push({"type":"VerticalLine","startX":$31,"startY":$34,"endX":$31,"endY":$32});$2L.push({"type":$O.y<end.y?"ArrowDown":"ArrowUp","startX":$31,"startY":$32,"endX":$31,"endY":$32});}}}else if($01==="StartToFinish"){var $2P=5;var $36=end.y-$2P;$2L.push({"type":"HorizontalLine","startX":end.x,"startY":end.y+$V-$00,"endX":end.x+$2M+$D,"endY":end.y+$V-$00});$2L.push({"type":"VerticalLine","startX":end.x+$2M,"startY":end.y+$V-$00,"endX":end.x+$2M,"endY":$36});$2L.push({"type":"HorizontalLine","startX":$O.x-$2M,"startY":$36,"endX":end.x+$2M+$D,"endY":$36});$2L.push({"type":"VerticalLine","startX":$O.x-$2M,"startY":$36,"endX":$O.x-$2M,"endY":$O.y+$V-$00});$2L.push({"type":"HorizontalLine","startX":$O.x-$2M,"startY":$O.y+$V-$00,"endX":$O.x,"endY":$O.y+$V-$00});$2L.push({"type":"ArrowLeft","startX":end.x,"startY":end.y+$V-$00,"endX":end.x,"endY":end.y+$V-$00});}else if($01==="StartToStart"){var nx=Math.min($O.x,end.x)-$2M;$2L.push({"type":"HorizontalLine","startX":nx,"startY":$O.y+$V-$00,"endX":$O.x,"endY":$O.y+$V-$00});$2L.push({"type":"VerticalLine","startX":nx,"startY":$O.y+$V-$00,"endX":nx,"endY":end.y+$V-$00});$2L.push({"type":"HorizontalLine","startX":nx,"startY":end.y+$V-$00,"endX":end.x,"endY":end.y+$V-$00});$2L.push({"type":"ArrowRight","startX":end.x,"startY":end.y+$V-$00,"endX":end.x,"endY":end.y+$V-$00});}else if($01==="FinishToFinish"){var fx=Math.max(end.x,$O.x)+$2M;$2L.push({"type":"HorizontalLine","startX":$O.x,"startY":$O.y+$V-$00,"endX":fx,"endY":$O.y+$V-$00});$2L.push({"type":"VerticalLine","startX":fx,"startY":$O.y+$V-$00,"endX":fx,"endY":$V-$00+end.y});$2L.push({"type":"HorizontalLine","startX":end.x,"startY":end.y+$V-$00,"endX":fx,"endY":end.y+$V-$00});$2L.push({"type":"ArrowLeft","startX":end.x,"startY":end.y+$V-$00,"endX":end.x,"endY":end.y+$V-$00});};return $2L;};$1u.clearShadow=function(){$k.divLinkShadow.innerHTML='';$k.elements.linkshadow=[];};$1u.drawShadow=function($0U,to){$1u.clearShadow();var parent=$k.divLinkShadow;var $0H=DayPilot.line($0U.x,$0U.y,to.x,to.y,{"arrow":true,"cssClass":$k.$eC("_link_shadow")});parent.appendChild($0H);$k.elements.linkshadow.push($0H);};this.$hu=function($n,$s){var $15={};$15.from=$n.from;$15.to=$n.to;$15.type=$n.type;$k.$fg("LinkCreate",$15,$s);};this.$hw=function($n,$s){var $15={};$15.from=$n.from;$15.to=$n.to;$15.type=$n.type;$k.$fg("LinkCreate",$15,$s,"Notify");};this.$hv=function($n,$s){var $15={};$15.from=$n.from;$15.to=$n.to;$15.type=$n.type;$k.$ff("LinkCreate",$15,$s);};this.$hy=function(i){var top=0;var $00=0;var $1n=0;if(i>this.rowlist.length-1){throw "Row index too high (DayPilotScheduler._getRowByIndex)";};for(var j=0;j<=i;j++){var $A=this.rowlist[j];if($A.hidden){continue;};$00+=$A.height;$1n++;};top=$00-$A.height;var $l={};$l.top=top;$l.height=$A.height;$l.bottom=$00;$l.i=$1n-1;$l.data=$A;return $l;};this.$hz=function(){return !!this.backendUrl;};this.events.find=function(id){if(!$k.events.list||typeof $k.events.list.length==='undefined'){return null;};if(typeof id==="function"){return $k.$hA(id);};var $37=$k.events.list.length;for(var i=0;i<$37;i++){if($k.events.list[i].id===id){return new DayPilot.Event($k.events.list[i],$k);}};return null;};this.$hA=function(f){var $37=$k.events.list.length;for(var i=0;i<$37;i++){var e=new DayPilot.Event($k.events.list[i],$k);if(f(e)){return e;}};return null;};this.events.focus=function(e){var $06=$k.$hB(e);$06&&$06.focus();};this.events.scrollIntoView=function(e){var $06=$k.$hB(e);if(!$06){return;};var $1M=e.start();var $U=$k.getViewPort();if(!DayPilot.Util.overlaps($U.start,$U.end,e.start(),e.end())&&DayPilot.Util.overlaps($k.$eZ(),$k.$f4(),e.start(),e.end())){$k.scrollTo($1M,"fast","middle");};var r=e.resource();if($k.getViewPort().resources.indexOf(r)===-1){$k.scrollToResource(r);}};this.events.all=function(){var $02=[];for(var i=0;i<$k.events.list.length;i++){var e=new DayPilot.Event($k.events.list[i],$k);$02.push(e);};return DayPilot.list($02);};this.events.forRange=function($O,end){$O=$O?new DayPilot.Date($O):$k.visibleStart();end=end?new DayPilot.Date(end):$k.visibleEnd();var $02=DayPilot.list();for(var i=0;i<$k.events.list.length;i++){var e=new DayPilot.Event($k.events.list[i],$k);if(DayPilot.Util.overlaps(e.start(),e.end(),$O,end)){$02.push(e);}};return $02;};this.events.filter=function($n,$38){$k.events.$hC=$n;if($38){return;};$k.$fO({"eventsOnly":true});};this.events.edit=function(e){var $06=$k.$fV(e);if(!$06&&!DayPilot.list($k.events.$hD.rows).isEmpty()){setTimeout(function(){$k.$fk($k.$fV(e));});return;};$k.$fk($06);};this.events.load=function($2r,$2s,$2t){if(!$2r){throw new DayPilot.Exception("events.load(): 'url' parameter required");};var $2u=function($n){var $2v={};$2v.exception=$n.exception;$2v.request=$n.request;if(typeof $2t==='function'){$2t($2v);}};var $2w=function($n){var r=$n.request;var $s;try{$s=JSON.parse(r.responseText);}catch(e){var $2x={};$2x.exception=e;$2u($2x);return;};if(DayPilot.isArray($s)){var $2y={};$2y.preventDefault=function(){this.preventDefault.value=true;};$2y.data=$s;if(typeof $2s==="function"){$2s($2y);};if($2y.preventDefault.value){return;};$k.events.list=$s;if($k.$en){$k.update();}}};var $2z=$k.eventsLoadMethod&&$k.eventsLoadMethod.toUpperCase()==="POST";if($2z){DayPilot.ajax({"method":"POST","contentType":"application/json","data":{"start":$k.visibleStart().toString(),"end":$k.visibleEnd().toString()},"url":$2r,"success":$2w,"error":$2u});}else{var $2A=$2r;var $2B="start="+$k.visibleStart().toString()+"&end="+$k.visibleEnd().toString();if($2A.indexOf("?")>-1){$2A+="&"+$2B;}else{$2A+="?"+$2B;};DayPilot.ajax({"method":"GET","url":$2A,"success":$2w,"error":$2u});}};this.events.findRecurrent=function($39,$0T){if(!$k.events.list||typeof $k.events.list.length==='undefined'){return null;};var $37=$k.events.list.length;for(var i=0;i<$37;i++){if($k.events.list[i].recurrentMasterId===$39&&$k.events.list[i].start.getTime()===$0T.getTime()){return new DayPilot.Event($k.events.list[i],$k);}};return null;};this.events.$fB=function($s){var $1l=[];var $2m=$k.$eY();$2m.forEach(function($A){if($A.isNewRow){return;};$k.$f0($A.index,$A.grid);for(var r=0;r<$A.events.length;r++){var rd=$A.events[r].data;if($k.$fY(rd,$s)){$1l.push($A);$A.events.splice(r,1);break;}}});return $1l;};this.events.$hx=function($s){if(!$s){return null;};var $2m=$k.$eY();for(var i=0;i<$2m.length;i++){var $A=$2m[i];if($A.hidden){continue;};if($A.isNewRow){continue;};$k.$f0($A.index,$A.grid);for(var r=0;r<$A.events.length;r++){var re=$A.events[r];if($k.$fY(re.data,$s)){return $A.events[r];}}};return null;};this.events.$fC=function($s){var $1l=[];var $3a=$k.$hE()||$k.viewType==="Days";var $1n=DayPilot.indexOf($k.events.list,$s);$k.$hF($1n);var $2m=$k.$eY();var $3b=false;$2m.forEach(function($A){if($3b){return;};if($A.isNewRow){return;};$k.$f0($A.index,$A.grid);var ep=$k.$hG($s,$A);if(ep){if(typeof $k.onBeforeEventRender==='function'){ep.cache=$k.$dJ.events[$1n];};$1l.push($A);if(!$3a){$3b=true;}}});return $1l;};this.$fY=function($3c,$3d){return DayPilot.Util.isSameEvent($3c,$3d);};this.events.update=function(e,$s,$j){if(typeof e==="object"&&!(e instanceof DayPilot.Event)){var ev=$k.events.find(e.id);if(!ev){throw new DayPilot.Exception("The event to be updated was not found");};$k.events.remove(ev);$k.events.add(e);return;};var $15={};$15.oldEvent=new DayPilot.Event(e.copy(),$k);$15.newEvent=new DayPilot.Event(e.temp(),$k);var $j=$j||{};var $1k=new DayPilot.Action($k,"EventUpdate",$15,$s);var $3e=DayPilot.list($k.events.list).find(function($04){return $k.$fY($04,e.data);});if(!$3e){return;};if($k.$gc.scope){$k.$gc.notify(function(){e.commit();});}else{$k.$el.skip=true;var $3f=$k.eventUpdateInplaceOptimization||$j.inplace;if($3f&&$15.oldEvent.resource()===$15.newEvent.resource()&&$15.oldEvent.start()===$15.newEvent.start()&&$15.oldEvent.end()===$15.newEvent.end()){e.commit();var $06=$k.$fV(e);if($06){var $3g=$06.event.part;$k.$hH($06);DayPilot.rfa($k.elements.events,$06);e.part=$3g;}else{$e("Old div not found");};var $1l=$k.events.$fB(e.data);$1l=$1l.concat($k.events.$fC(e.data));$k.$fD($1l);var ue=$k.events.$hx(e.data);ue&&$k.$hI(ue);}else{var $1l=$k.events.$fB(e.data);e.commit();$1l=$1l.concat($k.events.$fC(e.data));$k.events.$hJ($1l);}};return $1k;};this.events.remove=function(e,$s){var $15={};$15.e=new DayPilot.Event(e.data,$k);var $1k=new DayPilot.Action($k,"EventRemove",$15,$s);var $3e=$k.$hK(e.data);if($3e){$k.events.list.splice($3e.index,1);};if($k.$gc.scope){$k.$gc.notify();}else{$k.$el.skip=true;var $1l=$k.events.$fB(e.data);var $3f=$k.eventUpdateInplaceOptimization;if($3f&&$1l.length===1&&!$k.events.$hL(e)){$k.$hM($k.rowlist[$1l[0]]);var $06=$k.$fV(e);if($06){var $1n=$k.elements.events.indexOf($06);$k.elements.events.splice($1n,1);$k.$hH($06);}}else{$k.events.$hJ($1l);}};return $1k;};this.events.add=function(e,$s,$j){var $j=$j||{};var $3h=$j.renderOnly;if(!(e instanceof DayPilot.Event)){e=new DayPilot.Event(e);};e.calendar=$k;if(!$k.events.list){$k.events.list=[];};var $3e=$k.$hK(e);if($3h){if(!$3e){throw new DayPilot.Exception("Unexpected: event not found in list");}}else{if($3e&&!$k.temp.allowDuplicateEventIds){throw new DayPilot.Exception("The event you are trying to add using DayPilot.Scheduler.events.add() is already loaded. A unique ID is required.");};if(!$3e){$k.events.list.push(e.data);}};var $1k=new DayPilot.Action($k,"EventAdd",$15,$s);if(!$k.$en){return $1k;};if($k.$gc.scope){$k.$gc.notify();}else{$k.$el.skip=true;var $15={};$15.e=e;var $1l=$k.events.$fC(e.data);var $V=e.data.height||$k.eventHeight;var $3f=$k.eventUpdateInplaceOptimization;if($3f&&$1l.length===1&&!$k.events.$hL(e)&&$V<=$k.eventHeight&&!$k.eventVersionsEnabled){var $A=$k.rowlist[$1l[0]];$k.$hM($A);var ep=$A.events.find(function($04){return $04.data===e.data;});ep.part.top=0;ep.part.height=$V;ep.part.line=0;$k.$hI(ep);}else{$k.events.$hJ($1l);}};return $1k;};this.events.$hL=function(e){var $s=e instanceof DayPilot.Event?e.data:e;var $O=new DayPilot.Date($s.start);var end=new DayPilot.Date($s.end);var $3i=DayPilot.list($k.events.list).find(function($04){if($k.$fY($s,$04)){return false;};if($s.resource!==$04.resource){return false;};var $3j=new DayPilot.Date($04.start);var $3k=new DayPilot.Date($04.end);return DayPilot.Util.overlaps($O,end,$3j,$3k);});return !!$3i;};this.events.addByData=function($s){$k.events.add(new DayPilot.Event($s));};this.events.removeByData=function($s){var e=$k.events.find($s.id);if(!e){throw new DayPilot.Exception("The event to be removed was not found");};$k.events.remove(e);};this.events.updateByData=function($s){var e=$k.events.find($s.id);if(!e){throw new DayPilot.Exception("The event to be updated was not found");};$k.events.remove(e);$k.events.add(new DayPilot.Event($s));};this.events.removeById=function(id){var e=$k.events.find(id);if(!e){throw new DayPilot.Exception("The event to be removed was not found");};$k.events.remove(e);};this.events.$hD={"rows":[]};this.events.$hN=null;this.events.$g7=function(){clearTimeout($k.events.$hN);$k.events.$hN=null;$k.events.$hD.rows=[];};this.events.$hO=0;this.events.$hJ=function($1l){var $2E=$k.events.$hD.rows;DayPilot.list($1l).forEach(function($A){$2E.push($A);});$k.events.$hD.rows=DayPilot.ua($2E);var $1K=$k.events.immediateRefresh;if(!$k.events.$hN){$k.events.$hN=setTimeout($1K,$k.events.$hO);}};this.events.immediateRefresh=function(){clearTimeout($k.events.$hN);$k.events.$hN=null;var $1l=$k.events.$hD.rows;$k.events.$hD.rows=[];$k.$fD($1l);$k.$fE();if($k.$en){if($k.viewType==="Gantt"){$k.update();}else{$k.$fF($1l);$k.$e6();$k.$hP();}}};this.$el={};this.$el.enabled=false;this.$el.skip=false;this.$el.skipUpdate=function(){return $k.$el.skip;};this.$el.skipped=function(){$k.$el.skip=false;};this.$hk={};this.$hk.reactDOM=null;this.$hk.react=null;this.queue={};this.queue.list=[];this.queue.list.ignoreToJSON=true;this.queue.add=function($1k){if(!$1k){return;};if($1k.isAction){$k.queue.list.push($1k);}else{throw "DayPilot.Action object required for queue.add()";}};this.queue.notify=function($s){var $15={};$15.actions=$k.queue.list;$k.$fg('Notify',$15,$s,"Notify");$k.queue.list=[];};this.queue.clear=function(){$k.queue.list=[];};this.queue.pop=function(){return $k.queue.list.pop();};this.cells.find=function($O,$1B){var $A;if($1B instanceof DayPilot.Row){$A=$1B.$.row;}else if($1B.isRow){$A=$1B;}else{$A=$k.$et($1B);};if(!$A){return $3l();};var offset=$A.start.getTime()-$k.$eZ().getTime();var $3m=new DayPilot.Date($O).addTime(-offset);var $B=$k.getPixels($3m);if(!$B){return $3l();};var x=$B.i;var y=$A.index;return this.findXy(x,y,$A.grid);};this.cells.findByPixels=function(x,y){var $0S=$k.$f9(x);if(!$0S){return $3l();};var x=$0S.x;var $A=$k.$h8(y);if(!$A){return $3l();};var y=$A.i;return this.findXy(x,y);};this.cells.all=function(){var $02=[];var $22=$k.itline.length;var $3n=$k.rowlist.length;for(var x=0;x<$22;x++){for(var y=0;y<$3n;y++){var $T=$k.cells.findXy(x,y);$02.push($T[0]);}};return $3l($02);};this.cells.$hQ=function(x,y,$2o){$2o=$2o||"main";var $2l=$k.$hr[$2o];var $2m=$2l.rowlist;var $0S=$k.$fi(x);var $A=$2m[y];var $1G=$A.start.getTime()-$k.$eZ().getTime();var $O=$0S.start.addTime($1G);var end=$0S.end.addTime($1G);var $T={};$T.x=x;$T.y=y;$T.grid=$2o;$T.displayY=$A.displayY;$T.i=$2o+"_"+x+"_"+y;if(!$A.id){};$T.resource=$A.id;$T.start=$O;$T.end=end;$T.calendar=$k;$T.isParent=!!($A.children&&$A.children.length);$T.update=function(){if(!$2m[$T.y].hidden){var $1Q=$k.$dJ.cells[$T.i];$k.$hR($1Q);var $N=$k.$ev();if($N.xStart<=$T.x&&$T.x<=$N.xEnd){if($N.yStart<=$T.y&&$T.y<=$N.yEnd){$k.$hS($T.x,$T.y,$T.grid);}}}};$T.utilization=function(name){if($A.isNewRow){return 0;};if(!$A.sections){$A.calculateUtilization();};return $A.sections.forRange($O,end).maxSum(name);};$T.events=function(){return $A.events.forRange($O,end);};$T.div=$k.$dJ.cells[$T.i];var p=$k.$hT(x,y,$2o);$T.properties=p;return $T;};this.cells.findXy=function(x,y,$2o){if(DayPilot.isArray(x)){var $Q=[];for(var i=0;i<x.length;i++){var o=x[i];$Q.push($k.cells.$hQ(o.x,o.y,$2o));};return $3l($Q);}else if(x===null||y===null){return $3l();};var $T=$k.cells.$hQ(x,y,$2o);return $3l($T);};this.$hU=function(a){var $02=DayPilot.list();if(DayPilot.isArray(a)){for(var i=0;i<a.length;i++){$02.push(a[i]);}}else if(typeof a==='object'){$02.push(a);};$02.cssClass=function($3o){this.forEach(function($04){$04.properties.cssClass=DayPilot.Util.addClassToString($04.properties.cssClass,$3o);$04.update();});return this;};$02.removeClass=function($3o){this.forEach(function($04){$04.properties.cssClass=DayPilot.Util.removeClassFromString($04.properties.cssClass,$3o);$04.update();});return this;};$02.addClass=$02.cssClass;$02.html=function($0h){this.forEach(function($04){$04.properties.html=$0h;$04.update();});return this;};$02.invalidate=function(){this.forEach(function($04){delete $k.$f1[$04.i];});return this;};return $02;};var $3l=this.$hU;this.$gc={};this.$gc.scope=null;this.$gc.notify=function(f){if($k.$gc.scope){DayPilot.Util.safeApply($k.$gc.scope,f);}};this.debug=new DayPilot.Debug(this);this.$hV=function($w){if($k.viewType!=='Days'){throw "Checking row start when viewType !== 'Days'";};for(var i=0;i<$k.rowlist.length;i++){var $A=$k.rowlist[i];var $s=$A.element?$A.element.data:$A.data;var $O=$s.start;if($w.getTime()>=$O.getTime()&&$w.getTime()<$O.addDays(1).getTime()){return $O;}};return null;};this.$hW=function($w){var $O=$k.$eZ();if($w.ticks===$O.ticks){return $w;};var $0M=$O;if($w.ticks<$O.ticks){var $3p=this.itline[0].end.ticks-this.itline[0].start.ticks;while($0M.ticks>$w.ticks){$0M=$0M.addTime(-$3p);};return $0M;};if($k.viewType==='Days'){var $3q=this.$hV($w);var offset=$3q.getTime()-$k.$eZ().getTime();var $T=this.$fb($w.addTime(-offset));if($T.current){return $T.current.start.addTime(offset);};if($T.past){return $T.previous.end.addTime(offset);};throw "getBoxStart(): time not found";}else{var $T=this.$fb($w);if($T.current){return $T.current.start;};if($T.past){return $T.previous.end;};if($T.hidden){var $K=$T.next.start.getTime()-$w.getTime();var $3r=$T.next.end.getTime()-$T.next.start.getTime();var $3s=Math.ceil($K/$3r)*$3r;var $l=$T.next.start.addTime(-$3s);return $l;};throw "getBoxStart(): time not found";}};this.$hq=function(e){var $A=this.$h8($k.coords.y,$k.coords.grid);var $3t=$k.scaleManualLimitBeyond;if(typeof e.end !=='function'){throw "e.end function is not defined";};if(!e.end()){throw "e.end() returns null";};var $0Y=DayPilot.DateUtil.diff(e.rawend(),e.start());$0Y=DayPilot.Util.atLeast($0Y,1);var $3u=$0g.useBox($0Y);var $3v=e.data&&e.data.type==="Milestone";var $3w=$k.eventHeight;var $3x=0;var x=$k.coords.x;if($3v){x+=$3w/2;};if($3t&&$k.scale==="Manual"&&!$k.eventMoveSkipNonBusiness){var $3y=(function(){var end=$k.getDate($k.coords.x,true,true);var $O=end.addTime(-$0Y);var $3z=$k.getPixels($O).boxLeft;var $3A=$k.getPixels(end).boxRight;var end=Math.min($3A,$k.coords.x);return end -$3z;})();var offset=Math.min(DayPilotScheduler.moveOffsetX?DayPilotScheduler.moveOffsetX:0,$3y);x=$k.coords.x-offset;};var $3B=DayPilotScheduler.movingEvent?DayPilotScheduler.movingEvent.calendar:$k;var $1G=0;var $3C=this.viewType==='Days'||this.$hX();var $3D=!e.part.external&&$3B===$k;if($3C&&$3D){$1G=this.rowlist[e.part.dayIndex].start.getTime()-this.$eZ().getTime();};if($3u&&!$3v&&$3B===$k){var $T=$k.$fb(e.start());var $3E=!$T.hidden&&!$T.past;$3x=e.start().getTime()-this.$hW(e.start().addTime(-$1G)).addTime($1G).getTime();if($3E){$3x=(function($3F,offset){var $3G=$k.$hY($k.$fb($3F).current);var $3H=$k.$hY($k.$f9(x).cell);if($3G>$3H*1.2){var $3I=offset>0?1:-1;var offset=Math.abs(offset);while(offset>=$3H){offset-=$3H;};offset*=$3I;};return offset;})(e.start(),$3x);}};if($3B&&$3B!==$k){if($3B.$hZ()!==$k.$hZ()){$3x=0;}};var $3J=0;if(DayPilotScheduler.moveDragStart&&($k.scale!=="Manual"||!$3t)&&$3B===$k){if($3u){var $3K=e.start().addTime(-$1G);var $3L=this.$hW($3K);$3J=DayPilotScheduler.moveDragStart.getTime()-$3L.getTime();var $3M=$k.$hZ()*60*1000;$3J=Math.floor($3J/$3M)*$3M;}else{$3J=DayPilotScheduler.moveDragStart.getTime()-e.start().addTime(-$1G).getTime();}}else{$3J=0;};if(this.eventMoveToPosition){$3J=0;};var $O=this.getDate(x,true).addTime(-$3J).addTime($1G);if(DayPilotScheduler.resizing){$O=e.start();};var $3N=$k.snapToGrid;if(DayPilotScheduler.moving){$3N=$3N&&$k.snapToGridEventMoving;}else if(DayPilotScheduler.resizing){$3N=$3N&&$k.snapToGridEventResizing;}else if(DayPilotScheduler.range){$3N=$3N&&$k.snapToGridTimeRangeSelecting;};if($3N){$O=this.$hW($O.addTime(-$1G)).addTime($1G);};$O=$O.addTime($3x);var end=$O.addTime($0Y);var $0z=$O;var $0A=end;if($3C){$0z=$O.addTime(-$1G);$0A=$0z.addTime($0Y);var $3O=$A.element.data.start.getTime()-this.$eZ().getTime();$O=$0z.addTime($3O);end=$O.addTime($0Y);};if($3t&&$k.scale==="Manual"){var $2p=$A.element.$i0();if(end>$2p){var $3P=end.getTime()-$2p.getTime();$O=$O.addTime(-$3P);end=end.addTime(-$3P);};$0z=$O.addTime(-$1G);$0A=end.addTime(-$1G);};if(DayPilotScheduler.moving&&$k.eventMoveSkipNonBusiness){var y=$A.i;var $2C=0;if(DayPilotScheduler.moveDragStart){$2C=DayPilotScheduler.moveDragStart.addTime($1G);if($3N){$2C=this.$hW($2C.addTime(-$1G)).addTime($1G);}};var $3Q=!e.part.dayIndex;var $3R=0;if(!$3Q){$3R=$k.$i1(e.start(),$2C,e.part.dayIndex);};var $0Y=$k.$i2(e);var $3S=$k.getDate(x,true);if($3N){$3S=$k.getDate(x);};var offset=$k.$i3($3S,$3R,y,$A.grid);$O=$3S.addTime(-offset).addTime($1G);if($3N){$O=this.$hW($O.addTime(-$1G)).addTime($1G);};if(!$3Q){$3x=$k.$i1(this.$hW(e.start().addTime(-$1G)).addTime($1G),e.start(),y,$A.grid);}else{$3x=0;};$O=$O.addTime($3x);if($O<=$k.visibleStart()){$O=$k.$i4($k.visibleStart(),y,$A.grid).start;};end=$k.$i5($O,$0Y,y,$A.grid);if(end>=$k.visibleEnd()){end=$k.$i6($k.visibleEnd(),y,$A.grid).end;$O=end.addTime(-$k.$i3(end,$0Y,y));};$0z=$O.addTime(-$1G);$0A=end.addTime(-$1G);};var $3T=this.getPixels($0z);var $3U=this.getPixels($0A);var $R=($3N)?$3T.boxLeft:$3T.left;var $D=($3N&&$3u)?($3U.boxRight-$R):($3U.left-$R);if($3v){$D=$3w;$R-=$D/2;};var $2k={};$2k.top=$A.top;$2k.left=$R;$2k.row=$A.element;$2k.rowIndex=$A.i;$2k.grid=$k.coords.grid;$2k.width=$D;$2k.start=$O;$2k.end=end;$2k.relativeY=$k.coords.y-$A.top;return $2k;};this.$i7=function($O,end){var $W=$k.$fb($O);var $X=$k.$fb(end);var $0y=null;var $3V=0;if($W.hidden){$0y=$O;};for(var x=$W.i;x<=$X.i;x++){var $T=$k.itline[x];if($0y&&$0y<$T.start){$3V+=$T.start.getTime()-$0y.getTime();};$0y=$T.end;};return $3V;};this.$i5=function($O,$0Y,y,$2o){$2o=$2o||"main";var $3W=$0Y;var $A=$k.rowlist[y];var $1G=$A.data.start.getTime()-$k.$eZ().getTime();var $0z=$O.addTime(-$1G);var $3X=$k.$i4($0z,y,$2o);if(!$3X){throw new DayPilot.Exception("No next cell found");};var x=DayPilot.indexOf($k.itline,$3X);if($3X.start>$O){}else{$3W-=$3X.end.getTime()-$0z.getTime();if($3W<=0){return $O.addTime($0Y);};x+=1;};for(var i=x;i<$k.itline.length;i++){var $T=$k.$hT(i,y,$2o);var $0S=$k.itline[i];if($T.business){var $3Y=$0S.start.addTime($1G);var $3Z=$0S.end.addTime($1G);var $40=$3Z.getTime()-$3Y.getTime();if($3W<=$40){return $3Y.addTime($3W);};$3W-=$40;}};return $k.itline[$k.itline.length-1].end.addTime($3W);};this.$i1=function($O,end,y,$2o){$2o=$2o||"main";var $2l=$k.$i8($2o);var $2m=$2l.rowlist;var $A=$2m[y];var $1G=$A.data.start.getTime()-$k.$eZ().getTime();var $T=$k.$fb($O);var $0z=$O.addTime(-$1G);var $0A=end.addTime(-$1G);var $3X=$k.$i4($0z,y,$2o);if(!$3X){throw new DayPilot.Exception("No next cell found");};var $0Y=0;var x=DayPilot.indexOf($k.itline,$3X);if($3X.start<=$0A){if(end<$3X.end.addTime($1G)){if($3X.start>$0z){return end.getTime()-$3X.start.addTime($1G).getTime();}else{return end.getTime()-$O.getTime();}};if($0z>$3X.start){$0Y+=$3X.end.getTime()-$0z.getTime();}else{$0Y+=$3X.end.getTime()-$3X.start.getTime();};x+=1;};for(var i=x;i<$k.itline.length;i++){var $T=$k.$hT(i,y,$2o);if($T.business){var $0S=$k.itline[i];var $3Y=$0S.start.addTime($1G);var $3Z=$0S.end.addTime($1G);var $40=$3Z.getTime()-$3Y.getTime();if(end<$3Y){return $0Y;};if(end<=$3Z){$0Y+=end.getTime()-$3Y.getTime();return $0Y;};$0Y+=$40;}};var $41=end.getTime()-$k.itline.last().end.addTime($1G).getTime();$0Y+=DayPilot.Util.atLeast(0,$41);return $0Y;};this.$i2=function(e){if(e.part.duration){if(isNaN(e.part.duration)){throw new DayPilot.Exception("Unable to get calculated duration");};return e.part.duration;};var y=e.part.dayIndex;return $k.$i1(e.start(),e.rawend(),y);};this.$i3=function($O,offset,y,$2o){$2o=$2o||"main";var $l=0;var $3W=offset;var $T=$k.$fb($O);if(!$T.current){throw new DayPilot.Exception("Current cell not found.");};var x=DayPilot.indexOf($k.itline,$T.current);if($k.$hT(x,y,$2o).business){if($O.addTime(-offset)>=$T.current.start){return offset;}}else{if(offset===0||$O.addTime(-offset)>=$T.current.start){var $42=$k.$i4($O,y,$2o);if($42){return $O.getTime()-$42.start.getTime();}else{var $0K=$k.$i6($O,y,$2o);return $O.getTime()-$0K.start.getTime();}}};$l+=$O.getTime()-$T.current.start.getTime();$3W-=$O.getTime()-$T.current.start.getTime();x-=1;var $43=$T.current.start;while(x>=0){var $T=$k.itline[x];if($43>$T.end){$l+=$43.getTime()-$T.end.getTime();};$43=$T.start;var $40=$T.end.getTime()-$T.start.getTime();if($k.$hT(x,y,$2o).business){if($3W<=$40){$l+=$3W;return $l;};$l+=$40;$3W-=$40;}else{$l+=$40;};x-=1;};return $l+$3W;};this.$i6=function($0T,y,$2o){$2o=$2o||"main";var $T=$k.$fb($0T);var i=0;if($T.past){return null;};if($T.current){i=$T.i;}else if($T.previous){i=DayPilot.indexOf($k.itline,$T.previous);}else{return null;};for(var x=i;x>=0;x--){var $44=$k.$i9(x,y,$2o);if($44){return $k.itline[x];}};return null;};this.$i4=function($0T,y,$2o){$2o=$2o||"main";var $T=$k.$fb($0T);var i=0;if($T.past){return null;};if($T.current){i=$T.i;}else if($T.next){i=DayPilot.indexOf($k.itline,$T.next);}else{return null;};for(var x=i;x<$k.itline.length;x++){var $44=$k.$i9(x,y,$2o);if($44){return $k.itline[x];}};return null;};this.$i9=function(x,y,$2o){$2o=$2o||"main";var $0a=$k.$hT(x,y,$2o);return $0a.business;};this.$hZ=function(){switch(this.scale){case "CellDuration":return this.cellDuration;case "Minute":return 1;case "Hour":return 60;case "Day":return 60*24;case "Week":return 60*24*7;case "Month":return 60*24*30;case "Year":return 60*24*365;case "Manual":if($k.itline.length>0){var $T=$k.itline[0];return($T.end.getTime()-$T.start.getTime())/(60*1000);}else{return $k.cellDuration;}};throw "can't guess cellDuration value";};this.$hY=function($0S){return $0S.end.ticks-$0S.start.ticks;};this.$hs=function(y,$2o){$2o=$2o||"main";return $2o==="main"&&this.treePreventParentUsage&&this.$ia(y,$2o);};this.$ia=function(y,$2o){$2o=$2o||"main";var $2l=$k.$hr[$2o];var $2m=$2l.rowlist;var $A=$2m[y];if($A.isParent){return true;};if(this.treeEnabled){if($A.children&&$A.children.length>0){return true;}};return false;};this.$ib={};this.$ic=function(){if(!$k.treeAutoExpand){return;};var $2k=this.$hq(DayPilotScheduler.movingEvent);var y=$2k.rowIndex;var $45=this.$ia(y);var $46=this.$ib;if($46.timeout&&$46.y!==y){clearTimeout($46.timeout);$46.timeout=null;$46.y=null;};if($45){$46.y=y;var $47=!$k.rowlist[$46.y].expanded;if(!$46.timeout&&$47){$46.timeout=setTimeout(function(){var $47=!$k.rowlist[$46.y].expanded;if($47){$k.$id($46.y,{"notAnimated":true});$k.$ie();};$46.timeout=null;$46.y=null;},500);}}};this.$if=function(){clearTimeout($k.$ib.timeout);$k.$ib.timeout=null;$k.$ib.y=null;};this.$ig=function(){var $48=DayPilotScheduler.resizingShadow.width;var $49=DayPilotScheduler.resizingShadow.left;var e=DayPilotScheduler.resizingEvent;var $4a=DayPilotScheduler.resizing.dpBorder;var $A=$k.rowlist[e.part.dayIndex];var $1G=0;$1G=$A.start.getTime()-$k.$eZ().getTime();var $0v=null;var $1a=null;var $3N=$k.snapToGrid&&$k.snapToGridEventResizing;var $4b=!$3N;if($4a==='left'){$0v=$k.getDate($49,$4b).addTime($1G);$1a=e.rawend();}else if($4a==='right'){$0v=e.start();$1a=$k.getDate($49+$48,$4b,true).addTime($1G);};DayPilotScheduler.resizingShadow.start=$0v;DayPilotScheduler.resizingShadow.end=$1a;};this.exportAs=function($0G,$j){if(!$k.$ih()){throw new DayPilot.Exception("DayPilot.Scheduler.exportAs(): The instance must be visible during export.");};var $4c=$4d.generate($0G,$j);return new DayPilot.Export($4c);};this["export"]=this.exportAs;this.$ii={};var $4d=this.$ii;$4d.getWidth=function(){var $4e=$4d.$ij;switch($4e){case "viewport":return $k.nav.top.offsetWidth;case "full":return $k.$eF()+$4d.getRowHeaderWidth();case "range":return $k.getPixels($4d.getRangeEnd()).boxRight-$k.getPixels($4d.getRangeStart()).boxLeft+$4d.getRowHeaderWidth();default:throw "Unsupported export mode: "+$4e;}};$4d.getHeight=function(){var $4e=$4d.$ij;switch($4e){case "viewport":return $k.nav.top.offsetHeight-DayPilot.sh($k.nav.scroll)-1;case "full":return $k.$ik()+$k.$eJ()-DayPilot.sh($k.nav.scroll);case "range":var $1l=$4d.getRows();if($1l.length===0){return $k.$eJ();}else{var $0U=$1l.first();var to=$1l.last();var $V=$4d.$il(to)-$4d.$il($0U)+to.height+$k.$eJ();$V+=$k.$hr.top.height;$V+=$k.$hr.bottom.height;return $V;};default:throw "Unsupported export mode: "+$4e;}};$4d.$il=function($A){var top=$4d.$im.includeHiddenRows?$A.absTop:$A.top;if($A.grid==="bottom"){if($4d.$ij==="viewport"){top+=$k.$hr.bottom.top-$k.$eJ();}else if($4d.$ij==="full"){top+=$k.$dG;}else if($4d.$ij==="range"){top+=$4d.getHeight()-$k.$eJ()-$k.$hr.bottom.height;}};return top;};$4d.$in=function($A){var offset=$4d.getViewportOffsetTop();if($A.grid!=="main"){offset=0;};return offset;};$4d.getRangeStart=function(){var $0U=$4d.$im.dateFrom||$k.$eZ();return new DayPilot.Date($0U);};$4d.getRangeEnd=function(){var to=$4d.$im.dateTo||$k.$f4();return new DayPilot.Date(to);};$4d.getRangeResStart=function(){if(!$4d.$im.resourceFrom){return $k.rowlist.find(function($A){return !$A.hidden});};return $k.$et($4d.$im.resourceFrom);};$4d.getRangeResEnd=function(){if(!$4d.$im.resourceTo){return $k.rowlist.last();};return $k.$et($4d.$im.resourceTo);};$4d.getRowHeaderWidth=function(){return $k.$eI();};$4d.getTimeHeaderHeight=function(){return $k.$eJ();};$4d.getCanvas=function(){return $4d.canvas();};$4d.getRectangles=function(){var $4f=$4d.getRowHeaderWidth();var $4g=$4d.getTimeHeaderHeight();var $4h={};$4h.main={"x":0,"y":0,"w":$4d.getWidth(),"h":$4d.getHeight()};$4h.corner={"x":0,"y":0,"w":$4f,"h":$4g};$4h.grid={"x":$4f,"y":$4g,"w":$4d.getWidth()-$4f,"h":$4d.getHeight()-$4g};var $D=$4h.grid.w;var $4i=$k.itline.last();if($4i&&($4i.left+$4i.width)<$4h.grid.w){$D=$4i.left+$4i.width;};var $V=$4h.grid.h;var $4j=$k.rowlist.last();if($4j&&($4j.top+$4j.height)<$4h.grid.h){$V=$4j.top+$4j.height;};$4h.gridContent={"x":$4f,"y":$4g,"w":$D,"h":$V};return $4h;};$4d.getRows=function(){var $4e=$4d.$ij;var $l=DayPilot.list();var top,$00,$4k,$4l;switch($4e){case "viewport":top=$k.$io;$00=top+$k.nav.scroll.offsetHeight;$4k=$k.$h8(top).i;$4l=$k.$h8($00).i;break;case "full":top=0;$4k=0;$4l=$k.rowlist.length;break;case "range":var $0U=$4d.getRangeResStart();var to=$4d.getRangeResEnd();if(!$0U){throw "Resource specified using resourceFrom option not found during export.";};if(!to){throw "Resource specified using resourceTo option not found during export.";};$4k=$0U.index;$4l=to.index;break;};if($4l<$k.rowlist.length){$4l+=1;};for(var y=$4k;y<$4l;y++){var $A=$k.rowlist[y];if(!$4d.$im.includeHiddenRows&&$A.hidden){continue;};$l.push($A);};$l.offset=$4k;return $l;};$4d.getRowsTop=function(){return $k.$hr.top.rowlist;};$4d.getRowsBottom=function(){return $k.$hr.bottom.rowlist;};$4d.getRowsAll=function(){var $1l=$4d.getRows();$1l=$1l.concat($4d.getRowsTop());$1l=$1l.concat($4d.getRowsBottom());return $1l;};$4d.getRowsTopAndBottom=function(){var $1l=[];$1l=$1l.concat($4d.getRowsTop());$1l=$1l.concat($4d.getRowsBottom());return $1l;};$4d.bottomFrozenY=function(){if($k.$hr.bottom.enabled()){if($4d.$ij==="viewport"){return $k.$hr.bottom.top;}else if($4d.$ij==="full"){return $4d.getHeight()-$k.$hr.bottom.height;}else if($4d.$ij==="range"){return $4d.getHeight()-$k.$hr.bottom.height;}};return $4d.getHeight();};$4d.getEvents=function(){var $4e=$4d.$ij;switch($4e){case "full":var $4m=DayPilot.list();DayPilot.list($k.rowlist).forEach(function($A){if($A.hidden){return;};DayPilot.list($A.events).forEach(function(e){$4m.push(e);});});return $4m;case "viewport":return $U.events().filter(function($06){return $06.event.part.grid==="main";}).map(function($06){return $06.event;});case "range":var $4m=DayPilot.list();var $O=$4d.getRangeStart();var end=$4d.getRangeEnd();$4d.getRows().forEach(function($A){DayPilot.list($A.events).filter(function($04){return DayPilot.Util.overlaps($04.start(),$04.end(),$O,end)}).forEach(function(e){$4m.push(e);});});return $4m;default:throw "Unsupported export mode: "+$4e;}};$4d.getEventsFrozen=function(){var $4e=$4d.$ij;switch($4e){case "full":var $4m=DayPilot.list();var $1l=$4d.getRowsTopAndBottom();$1l.forEach(function($A){if($A.hidden){return;};DayPilot.list($A.events).forEach(function(e){$4m.push(e);});});return $4m;case "viewport":return $U.events().filter(function($06){return $06.event.part.grid!=="main";}).map(function($06){return $06.event;});case "range":var $4m=DayPilot.list();var $O=$4d.getRangeStart();var end=$4d.getRangeEnd();$4d.getRowsTopAndBottom().forEach(function($A){DayPilot.list($A.events).filter(function($04){return DayPilot.Util.overlaps($04.start(),$04.end(),$O,end)}).forEach(function(e){$4m.push(e);});});return $4m;default:throw "Unsupported export mode: "+$4e;}};$4d.getLinks=function(){if(!DayPilot.isArray($k.links.list)){return;};var $4n=[];for(var i=0;i<$k.links.list.length;i++){var link=$k.links.list[i];var $2F=$k.events.find(link.from);var $O=$k.events.$hx($2F&&$2F.data);var $2G=$k.events.find(link.to);var end=$k.events.$hx($2G&&$2G.data);var $4o=$1u.getSegments($O,end,link,$4d.$im.includeHiddenRows);$4n.push($4o);};return $4n;};$4d.getTimeline=function(){var $4e=$4d.$ij;switch($4e){case "full":return DayPilot.list($k.itline).addProps({"offset":0});case "viewport":return $4d.getViewportTimeline();case "range":return $4d.getRangeTimeline();default:throw "Unsupported export mode: "+$4e;}};$4d.getRangeTimeline=function(){var $l=DayPilot.list();if($k.itline&&$k.itline.length>0){var $O=$k.$fb($4d.getRangeStart()).i;var end=$k.$fb($4d.getRangeEnd()).i;var $4p=$k.$ip();end=Math.min(end,$4p-1);$O=DayPilot.Util.atLeast($O,0);for(var x=$O;x<=end;x++){var $T=$k.itline[x];$l.push($T);};$l.offset=$O;};return $l;};$4d.getViewportTimeline=function(){var $l=DayPilot.list();if($k.itline&&$k.itline.length>0){var $R=$k.$iq;var $S=$R+$k.$ir;var $O=$k.$f9($R).x;var end=$k.$f9($S,true).x;var $4p=$k.$ip();end=Math.min(end,$4p);$O=DayPilot.Util.atLeast($O,0);for(var x=$O;x<=end;x++){var $T=$k.itline[x];$l.push($T);};$l.offset=$O;};return $l;};$4d.getTimeHeader=function(y){var $4e=$4d.$ij;if($4e==="full"){return DayPilot.list($k.timeHeader[y]);}else{var $l=DayPilot.list();var $4q,$4r;$4q=$4d.getViewportOffsetStart();$4r=$4q+$4d.getViewportOffsetWidth();var $4s=$k.$is(y,$4q);var $4t=$k.$is(y,$4r);if(!$4t){$4t={"x":$k.timeHeader[y].length-1};};for(var x=$4s.x;x<=$4t.x;x++){var $T=$k.timeHeader[y][x];$l.push($T);};return $l;}};$4d.getSeparators=function(){return DayPilot.list($k.separators).map(function($4u){var $0T=new DayPilot.Date($4u.location);if($0T.getTime()<$k.$eZ().getTime()){return null;};if($0T.getTime()>=$k.$f4().getTime()){return null;};var $B=$k.getPixels($0T);if($B.cut){return null;};if($B.left<0){return null;};if($B.left>$k.$eF()){return null;};return{"left":$B.left,"color":$4u.color,"width":$4u.width||1};}).filter(function($4u){return !!$4u;});};$4d.fakeDurationBar=function(){var $06=document.createElement("div");$06.style.display="none";$06.className=$k.$eC($0b.event);var $4v=document.createElement("div");$4v.className=$k.$eC($0b.eventBar);var $09=document.createElement("div");$09.className=$k.$eC($0b.eventBarInner);document.body.appendChild($06);$4v.appendChild($09);$06.appendChild($4v);return $06;};$4d.fakeEventLeft=function(){var $06=document.createElement("div");$06.style.display="none";$06.className=$k.$eC("_event_left");document.body.appendChild($06);return $06;};$4d.fakeGroup=function(){var $06=document.createElement("div");$06.style.display="none";$06.className=$k.$eC($0b.event)+" "+$k.$eC("_task_group");var $09=document.createElement("div");$09.className=$k.$eC($0b.eventInner);$06.appendChild($09);$k.divEvents.appendChild($06);return $06;};$4d.fakeMilestone=function(){var $06=document.createElement("div");$06.style.display="none";$06.className=$k.$eC($0b.event)+" "+$k.$eC("_task_milestone");var $09=document.createElement("div");$09.className=$k.$eC($0b.eventInner);$06.appendChild($09);$k.divEvents.appendChild($06);return $06;};$4d.fakeCell=function(){var $06=document.createElement("div");$06.style.display="none";$06.className=$k.$eC("_cell");$06.style.position="absolute";$06.style.top="-2000px";$06.style.left="-2000px";var $09=document.createElement("div");$09.className=$k.$eC("_cell_inner");$06.appendChild($09);$k.divCells.appendChild($06);return $06;};$4d.fakeRowHeader=function(){var $06=document.createElement("div");$06.style.display="none";$06.className=$k.$eC("_rowheader");$06.style.position="absolute";$06.style.top="-2000px";$06.style.left="-2000px";var $09=document.createElement("div");$09.className=$k.$eC("_rowheader_inner");$06.appendChild($09);$k.divResScroll.appendChild($06);return $06;};$4d.fakeExpand=function(){var $06=document.createElement("div");$06.style.display="none";$06.className=$k.$eC('_tree_image_expand');document.body.appendChild($06);return $06;};$4d.fakeIcon=function($4w){var $06=document.createElement("i");$06.className=$4w;$06.style.position="absolute";$06.style.top="-2000px";$06.style.left="-2000px";return $06;};$4d.extractUrl=function($4x){var $4y=/url\((")?([^"].*[^"])\1\)/.exec($4x);if(!$4y){return null;};return $4y[2];};$4d.getImages=function(){var $l={};var $25=$4d.fakeExpand();$l.expand=$4d.extractUrl(new DayPilot.StyleReader($25).get("background-image"));$25.className=$k.$eC("_tree_image_collapse");$l.collapse=$4d.extractUrl(new DayPilot.StyleReader($25).get("background-image"));$25.className=$k.$eC("_tree_image_no_children");$l.nochildren=$4d.extractUrl(new DayPilot.StyleReader($25).get("background-image"));DayPilot.de($25);return $l;};$4d.getFont=function(element){return new DayPilot.StyleReader(element).getFont();};$4d.getViewportOffsetStart=function(){var $4e=$4d.$ij;switch($4e){case "full":return 0;case "viewport":return $k.nav.scroll.scrollLeft;case "range":return $k.getPixels($4d.getRangeStart()).boxLeft;}};$4d.getViewportOffsetTop=function(){var $4e=$4d.$ij;switch($4e){case "full":return 0;case "viewport":return $k.nav.scroll.scrollTop;case "range":return $4d.$il($4d.getRangeResStart())-$k.$hr.top.height;}};$4d.getViewportOffsetWidth=function(){var $4e=$4d.$ij;switch($4e){case "full":return $k.$eF();case "viewport":return $k.nav.scroll.offsetWidth;case "range":return $k.getPixels($4d.getRangeEnd()).boxRight-$4d.getViewportOffsetStart();}};$4d.excelBoard=function(){var $4z=new DayPilot.Excel();var $4A=$4z.worksheets.create("Scheduler");var $4B=new DayPilot.StyleReader($k.nav.corner).get("background-color");var $4C=new DayPilot.StyleReader($k.nav.top).get("border-top-color");var $4D=DayPilot.list($k.elements.events).filter(function($06){return !$06.event.data.type;}).map(function($04){return $04.firstChild;}).last();var $4E=new DayPilot.StyleReader($4D).get("border-right-color");$4z.styles.getDefault().setBackColor("#ffaaaa");var $4F=$4z.styles.create();$4F.setHorizontalAlignment("Center");$4F.setBackColor($4B);$4F.setBorderColor($4C);var $4G=$4z.styles.create();$4G.setVerticalAlignment("Top");$4G.setBackColor($4B);$4G.setBorderColor($4C);var $4H=$4z.styles.create();$4H.setVerticalAlignment("Top");$4H.setBackColor("#ff0000");$4H.setBorderColor($4E);$4A.enableGridlines(false);$4A.cell(0,0).setRowspan($k.timeHeader.length).setStyle($4F);$4A.cell(10,10).setText("hi there");DayPilot.list($k.timeHeader).forEach(function($04,y){var offset={"x":1,"y":0};$4d.getTimeHeader(y,"full").forEach(function($T,x){var $4I=$T.colspan;$4A.cell(x+offset.x,y+offset.y).setText($T.innerHTML).setColspan($4I).setStyle($4F);});});DayPilot.list($k.rowlist).forEach(function($A,y){var offset={"x":0,"y":1};var $2a="";for(var i=0;i<$A.level;i++){$2a+="  ";};$4A.cell(offset.x,y+offset.y).setText($2a+$A.html).setRowspan($A.lines.length).setStyle($4G);});var offset={"x":0,"y":$k.timeHeader.length};var $4J=offset.y;DayPilot.list($k.rowlist).forEach(function($A,y){DayPilot.list($A.lines).forEach(function($0H,i){var $4K=offset.x;DayPilot.list($0H).forEach(function(e){var $O=$k.$fb(e.start()).i;var end=$k.$fb(e.end()).i;var $4I=1+end -$O;$4A.cell($O+$4K,y+$4J).setText(e.client.html()).setColspan($4I).setStyle($4H);$4K+=$4I-1;});});$4J+=$A.lines.length-1;});return $4z;};$4d.$im=null;$4d.$ij=null;$4d.generate=function($0G,$j){if(typeof $0G==="object"){$j=$0G;$0G=null;};var $j=$j||{};var $0G=$0G||$j.format||"svg";var $4L=$j.scale||1;if($0G==="xls"){return $4d.excelBoard();};if($0G.toLowerCase()==="jpg"){$0G="jpeg";};var $4e=$j.area||"viewport";$4d.$im=DayPilot.Util.copyProps($j);$4d.$ij=$4e;$4d.$im.includeHiddenRows=$4d.$im.includeHiddenRows&&($4e==="range");$4d.getRows().forEach(function($A){$k.$it($A);});var $D=$4d.getWidth();var $V=$4d.getHeight();var $4c;switch($0G.toLowerCase()){case "svg":$4c=new DayPilot.Svg($D,$V);break;case "png":$4c=new DayPilot.Canvas($D,$V,"image/png",$4L);break;case "jpeg":$4c=new DayPilot.Canvas($D,$V,"image/jpeg",$4L,$j.quality);break;default:throw "Export format not supported: "+$0G;};var $4h=$4d.getRectangles();var $4M=$4d.getImages();var $4N=new DayPilot.StyleReader($k.nav.top).get("background-color");var $4B=new DayPilot.StyleReader($k.nav.corner).get("background-color");var $4C=new DayPilot.StyleReader($k.nav.top).get("border-top-color");var $4O=new DayPilot.StyleReader($k.nav.divider).get("background-color");var $4D=DayPilot.list($k.elements.events).filter(function($06){return !$06.event.data.type;}).map(function($06){return $06.firstChild;}).last();var $4E=new DayPilot.StyleReader($4D).get("border-right-color");var $4P=$4d.getFont($4D);var $4Q=new DayPilot.StyleReader($4D).get("color");var $4R=new DayPilot.StyleReader($4D).get("background-color");$4R=DayPilot.Util.isTransparentColor($4R)?"white":$4R;var $4S=$4d.fakeMilestone();var $4T=new DayPilot.StyleReader($4S.firstChild).get("background-color");DayPilot.de($4S);var $4U=$4d.fakeGroup();var $4V=new DayPilot.StyleReader($4U.firstChild).get("background-color");DayPilot.de($4U);var $4v=$4d.fakeDurationBar();var $4W=new DayPilot.StyleReader($4v.firstChild).get("background-color");var $4X=new DayPilot.StyleReader($4v.firstChild.firstChild).get("background-color");DayPilot.de($4v);var $4Y=$4d.fakeEventLeft();var $4Z=new DayPilot.StyleReader($4Y).get("color");DayPilot.de($4Y);var $T=$4d.fakeCell();var $50=new DayPilot.StyleReader($T).get("background-color");DayPilot.Util.addClass($T,$k.$eC("_cell_business"));var $51=new DayPilot.StyleReader($T).get("background-color");var $52=$4d.getFont($T);var $53=new DayPilot.StyleReader($T).get("color");DayPilot.de($T);var $54=DayPilot.Util.firstPropValue($k.$dJ.linesVertical);var $55=new DayPilot.StyleReader($54).get("background-color");var $56=$k.$dJ.timeHeader["0_0"];var $57=$4d.getFont($56);var $58=new DayPilot.StyleReader($56).get("color");var $59=new DayPilot.StyleReader($56).get("background-color");var $5a=$4d.fakeRowHeader();var $5b=$4d.getFont($5a);var $5c=new DayPilot.StyleReader($5a).get("color");var $5d=new DayPilot.StyleReader($5a).get("background-color");DayPilot.de($5a);if($k.rowHeaderColumns&&$k.$hl&&$k.$hl.blocks[0]){var $5e=$k.$hl.blocks[0].section.firstChild;var $5f=new DayPilot.StyleReader($5e).getFont();var $5g=new DayPilot.StyleReader($5e).get("color");};var $4q=$4d.getViewportOffsetStart();var $5h=$4d.getViewportOffsetTop();$4c.fillRect($4h.main,"white");$4c.fillRect($4h.main,$4N);$4c.fillRect($4h.corner,$4B);var $5i=$4h.corner.x;$0g.$iu().forEach(function exportRowHeaderColumn($5j,i){var $D=$k.rowHeaderCols[i];var $5k={};$5k.x=$5i;$5k.w=$D+1;$5k.y=$4h.corner.h-$k.$hl.height;$5k.h=$k.$hl.height+1;var $5l=3;var $5m=DayPilot.Util.copyProps($5k);$5m.x+=$5l;$5m.w-=$5l;var $5n=$5j.name||$5j.title||"";$4c.text($5m,$5n,$5f,$5g,"left",0,"center");$4c.rect($5k,$4C);$5i+=$D;});var $5o=typeof $k.onBeforeTimeHeaderExport==="function";var $5p=typeof $k.onBeforeRowHeaderRender==="function";var $5q=typeof $k.onBeforeRowHeaderExport==="function";var $5r=typeof $k.onBeforeCellExport==="function";$4d.getRows().forEach(exportRow);$4d.getRowsTop().forEach(exportRow);$4d.getRowsBottom().forEach(exportRow);function exportRow($A){var top=$4h.grid.y+$4d.$il($A)-$4d.$in($A);var $5s=DayPilot.Util.atLeast(0,$4h.grid.y-top);top+=$5s;var $5t=$k.treeEnabled&&!$A.isNewRow;var $5u=10;var $5v=10;var $R=$5t?$A.level*$k.treeIndent+$k.treeImageMarginLeft:3;if($k.rowMoveHandling!=="Disabled"){$R+=$5v;};var $5k={"x":0,"y":top,"w":$4h.grid.x+1,"h":$A.height+1};var $0a=$A;if($5p){var $5w=$k.$iv($A);$0a=$5w.row;};var $n={};$n.text=$0a.html;var $5x=$0g.$iu();if($5x.length>0&&$k.$gf()){$n.text=$0a.columns[0].text;};$n.backColor=$0a.backColor||$5d;$n.fontSize=$5b.size;$n.fontFamily=$5b.family;$n.fontStyle=$5b.style;$n.fontColor=$0a.fontColor||$5c;$n.borderColor=$4C;$n.horizontalAlignment="left";$n.verticalAlignment="center";$n.row=$k.$gH($A);$n.row.columns=[];$0a.columns&&$0a.columns.forEach(function(c){var $5y=DayPilot.Util.copyProps(c,{},["text","html","backColor","horizontalAlignment","verticalAlignment"]);$5y.text=c.text||c.html;$5y.fontSize=$n.fontSize;$5y.fontFamily=$n.fontFamily;$5y.fontStyle=$n.fontStyle;$5y.fontColor=$n.fontColor;$5y.horizontalAlignment=$5y.horizontalAlignment||$n.horizontalAlignment;$5y.verticalAlignment=$5y.verticalAlignment||$n.verticalAlignment;$5y.backColor=$5y.backColor||$n.backColor;$n.row.columns.push($5y);});if($A.isNewRow){$n.text=$k.rowCreateHtml;};if($5q){$k.onBeforeRowHeaderExport($n);};var $5z=10;var $5A=$5z/2;var $5B={"x":$R,"y":top+$k.treeImageMarginTop+2,"w":10,"h":$5z};var $5C={"size":$n.fontSize,"family":$n.fontFamily,"style":$n.fontStyle};if($n.verticalAlignment==="center"){$5B.y=top+$5k.h/2-$5A;};var $5D=$5t?$R+$5u+3:$R;var $5E=$5t?$5k.w-$5D:$5k.w;var $5m={"x":$5D,"y":top,"w":$5E,"h":$A.height+1};if($k.rowHeaderCols){$5m.w=$k.rowHeaderCols[0]-$5D;};$4c.fillRect($5k,$n.backColor);$4c.text($5m,$n.text,$5C,$n.fontColor,$n.horizontalAlignment,0,$n.verticalAlignment);$4c.rect($5k,$n.borderColor);if($5t){var $5F=null;if(DayPilot.list($A.children).isEmpty()){$5F=$4M.nochildren;}else if($A.expanded||$4d.$im.includeHiddenRows){$5F=$4M.collapse;}else{$5F=$4M.expand;};$4c.image($5B,$5F);};if($k.rowHeaderCols){var $R=$5k.x;DayPilot.list($k.rowHeaderCols).forEach(function(w,i){var $5G=(i===0);if(!$5G){var x=$k.$gf()?i:i-1;var $5j=$n.row.columns[x]||{};var $5H=DayPilot.Util.copyProps($5k);$5H.x=$R;$5H.w=w+1;var $5l=3;var $5I=DayPilot.Util.copyProps($5H);$5I.x+=$5l;$5I.w-=$5l;var $4N=$5j.backColor||$n.backColor;$4c.fillRect($5H,$4N);if($5j.text){$4c.text($5I,$5j.text,{"size":$5j.fontSize,"family":$5j.fontFamily,"style":$5j.fontStyle},$5j.fontColor,$5j.horizontalAlignment,0,$5j.verticalAlignment);};$4c.rect($5H,$n.borderColor);};$R+=w;});}};$4d.getRows().forEach(function($A,y,$1l){var y=$A.index;$4d.getTimeline().forEach(function($T,x,$5J){var x=$5J.offset+x;exportCell(x,y,$A.grid);});});function exportCell(x,y,$2o){var $T=$k.itline[x];var $A=$k.$hr[$2o].rowlist[y];var $0a=$k.$hT(x,y,$2o);var $5K=$0a.business;var $n=$k.$iw(x,y,$2o);var $5n=$0a.html;var $5L=$0a.horizontalAlignment||"left";var $4N=$0a.backColor||($5K?$51:$50);if($5r){if(!$n){$n={};$n.cell=$k.cells.findXy(x,y,$2o)[0];};$n.text=$5n;$n.horizontalAlignment=$5L;$n.backColor=$4N;$k.onBeforeCellExport($n);$5n=$n.text;$5L=$n.horizontalAlignment;$4N=$n.backColor;};var top=$4h.grid.y+$4d.$il($A)-$4d.$in($A);var $5s=DayPilot.Util.atLeast(0,$4h.grid.y-top);top+=$5s;var $R=$4h.grid.x+$T.left-$4q;var $5M=DayPilot.Util.atLeast(0,$4h.grid.x-$R);$R+=$5M;var $5k={"x":$R,"y":top,"w":$T.width,"h":$A.height};$4c.fillRect($5k,$4N);var $5N={};$5N.x=$5k.x+1;$5N.y=$5k.y+1;$5N.w=$5k.w-2;$5N.h=$5k.h-2;if($5n){$4c.text($5N,$5n,$52,$53,$5L);}};$4d.getRows().forEach(exportMatrixHorizonal);function exportMatrixHorizonal($A){var top=$4h.grid.y+$4d.$il($A)-$4d.$in($A);var $5s=DayPilot.Util.atLeast(0,$4h.grid.y-top);top+=$5s;if(top===$4h.grid.y){return;};if($A.grid==="main"&&top>$4d.bottomFrozenY()){return;};$4c.line($4h.gridContent.x+1,top,$4h.gridContent.x+$4h.gridContent.w-1,top,$55);if($A.grid==="top"){if($A===$k.$hr.top.rowlist.last()){$4c.line($4h.gridContent.x+1,top+$A.height,$4h.gridContent.x+$4h.gridContent.w-1,top+$A.height,$55);}}};$4d.getTimeline().forEach(function($T){exportMatrixVertical($T,"main");});function exportMatrixVertical($T,$2l){var $R=$4h.grid.x+$T.left-$4q;var $5M=DayPilot.Util.atLeast(0,$4h.grid.x-$R);$R+=$5M;if($R===$4h.grid.x){return;};var top=$4h.grid.y+1;var $00=$4h.grid.y+$4h.grid.h-2;if($2l==="top"){$00=top+$k.$hr.top.height;};if($2l==="bottom"){top=$4d.bottomFrozenY();};$4c.line($R,top,$R,$00,$55);};var $5O=$4d.getTimeline().last();(function($T){if(!$T){return;};var $R=$4h.grid.x+$T.left-$4q+$T.width;$4c.line($R,$4h.grid.y+1,$R,$4h.grid.y+$4h.grid.h-2,$55);})($5O);$4d.getSeparators().forEach(function($4u){var $R=$4h.grid.x+$4u.left-$4q;$4c.line($R,$4h.grid.y+1,$R,$4h.grid.y+$4h.grid.h-2,$4u.color);});$4d.getLinks().forEach(function exportLink(link){link.map(function($5P){return $4d.shiftableSegment($5P).shift($4h.grid.x-$4q,$4h.grid.y-$5h);}).forEach(function($5P){switch($5P.type){case "HorizontalLine":$4c.line($5P.startX,$5P.startY,$5P.endX,$5P.endY,"red");break;case "VerticalLine":$4c.line($5P.startX,$5P.startY,$5P.endX,$5P.endY,"red");break;case "ArrowRight":$4c.triangle({x:$5P.startX-10,y:$5P.startY-4.5,w:10,h:10},"red");break;case "ArrowDown":$4c.triangle({x:$5P.startX-4.5,y:$5P.startY-10,w:10,h:10},"red",90);break;case "ArrowLeft":$4c.triangle({x:$5P.startX,y:$5P.startY-4.5,w:10,h:10},"red",180);break;case "ArrowUp":$4c.triangle({x:$5P.startX-4.5,y:$5P.startY,w:10,h:10},"red",-90);break;}});});$4d.getEvents().forEach(exportEvent);function exportEvent(e){var $A=$k.$hr[e.part.grid].rowlist[e.part.dayIndex];var $2K=$4d.$il($A);var $D=e.part.width;var $5Q=e.client&&e.client.barVisible&&e.client.barVisible();var top=$4h.grid.y+$2K+e.part.top-$4d.$in($A);var $R=$4h.grid.x+e.part.left-$4q+1;var $5M=DayPilot.Util.atLeast(0,$4h.grid.x-$R);$R+=$5M;$D-=$5M;var $0c=e.cache||e.data;var $5R=$0c.barColor||$4X;var $5S=$0c.barBackColor||$4W;var $4N=$0c.backColor||$4R;var $5T=$0c.fontColor||$4Q;var $5U=e.part.barLeft;var $5V=e.part.barWidth;if($k.durationBarMode==="PercentComplete"){$5U=0;$5V=DayPilot.Util.atLeast(0,Math.floor(e.part.width*($0c.complete||0)/100));};if(e.data.type==="Milestone"){$4N=$4T;};var $5W=4;var $5X=2;var $5Y=2;var $n={};$n.e=e;$n.text=e.text?e.text():e.client.html();$n.areas=$0c.areas;$n.fontSize=$4P.size;$n.fontFamily=$4P.family;$n.fontStyle=$4P.style;$n.fontColor=$5T;$n.backColor=$4N;$n.borderColor=$4E;$n.horizontalAlignment="left";$n.verticalAlignment="center";$n.barHeight=$5W;$n.textPadding=$5Y;if(typeof $k.onBeforeEventExport==="function"){$k.onBeforeEventExport($n);};var $5k={"x":$R,"y":top,"w":$D,"h":e.part.height};$4c.groupStart({"type":"event","id":e.id()});if(e.data.type==="Milestone"){drawMilestone();}else if(e.data.type==="Group"){drawGroup();}else{drawEvent();};var $5Z=$0c.textLeft||$0c.htmlLeft;if($5Z){var $60={"size":$n.fontSize,"family":$n.fontFamily,"style":$n.fontStyle};var $61=$4c.textWidth($5Z,$60);var $62={"x":$R-($k.eventHtmlLeftMargin+$61),"y":top,"w":$61,"h":e.part.height};$4c.text($62,$5Z,$60,$4Z);};var $63=$0c.textRight||$0c.htmlRight;if($63){var $64={"size":$n.fontSize,"family":$n.fontFamily,"style":$n.fontStyle};var $65=$4c.textWidth($63,$64);var $66={"x":$R+$D+$k.eventHtmlRightMargin,"y":top,"w":$65,"h":e.part.height};$4c.text($66,$63,$64,$4Z);};$4c.groupEnd();var $67=e.versions||[];$67.forEach(drawVersion);function drawMilestone(){var $2N=$n.backColor;$4c.diamond($5k,$2N);};function drawGroup(){var $68={"x":$R,"y":top,"w":$D,"h":$n.barHeight};var $69={"x":$R+$5U,"y":top,"w":$5V,"h":$n.barHeight};var $2N=$4V;var $6a={x:$R,y:top+5,h:$5k.h-6-5,w:$5k.w};$4c.fillRect($6a,$2N);$4c.upperRightCorner({x:$R+$5k.w-6,y:$6a.y+$6a.h,w:6,h:6},$2N);$4c.upperLeftCorner({x:$R,y:$6a.y+$6a.h,w:6,h:6},$2N);if($5Q){$4c.fillRect($68,$5S);if($5V>0){$4c.fillRect($69,$5R);}}};function drawVersion($29,i){var $6b=$0c.versions[i];$4c.groupStart({"type":"event-version","event-id":e.id()});var $D=$29.width;var top=$4h.grid.y+$2K+$29.top-$5h;var $5s=DayPilot.Util.atLeast(0,$4h.grid.y-top);top+=$5s;var $R=$4h.grid.x+$29.left-$4q+1;var $5M=DayPilot.Util.atLeast(0,$4h.grid.x-$R);$R+=$5M;$D-=$5M;var $V=$k.eventVersionHeight;var $5Q=$k.durationBarVisible&&!$6b.barHidden;var $5W=$5Q?$k.durationBarHeight:0;var $5k={"x":$R,"y":top,"w":$D,"h":$V};$4c.fillRect($5k,$6b.backColor||$n.backColor);var $6c={"x":$R+$5X,"y":top+$5W,"w":DayPilot.Util.atLeast(0,$D-$5X),"h":$V-$5W};$4c.text($6c,$6b.text,{"size":$n.fontSize,"family":$n.fontFamily,"style":$n.fontStyle},$n.fontColor,$n.horizontalAlignment,$n.textPadding,$n.verticalAlignment);$4c.rect($5k,$6b.borderColor||$n.borderColor);if($5Q){var $5S=$6b.barBackColor||$4W;var $5R=$6b.barColor||$4X;var $5U=100*$29.barLeft/($D);var $5V=Math.ceil(100*$29.barWidth/($D));var $68={"x":$R,"y":top+1,"w":$D,"h":$5W};var $69={"x":$R+$5U,"y":top+1,"w":$5V,"h":$5W};$4c.fillRect($68,$5S);if($5V>0){$4c.fillRect($69,$5R);}};$4c.groupEnd();};function drawEvent(){var $68={"x":$R,"y":top,"w":$D,"h":$n.barHeight};var $69={"x":$R+$5U,"y":top,"w":$5V,"h":$n.barHeight};var $6c={"x":$R+$5X,"y":top+$n.barHeight,"w":$D-$5X,"h":e.part.height-$n.barHeight};$4c.fillRect($5k,$n.backColor);$4c.text($6c,$n.text,{"size":$n.fontSize,"family":$n.fontFamily,"style":$n.fontStyle},$n.fontColor,$n.horizontalAlignment,$n.textPadding,$n.verticalAlignment);$4c.rect($5k,$n.borderColor);if($5Q){$4c.fillRect($68,$5S);if($5V>0){$4c.fillRect($69,$5R);}};DayPilot.list($n.areas).forEach(function($N){if(!DayPilot.Areas.isVisible($N)){return;};var $6d={"type":"event-area",};if(typeof $N.id!=="undefined"){$6d.id=$N.id;};$4c.groupStart($6d);var $6e=0;if(typeof $N.left==="number"){$6e=$N.left;}else if($N.start){$6e=$k.getPixels(new DayPilot.Date($N.start)).left-e.part.left;}else if(typeof $N.right==="number"){$6e=e.part.width-$N.right-$N.width;};var $D=$N.width||$N.w;if(typeof $N.right==="number"){$D=(e.part.width-$N.right)-$6e;}else if($N.end){$D=$k.getPixels(new DayPilot.Date($N.end)).left-$N.left-e.part.left+1;};var $6f=$N.top||0;var $V=$N.height||$N.h;if(typeof $N.bottom==="number"){$V=(e.part.height-$N.bottom)-$6f;};if(!$V){$V=e.part.height-$6f;};var $5k={"x":$R+$6e,"y":top+$6f,"w":$D,"h":$V};if($N.backColor){$4c.fillRect($5k,$N.backColor);};if($N.icon){var $6g=$k.$ii.areaIcon($N.icon);$4c.text($5k,$6g.text,$6g.font,$N.fontColor||$n.fontColor,$N.horizontalAlignment,$N.padding,$N.verticalAlignment);}else if($N.image){var $4d=new Image();$4d.src=$N.image;$4c.image($5k,$4d);}else if($N.text||$N.html){$4c.text($5k,$N.text||$N.html,{"size":$N.fontSize||$n.fontSize,"family":$N.fontFamily||$n.fontFamily,"style":$N.fontStyle||$n.fontStyle},$N.fontColor||$n.fontColor,$N.horizontalAlignment,$N.padding,$N.verticalAlignment);};$4c.groupEnd();});}};$4d.getRowsTopAndBottom().forEach(function($A,y,$1l){var y=$A.index;$4d.getTimeline().forEach(function($T,x,$5J){var x=$5J.offset+x;exportCell(x,y,$A.grid);});exportMatrixHorizonal($A);});$4d.getTimeline().forEach(function($T){exportMatrixVertical($T,"top");exportMatrixVertical($T,"bottom");});$4d.getEventsFrozen().forEach(exportEvent);DayPilot.list($k.timeHeader).forEach(function($04,y){$4d.getTimeHeader(y,$4e).forEach(function exportTimeHeaderCell($T){var $R=$4h.grid.x+$T.left-$4q;var $D=$T.width;var $6h=$6i.timeHeader(y);var top=$6h.top;var $V=$6h.height;var $n={};$n.header={};$n.header.start=$T.start;$n.header.end=$T.end;$n.header.level=y;$n.header.text=$T.text;$n.header.html=$T.innerHTML;$n.text=$T.innerHTML;$n.backColor=$T.backColor;$n.verticalAlignment="center";$n.horizontalAlignment="center";if($5o){$k.onBeforeTimeHeaderExport($n);};var $5M=DayPilot.Util.atLeast(0,$4h.grid.x-$R);$R+=$5M;$D-=$5M;var $5M=DayPilot.Util.atLeast(0,$R+$D-($4h.grid.x+$4h.grid.w));$D-=$5M;var $5H={"x":$R,"y":top,"w":$D+1,"h":$V+1};$4c.fillRect($5H,$n.backColor||$59);$4c.rect($5H,$4C);$4c.text($5H,$n.text,$57,$58,$n.horizontalAlignment,0,$n.verticalAlignment);});});$4c.rect($4h.main,$4C);$4c.line($4h.grid.x,0,$4h.grid.x,$4h.main.h,$4O);$4c.line(0,$4h.grid.y,$4h.main.w,$4h.grid.y,$4O);return $4c;};$4d.areaIcon=function($6j){var el=$4d.fakeIcon($6j);document.body.appendChild(el);var $5n=window.getComputedStyle(el,":before").content.replace(/"/g,"");var $6k=new DayPilot.StyleReader(el).getFont();document.body.removeChild(el);return{"text":$5n,"font":$6k}};$4d.shiftableSegment=function($5P){return{"startX":$5P.startX,"endX":$5P.endX,"startY":$5P.startY,"endY":$5P.endY,"type":$5P.type,"shift":function(x,y){return $4d.shiftableSegment({"startX":$5P.startX+x,"endX":$5P.endX+x,"startY":$5P.startY+y,"endY":$5P.endY+y,"type":$5P.type,});}};};this.$ix={};var $6l=this.$ix;$6l.findJointDivs=function(e){var id=e.data.join;if(!id){return DayPilot.list();};var $2T=DayPilot.list($k.elements.events).filter(function($04){return $04.event.data.join===id&&$04.event!==e;});return $2T;};this.$iy={};var $1f=this.$iy;$1f.divs=[];$1f.list=[];$1f.forbidden=false;$1f.additional=function(){var $02=DayPilot.list();var $6m=$k.multiselect.isSelected(DayPilotScheduler.resizing.event);var $6n=$k.allowMultiResize;var $02=DayPilot.list();if($6m&&$6n){$02=DayPilot.list($k.multiselect.$fL).filter(function($04){return $04!==DayPilotScheduler.resizing;});};if($k.jointEventsResize){var j=$6l.findJointDivs(DayPilotScheduler.resizingEvent);$02=$02.concat(j);};return $02;};$1f.update=function(){$1f.clear();$1f.draw();};$1f.clear=function(){DayPilot.de($1f.divs);$1f.divs=[];};$1f.isInvalid=function(){return $1f.divs.some(function($06){return $06.info.invalid;});};$1f.$iz=function(){return $k.$iA($1f.list);};$1f.$iB=function(){if(!DayPilotScheduler.resizing){return;};var e=DayPilotScheduler.resizingEvent;var $2n=DayPilotScheduler.resizingShadow;var $6o=$2n.start.getTime()-e.start().getTime();var $6p=$2n.end.getTime()-e.end().getTime();var $6q=0;$1f.list=[];$1f.forbidden=false;$1f.invalid=false;$1f.rowoffset=$6q;$1f.additional().forEach(function($04){if(!$04.event){return;};var event=$04.event;var $A=$k.rowlist[event.part.dayIndex+$6q];if(!$A){$1f.invalid=true;return;};var $0z=event.start().addTime($6o);var $0A=event.end().addTime($6p);var $1g={};$1g.$={};if($0z>=$0A){$1g.invalid=true;if($6o>0){$1g.$.$iC=$0A.addSeconds(-1);}else if($6p<0){$1g.$.$iD=$0z.addSeconds(1);}};$1g.event=event;$1g.start=$0z;$1g.end=$0A;$1g.$.$iE=$A;$1f.list.push($1g);});};$1f.$iF=function(){var $6q=0;$1f.list.forEach(function($1g){var event=$1g.event;var $A=$1g.$.$iE;var top=event.part.top+$A.top;var $V=event.part.height;if($6q){top=$A.top;$V=$A.height;};var $3T=$k.getPixels($1g.start);var $3U=$k.getPixels($1g.end);if($1g.$.$iC){$3T=$k.getPixels($1g.$.$iC);};if($1g.$.$iD){$3U=$k.getPixels($1g.$.$iD);};var $0Y=DayPilot.DateUtil.diff(event.rawend(),event.start());$0Y=DayPilot.Util.atLeast($0Y,1);var $3u=$0g.useBox($0Y);var $R=($3u)?$3T.boxLeft:$3T.left;var $D=($3u)?($3U.boxRight-$R):($3U.left-$R);var $06=document.createElement("div");$06.style.position="absolute";$06.style.left=$R+"px";$06.style.top=top+"px";$06.style.height=$V+"px";$06.style.width=$D+"px";$06.style.zIndex=101;$06.style.overflow="hidden";$06.className=$k.$eC("_shadow");$06.info=$1g;var $09=document.createElement("div");$09.className=$k.$eC("_shadow_inner");$06.appendChild($09);$k.$eq.appendChild($06);$1f.divs.push($06);});if($1f.invalid){var $4w=$k.$eC("_shadow_overlap");DayPilot.list($1f.divs).forEach(function($04){DayPilot.Util.addClass($04,$4w);});return;};DayPilot.list($1f.divs).forEach(function($04){if(!$04.info){return;};var $06=$04;var $1g=$04.info;var event=$04.info.event;var $A=$k.rowlist[event.part.dayIndex+$6q];var $3T=$k.getPixels($1g.start);var $3U=$k.getPixels($1g.end);var $R=$3T.left;var $D=$3U.left-$R;if($04.info.invalid){DayPilot.Util.addClass($04,$k.$eC("_shadow_invalid"));};var $6r=DayPilot.list($1f.list).map(function($04){return $04.event.data;}).add(DayPilotScheduler.resizing.event.data);$k.$iG($06,$A,$R,$D,$6r);$k.$iH($06,$1g.start,$1g.end,event.resource());if($06.overlapping){$1g.overlapping=true;$1f.forbidden=true;}});};$1f.draw=function(){$1f.$iB();$1f.$iF();};this.$iI={};var $6s=this.$iI;$6s.modifiedProps=function(){var $6t=new DayPilot.Scheduler();var $6u=DayPilot.Util.members($k,2);var $l=[];$l.push("<div id='dp'></div>");$l.push("<script>");$l.push("var dp = new DayPilot.Scheduler('dp');");$6u.properties.forEach(function($04){var name=$04.name;var $4o=name.split(".");var $6v=$4o.length>1;var $6w,$6x;if($6v){var $6y=$4o[0];var $6z=$4o[1];$6w=JSON.stringify($6t[$6y][$6z]);$6x=JSON.stringify($k[$6y][$6z]);}else{$6w=JSON.stringify($6t[name]);$6x=JSON.stringify($k[name]);};if($6w!==$6x){$l.push("dp."+name+" = "+$6x+";");}});$6u.events.forEach(function($04){var name=$04.name;if(typeof $k[name]==="function"){$l.push("dp."+name+" = "+$k[name].toString()+";");}});$l.push("dp.init();");$l.push("</script>");return $l.join("\n");};this.$iJ={};var mm=this.$iJ;mm.divs=[];mm.list=[];mm.forbidden=false;mm.$iK=0;mm.verticalAll=function(){return $k.multiMoveVerticalMode==="All";};mm.additional=function(){var $02=DayPilot.list();var $6A=$k.$fd;var $6m=$k.multiselect.isSelected(DayPilotScheduler.movingEvent);var $6n=$k.allowMultiMove;if($6m&&$6n){$02=DayPilot.list($k.multiselect.$fL).filter(function($04){return $04!==DayPilotScheduler.moving&&$04!==$6A.moving;});};if($k.jointEventsMove){var j=$6l.findJointDivs(DayPilotScheduler.movingEvent);$02=$02.concat(j);};return $02;};mm.update=function(){mm.clear();mm.draw();};mm.$iz=function(){return $k.$iA(mm.list);};mm.$iB=function(){mm.list=[];mm.rowoffset=0;if(!DayPilotScheduler.moving){return;};var e=DayPilotScheduler.movingEvent;var $O=DayPilotScheduler.movingShadow.start;var offset=$O.getTime()-e.start().getTime();var $6B=e.part.dayIndex;var $6C=DayPilot.indexOf($k.rowlist,DayPilotScheduler.movingShadow.row);var $6q=$6C-$6B;if(!mm.verticalAll()){$6q=0;};mm.forbidden=false;mm.invalid=false;mm.rowoffset=$6q;mm.additional().forEach(function($04){if(!$04.event){return;};var event=$04.event;var $A=$k.rowlist[event.part.dayIndex+$6q];if(!$A){mm.invalid=true;return;};var $0z=event.start().addTime(offset);var $0A=event.end().addTime(offset);var $1g={};$1g.event=event;$1g.start=$0z;$1g.end=$0A;$1g.resource=$A.id;mm.list.push($1g);});};mm.$iF=function(){var $6q=mm.rowoffset;mm.list.forEach(function($1g){var $0z=$1g.start;var $0A=$1g.end;var event=$1g.event;var $3T=$k.getPixels($0z);var $3U=$k.getPixels($0A);var $0Y=DayPilot.DateUtil.diff(event.rawend(),event.start());$0Y=DayPilot.Util.atLeast($0Y,1);var $3u=$0g.useBox($0Y);var $A=$k.$et($1g.resource);if(!$A){mm.invalid=true;return;};$1g.$={};$1g.$.$iE=$A;var $R=($3u)?$3T.boxLeft:$3T.left;var $D=($3u)?($3U.boxRight-$R):($3U.left-$R);var top=event.part.top+$A.top;var $V=event.part.height;if($1g.resource!==$1g.event.data.resource){top=$A.top;$V=$A.height;};var $06=document.createElement("div");$06.style.position="absolute";$06.style.left=$R+"px";$06.style.top=top+"px";$06.style.height=$V+"px";$06.style.width=$D+"px";$06.style.overflow="hidden";$06.className=$k.$eC("_shadow");$06.info=$1g;var $09=document.createElement("div");$09.className=$k.$eC("_shadow_inner");$06.appendChild($09);$k.$eq.appendChild($06);mm.divs.push($06);});if(mm.invalid){var $4w=$k.$eC("_shadow_overlap");DayPilot.list(mm.divs).forEach(function($04){DayPilot.Util.addClass($04,$4w);});return;};DayPilot.list(mm.divs).forEach(function($04){if(!$04.info){return;};var $06=$04;var $1g=$04.info;var event=$04.info.event;var $A=$04.info.$.$iE;var $3T=$k.getPixels($1g.start);var $3U=$k.getPixels($1g.end);var $R=$3T.left;var $D=$3U.left-$R;var $6r=DayPilot.list(mm.list).map(function($04){return $04.event.data;}).add(DayPilotScheduler.movingEvent.data);$k.$iG($06,$A,$R,$D,$6r);$k.$iH($06,$1g.start,$1g.end,$1g.resource);$1g.overlapping=false;if($06.overlapping){$1g.overlapping=true;mm.forbidden=true;}});};mm.draw=function(){mm.$iB();mm.$iF();};mm.clear=function(){DayPilot.de(mm.divs);mm.divs=[];};this.$iA=function($02,$6D){$6D=["$"].concat($6D||[]);return $02.map(function($1g){var $1L=$1g;var $1M={};for(var name in $1L){var $6E=$6D&&DayPilot.indexOf($6D,name)!==-1;if($1L.hasOwnProperty(name)&&typeof $1L[name]!=='undefined'){if(!$6E){$1M[name]=$1L[name];}else{Object.defineProperty($1M,name,{"value":$1L[name]});}}};return $1M;});};this.$iL=function(){var $2k=$k.coords;var $4a=DayPilotScheduler.resizing.dpBorder;var e=DayPilotScheduler.resizing.event;var $6F=e.part.left;if($4a=="right"){$6F+=e.part.width;};var $6G=DayPilotScheduler.resizing.event.calendar.cellWidth;var $6H=DayPilotScheduler.resizing.event.part.width;var $6I=DayPilotScheduler.resizing.event.part.left;var $6J=0;var $6K=($2k.x-$6F);var $6L,$6M;var $3N=$k.snapToGrid&&$k.snapToGridEventResizing;if($4a==='right'){$6L=$6I;if($3N){var $0S=$k.$f9($6H+$6I+$6K).cell;var $6N=$k.$f9($6I).cell;var $6O=($6N.left+$6N.width)-$6I;var $6P=$0S.left+$0S.width;$6M=$6P-$6I;if($6M<$6O){$6M=$6O;}}else{$6M=$6H+$6K;};var $C=$k.$eF();if($6I+$6M>$C){$6M=$C-$6I;};DayPilotScheduler.resizingShadow.left=$6I;DayPilotScheduler.resizingShadow.width=$6M;}else if($4a==='left'){if($3N){if($6K>=$6H){$6K=$6H;};$6L=Math.floor((($6I+$6K)+0)/$6G)*$6G;if($6L<$6J){$6L=$6J;}}else{$6L=$6I+$6K;};$6M=$6H-($6L-$6I);var $S=$6I+$6H;var $6Q=$6G;if(!$3N){$6Q=1;}else if($k.useEventBoxes==="Never"){if($6H<$6G){$6Q=$6H;}else{$6Q=1;}};if($6M<$6Q){$6M=$6Q;$6L=$S-$6M;};DayPilotScheduler.resizingShadow.left=$6L;DayPilotScheduler.resizingShadow.width=$6M;}else{throw "Invalid dpBorder.";};(function checkOverlap(){DayPilotScheduler.resizingShadow.overlapping=false;var ev=DayPilotScheduler.resizing.event;var $A=$k.rowlist[ev.part.dayIndex];var $R=$6L;var $D=$6M;$k.$iG(DayPilotScheduler.resizingShadow,$A,$R,$D,ev.data);var $2n=DayPilotScheduler.resizingShadow;if($2n.start){var $y={"start":$2n.start,"end":$k.$fx($2n.end)};$k.$iH(DayPilotScheduler.resizingShadow,$y.start,$y.end,$A.id);}})();$k.$iM();};this.$ie=function(){var scroll=this.nav.scroll;if(!$k.coords){return;};if(!DayPilotScheduler.movingEvent){return;};$k.$eL();var $2n=DayPilotScheduler.movingShadow;var $2k=this.$hq(DayPilotScheduler.movingEvent);if($k.$hs($2k.rowIndex,$2k.grid)){return;};var ev=DayPilotScheduler.movingEvent;var $2i=(ev.cache&&typeof ev.cache.moveVDisabled!=='undefined')?!ev.cache.moveVDisabled:!ev.data.moveVDisabled;var $2j=(ev.cache&&typeof ev.cache.moveHDisabled!=='undefined')?!ev.cache.moveHDisabled:!ev.data.moveHDisabled;var $6R=!mm.additional().isEmpty();if($6R&&$k.multiMoveVerticalMode==="Disabled"){$2i=false;};if($2i&&$2k.grid!==$2n.grid){$2n.parentNode.removeChild($2n);$k.$hr[$2k.grid].divShadow.appendChild($2n);$2n.grid=$2k.grid;};var $6S=0;var $6T=0;(function calculatePosition(){if($k.$dB){var y=$2k.relativeY;var $6U=$k.$f9($2k.left).x;var $A=$2k.row;var $5y=$A.evColumns[$6U];var e=$5y.events.find(function(e){return y<e.part.top+e.part.height+$k.eventMarginBottom;});if(!e){e=$5y.events.last();};if(e){$6T=e.part.top;$6S=DayPilot.indexOf($5y.events,e);if((y-e.part.top)>e.part.height/2){$6T=e.part.top+e.part.height+$k.eventMarginBottom/2;$6S+=1;}}}else{var y=$2k.relativeY;var $A=$2k.row;var top=0;var lh=$k.$g8.eventHeight();var $C=$A.lines.length;for(var i=0;i<$A.lines.length;i++){var $0H=$A.lines[i];if($0H.isFree($2k.left,$k.cellWidth)){$C=i;break;}};var $J=Math.floor((y-top+lh/ 2)/ lh);var $J=Math.min($C,$J);var $J=DayPilot.Util.atLeast(0,$J);$6S=$J;$6T=$k.rowMarginTop+$6S*($k.$g8.eventHeight()+$k.eventMarginBottom)+$k.eventMarginBottom/2;}})();if($6T>0){$6T-=3;};if($2i){if(!this.$hs($2k.rowIndex,$2k.grid)){$2n.row=$2k.row;$2n.style.height=DayPilot.Util.atLeast($2k.row.height,0)+'px';$2n.style.top=($2k.top)+'px';if($k.eventMoveToPosition){$2n.style.top=($2k.top+$6T)+"px";$2n.style.height="3px";$2n.line=$6S;}}else{var $1H=$2n.row;var $6V=1;if($1H){$6V=$2k.rowIndex<$1H.index?1:-1;}else{return;};for(var i=$2k.rowIndex;i!==$1H.index;i+=$6V){var $A=this.rowlist[i];if(!this.$hs(i,$2k.grid)&&!$A.hidden){$2n.style.top=($A.top)+'px';$2n.style.height=DayPilot.Util.atLeast($A.height,0)+'px';$2n.row=$A;if($k.eventMoveToPosition){$6S=$6V>0?0:$A.lines.length-1;$2n.style.top=($2k.top+$6T)+"px";$2n.style.height="3px";$2n.line=$6S;};break;}}}}else{var $2m=$k.$hr[ev.part.grid].rowlist;var $1H=$2m[ev.part.dayIndex];var $C=$1H.lines.length;for(var i=0;i<$1H.lines.length;i++){var $0H=$1H.lines[i];if($0H.isFree($2k.left,$k.cellWidth)){$C=i;break;}};if(!$6R){$2n.style.height=DayPilot.Util.atLeast($1H.height,0)+'px';$2n.style.top=($1H.top)+'px';};$2n.row=$1H;if($k.eventMoveToPosition&&!$6R){if($2k.row===$1H){$2n.style.top=($1H.top+$6T)+"px";$2n.style.height="3px";$2n.line=$6S;}else{var $J=($2k.rowIndex>$1H.index&&$C>0)?$C*$k.$g8.eventHeight()-3:0;$2n.style.top=($1H.top+$J)+"px";$2n.style.height="3px";$2n.line=0;}}};if($2j){$2n.style.left=$2k.left+'px';if($k.eventMoveToPosition){$2n.style.width=($k.cellWidth)+'px';}else{$2n.style.width=($2k.width)+'px';};$2n.start=$2k.start;$2n.end=$2k.end;}else{$2n.style.left=ev.part.left+"px";$2n.start=ev.start();$2n.end=ev.rawend();$2k.left=ev.part.left;};(function checkOverlap(){$2n.overlapping=false;var $A=$2n.row;var $s=ev.data;var $D=$2k.width;var $R=$2k.left;var $6r=DayPilot.list(mm.list).map(function($04){return $04.event.data;}).add($s);$k.$iG($2n,$A,$R,$D,$6r);$k.$iH(DayPilotScheduler.movingShadow,$2n.start,$2n.end,$2n.row.id);})();(function(){var $0P=$k.$gs;if($0P&&$0P.start.getTime()===$2n.start.getTime()&&$0P.end.getTime()===$2n.end.getTime()&&$0P.resource===$2n.row.id){return;};if($0P){DayPilot.Util.removeClass($2n,$0P.cssClass);$2n.firstChild.innerHTML="";};mm.clear();mm.$iB();var external=(DayPilotScheduler.drag?true:false)&&ev.part.external;var $n={};$n.start=$2n.start;$n.end=$k.$fx($2n.end);$n.duration=new DayPilot.Duration($n.start,$n.end);$n.e=ev;$n.external=external;$n.resource=$2n.row.id;$n.html=null;$n.row=$k.$gH($2n.row);$n.position=$2n.line;$n.overlapping=$2n.overlapping||mm.forbidden;$n.allowed=true;$n.left={};$n.left.html=$n.start.toString($k.eventMovingStartEndFormat,$0g.locale());$n.left.enabled=$k.eventMovingStartEndEnabled;$n.left.space=5;$n.left.width=null;$n.left.height=$k.eventHeight;$n.right={};$n.right.html=$n.end.toString($k.eventMovingStartEndFormat,$0g.locale());$n.right.enabled=$k.eventMovingStartEndEnabled;$n.right.space=5;$n.right.width=null;$n.right.height=$k.eventHeight;$n.multimove=mm.$iz();$n.shift=$k.coords.shift;$n.ctrl=$k.coords.ctrl;$n.meta=$k.coords.meta;$n.alt=$k.coords.alt;$n.areaData=DayPilot.Global.movingAreaData;$n.link=null;$n.cssClass=null;$n.html=null;var $1g={};$1g.event=ev;$1g.start=$n.start;$1g.end=$n.end;$1g.overlapping=$n.overlapping;$1g.resource=$n.resource;$n.multimove.splice(0,0,$1g);$k.$gs=$n;var $0u={"start":$n.start,"end":$n.end,"resource":$n.resource};if(typeof $k.onEventMoving==='function'){$k.onEventMoving($n);};mm.list=DayPilot.list($n.multimove,true);mm.list.splice(0,1);mm.$iF();$2n.allowed=$n.allowed;DayPilot.Util.addClass($2n,$n.cssClass);if($n.html){$2n.firstChild.innerHTML=$n.html;};if($n.start!==$0u.start||$n.end !==$0u.end){var $O=$n.start;var end=$k.$gp($n.end);$2n.start=$O;$2n.end=end;var $0Y=DayPilot.DateUtil.diff($O,end);$0Y=DayPilot.Util.atLeast($0Y,1);var $3u=$0g.useBox($0Y);var $R=$3u?$k.getPixels($O).boxLeft:$k.getPixels($O).left;var $S=$3u?$k.getPixels(end).boxRight:$k.getPixels(end).left;$2n.style.left=$R+"px";$2n.style.width=($S-$R)+"px";};if($n.resource!==$0u.resource){var $A=$k.$et($n.resource);if($A){$2n.row=$A;$2n.style.height=DayPilot.Util.atLeast($A.height,0)+'px';$2n.style.top=($A.top)+'px';if($k.eventMoveToPosition){$2n.style.top=($A.top+$6T)+"px";$2n.style.height="3px";$2n.line=$6S;}}};if($n.html){$2n.firstChild.innerHTML=$n.html;}else{$2n.firstChild.innerHTML="";};$k.$iN($2n,$n);$k.$iO(DayPilotScheduler.movingShadow,$n);if($n.link){if(DayPilot.Global.movingLink){DayPilot.Global.movingLink.clear();};DayPilot.Global.movingLink=$1u.drawLink2($n.link.from,$2n,$n.link);}})();};this.$iG=function($2n,$A,$R,$D,$s){if($k.allowEventOverlap){return;};(function calculate(){$2n.overlapping=false;for(var i=0;i<$A.lines.length;i++){var $0H=$A.lines[i];if(!$0H.isFree($R,$D,$s)){$2n.overlapping=true;return;}};var $6W=$A.index;var $6X=DayPilot.list(mr.list).some(function($04){var $06=$04.div;var $6Y=parseInt($06.style.left);var $6Z=parseInt($06.style.width);var ry=$04.start.y;if($2n===$06){return false;};if(ry!==$6W){return false;};return DayPilot.Util.overlaps($R,$R+$D,$6Y,$6Y+$6Z);});if($6X){$2n.overlapping=true;return;};var $70=DayPilot.list(mm.divs).some(function($06){var $04=$06.info;var $6Y=parseInt($06.style.left);var $6Z=parseInt($06.style.width);var ry=$04.$.$iE.index;if($2n===$06){return false;};if(ry!==$6W){return false;};return DayPilot.Util.overlaps($R,$R+$D,$6Y,$6Y+$6Z);});if($70){$2n.overlapping=true;return;};var $6X=DayPilot.list($1f.divs).some(function($06){var $04=$06.info;var $6Y=parseInt($06.style.left);var $6Z=parseInt($06.style.width);var ry=$04.$.$iE.index;if($2n===$06){return false;};if(ry!==$6W){return false;};return DayPilot.Util.overlaps($R,$R+$D,$6Y,$6Y+$6Z);});if($6X){$2n.overlapping=true;return;}})();var $3i=$2n.overlapping;var $4w=$k.$eC("_shadow_overlap");if($3i){DayPilot.Util.addClass($2n,$4w);}else{DayPilot.Util.removeClass($2n,$4w);}};this.$iH=function($2n,$O,end,$1B){var $71=($k.cellConfig&&$k.cellConfig.hasDisabled)||$k.$f1.$iP;if(!$71){return;};var $72=$k.$iQ($O,end,$1B);if($72){$2n.overlapping=true;};var $4w=$k.$eC("_shadow_overlap");if($2n.overlapping){DayPilot.Util.addClass($2n,$4w);}else{DayPilot.Util.removeClass($2n,$4w);}};this.$iQ=function($O,end,$1B){var $3q=null;if($k.viewType==="Days"){$3q=$k.$hV($O);};var $Q=$k.rows.find($1B,$3q).cells.forRange($O,end);if(!$Q){return false;};var $72=$Q.some(function($T){return $T.properties.disabled;});return $72;};this.$iN=function($2n,$n){var $4w=$k.$eC("_shadow_forbidden");if(!$n.allowed||mm.invalid){DayPilot.Util.addClass($2n,$4w);}else{DayPilot.Util.removeClass($2n,$4w);}};this.$iO=function($2n,$n){var $73=5;this.$iR();if($2n.calendar!==$k){return;};var $2l=$k.$i8($2n.grid);var $J={};$J.left=parseInt($2n.style.left);$J.top=parseInt($2n.style.top);$J.right=$J.left+parseInt($2n.style.width);var $D=$n.left.width||10;var $R=document.createElement("div");$R.style.position="absolute";$R.style.left=($J.left-$D-$n.left.space)+"px";$R.style.top=$J.top+"px";$R.style.height=$n.left.height+"px";$R.style.overflow="hidden";$R.style.boxSizing="border-box";$R.innerHTML=$n.left.html;$R.className=$k.$eC("_event_move_left");$R.onmousemove=$k.$iS;if(DayPilot.browser.ie){$R.style.display="block";};if($n.left.enabled){$2l.divHover.appendChild($R);if($n.left.width){$R.style.width=$D+"px";}else{$R.style.whiteSpace="nowrap";var $74=$R.offsetWidth;var $75=$J.left-$74-$n.left.space;$R.style.width=$74+"px";$R.style.left=$75+"px";var $76=$k.nav.scroll.scrollLeft;if($75<$76){$2l.divHover.removeChild($R);};var $77=$k.$iT()+($75-$76);if($77>0){$R.style.left=$77+"px";$R.style.top=($J.top-$2l.div.scrollTop+$2l.top)+"px";$k.nav.top.appendChild($R);$k.elements.hover.push($R);}}};var $D=$n.right.width||10;var $S=document.createElement("div");$S.style.position="absolute";$S.style.left=($J.right+$n.right.space)+"px";$S.style.top=$J.top+"px";$S.style.height=$n.right.height+"px";$S.style.overflow="hidden";$S.style.boxSizing="border-box";if($n.right.width){$S.style.width=$n.right.width+"px";}else{$S.style.whiteSpace="nowrap";};$S.innerHTML=$n.right.html;$S.className=this.$eC("_event_move_right");$S.onmousemove=$k.$iS;if(DayPilot.browser.ie){$S.style.display="block";};if($n.right.enabled){$2l.divHover.appendChild($S);var $78=$k.nav.scroll.scrollWidth;var $79=$J.right+$n.right.space+$S.offsetWidth;if($79>=$78){$2l.divHover.removeChild($S);}}};this.$iR=function(){$k.divHover.innerHTML='';$k.$hr.top.divHover.innerHTML='';$k.$hr.bottom.divHover.innerHTML='';DayPilot.de($k.elements.hover);$k.elements.hover=[];};this.$iU=function(){var $7a=$k.rowHeaderColumnDefaultWidth;if(this.rowHeaderColumns){var $7b=$0g.$iu();this.rowHeaderCols=DayPilot.Util.propArray($7b,"width",$7a);}else{this.rowHeaderCols=null;}};this.$iT=function(){var $4p=0;this.$iU();if(this.rowHeaderCols){for(var i=0;i<this.rowHeaderCols.length;i++){$4p+=this.rowHeaderCols[i];}}else{$4p=this.rowHeaderWidth;};return $4p;};this.$iV=function(){return this.$iW($k.progressiveRowRenderingPreload);};this.$iW=function($7c){var $7c=$7c||0;var $O=0;var end=$k.rowlist.length;var $7d=$k.progressiveRowRendering;if($7d){var $N=$k.$ev();$O=$N.yStart;end=$N.yEnd+1;$O=DayPilot.Util.atLeast(0,$O-$7c);end=Math.min($k.rowlist.length,end +$7c);};return{"start":$O,"end":end}};this.$iX=function(){if(!this.$ih()){return;};var $2b=false;var $7e=0;if(this.rowHeaderWidthAutoFit){var $7f=this.divHeader;if(!$7f){return;};if(!$7f.rows){return;};var $C=[];var $1C=$k.$iV();for(var i=$1C.start;i<$1C.end;i++){var $A=$7f.rows[i];if(!$A){continue;};if($A.hidden){continue;};if($A.autofitDone){continue;};$A.autofitDone=true;for(var j=0;j<$A.cells.length;j++){var $09=$A.cells[j].firstChild.firstChild;if(!$09||!$09.style){continue;};var $7g=$09.style.width;var $7h=$09.style.right;var $7i=$09.style.display;$09.style.position="absolute";$09.style.width="auto";$09.style.right="auto";$09.style.whiteSpace="nowrap";$09.style.display="block";var w=$09.offsetWidth+2;$09.style.position="";$09.style.width=$7g;$09.style.right=$7h;$09.style.display=$7i;$09.style.whiteSpace="";if(typeof $C[j]==='undefined'){$C[j]=0;};$C[j]=Math.max($C[j],w);}};this.$iU();if(this.rowHeaderCols){for(var i=0;i<$C.length;i++){if(this.rowHeaderCols[i]){if($C[i]>this.rowHeaderCols[i]){this.rowHeaderCols[i]=$C[i];$2b=true;};$7e+=this.rowHeaderCols[i];}}}else{$7e=this.rowHeaderWidth;var $7j=$0g.splitterWidth();if(this.rowHeaderWidth<$C[0]+$k.rowHeaderWidthMarginRight+$7j){$7e=$C[0]+$k.rowHeaderWidthMarginRight+$7j;$2b=true;}}};if($2b){if(this.$hl){this.$hl.widths=this.rowHeaderCols;this.$hl.updateWidths();DayPilot.Util.updatePropsFromArray($0g.$iu(),"width",this.rowHeaderCols);};if(!this.rowHeaderCols){this.rowHeaderWidth=$7e;};this.$g2();this.$iY();}};this.$dY=function(){this.$iZ=true;this.$iU();var $4p=this.$iT();var $7k=this.divHeader;if($7k){if(DayPilot.browser.ie){for(var i=0;i<$7k.childNodes.length;i++){DayPilot.de($7k.childNodes[i]);}};$k.$hi();$7k.innerHTML='';DayPilot.puc($7k);}else{$7k=document.createElement("div");$7k.onmousemove=function(){$k.$j0();};this.divHeader=$7k;};$7k.style.width=$4p+"px";$7k.style.height=$k.$dG+"px";$7k.rows=[];$k.$hr.main.divHeader=$7k;var $7d=$k.progressiveRowRendering;if($7d){$e();}else{var m=this.rowlist.length;for(var i=0;i<m;i++){$k.$j1(i);}};if($k.$hr.top.enabled()){for(var i=0;i<$k.$hr.top.rowlist.length;i++){$k.$j1(i,"top");}};if($k.$hr.bottom.enabled()){for(var i=0;i<$k.$hr.bottom.rowlist.length;i++){$k.$j1(i,"bottom");}};$k.$j2();this.divResScroll.appendChild($7k);if(this.rowHeaderWidthAutoFit){this.$iX();}};this.$g3=function(){if(!$k.progressiveRowRendering){return;};var $N=this.$iV();for(var i=0;i<$k.rowlist.length;i++){if($N.start<=i&&i<$N.end){$k.$j1(i);}else{$k.$hn(i);}};if(this.rowHeaderWidthAutoFit){var $6H=$k.$eI();this.$iX();var $6M=$k.$eI();if($6M!==$6H){var $7l=this.cellWidth;this.$dT();var $7m=this.cellWidth;if($7m!==$7l){$k.$dU();$k.$dZ();$k.$e0();$k.$e6();$k.$dX();$k.$j3();}}}};this.$j2=function(){if($k.$g8.mobile()){return;};var $7k=$k.divHeader;var c=document.createElement("div");c.style.position="absolute";$7k.appendChild(c);$k.nav.resScrollSpace=c;c.setAttribute("unselectable","on");var $06=document.createElement("div");$06.style.position="relative";$06.style.height="100%";$06.className=this.$eC("_rowheader");c.appendChild($06);var $4p=this.$iT();var c=$k.nav.resScrollSpace;c.style.width=$4p+"px";c.style.top=this.$dG+"px";c.style.height=($k.divResScroll.clientHeight+20)+"px";};this.$hn=function(i,$2o){var $2l=$k.$i8($2o);var $A=$2l.divHeader.rows[i];if(!$A){return;};var $06=$A.cells[0];var $2f=$06.domArgs;$06.domArgs=null;if($2f&&typeof $k.onBeforeRowHeaderDomRemove==="function"){$k.onBeforeRowHeaderDomRemove($2f);};if($2f&&typeof $k.onBeforeRowHeaderDomAdd==="function"&&$k.$hk.reactDOM){var $1M=$2f&&$2f.$ho;if($1M){var $2g=DayPilot.Util.isReactComponent($2f.element);if($2g){if(!$k.$hk.reactDOM){throw new DayPilot.Exception("Can't reach ReactDOM");};$k.$hk.reactDOM.unmountComponentAtNode($1M);}}};DayPilot.de($A.cells);$2l.divHeader.rows[i]=null;};this.$gi=function(i,$2o){this.$hn(i,$2o);this.$j1(i,$2o);};this.$gf=function(){return $k.rowHeaderColumnsMode==="Standard"||$k.rowHeaderColumnsMode==="Tabular";};this.$j4=function($1Y,$7n){var $7o=$1Y.tags&&$1Y.tags[$7n];if(typeof $7o!=="undefined"){return $7o;};return $1Y[$7n];};this.$j1=function(i,$2o){var $2l=$k.$i8($2o);var $2m=$2l.rowlist;var $7k=$2l.divHeader;var $7p=$7k;if($7p.rows[i]){return;};var $7q=this.rowHeaderCols;var $28=$7q?this.rowHeaderCols.length:0;var $4p=this.$iT();var $A=$2m[i];if(!$A){return;};if($A.hidden){return;};var $7r=$7s.$dJ[i];var $n=this.$iv($A);$7p.rows[i]={};$7p.rows[i].cells=[];var c=document.createElement("div");c.style.position="absolute";c.style.top=$A.top+"px";c.row=$A;c.index=i;var $0a=$n.row;var $5j=$0a;var $7t=$k.$gf();var $7u=$n.row.useStandardColumns;var $7v=$7u||($7t&&DayPilot.isArray($k.rowHeaderColumns));var $7w=DayPilot.list($n.row.columns);if($7v){$7w=$7w.filter(function($5j,i){return !$k.rowHeaderColumns[i].hidden;});$28=$7w.length;};if($7v){$5j=$7w[0]||{};};var $D=$7q?$7q[0]:this.rowHeaderWidth;c.style.width=($D)+"px";c.style.border="0px none";var $7x=$5j.toolTip||$0a.toolTip;if($7x){c.title=$7x;};c.setAttribute("unselectable","on");if(typeof $0a.ariaLabel!=="undefined"){c.setAttribute("aria-label",$0a.ariaLabel);}else{c.setAttribute("aria-label",$5j.html||$5j.text||"");};c.onmouseenter=$k.$j5;c.onmouseleave=$k.$j6;c.onmousemove=$k.$j7;c.onmouseout=$k.$j8;c.onmouseup=$k.$j9;c.oncontextmenu=$k.$ja;c.onclick=$k.$jb;c.ondblclick=$k.$jc;var $06=document.createElement("div");$06.style.width=($D)+"px";$06.setAttribute("unselectable","on");$06.className=this.$eC('_rowheader');if($7r){DayPilot.Util.addClass($06,$k.$eC("_rowheader_selected"));};if($0a.cssClass){DayPilot.Util.addClass($06,$0a.cssClass);};if($5j.cssClass){DayPilot.Util.addClass($06,$5j.cssClass);};var $4N=$5j.backColor||$0a.backColor;if($4N){$06.style.background=$4N;};var $5T=$5j.fontColor||$0a.fontColor;if($5T){$06.style.color=$5T;};var $7y=$5j.horizontalAlignment||$0a.horizontalAlignment;if($7y){$06.style.textAlign=$7y;};$06.style.height=($A.height)+"px";$06.style.overflow='hidden';$06.style.position='relative';var $09=document.createElement("div");$09.setAttribute("unselectable","on");$09.className=this.$eC('_rowheader_inner');switch($7y){case "right":$09.style.justifyContent="flex-end";break;case "left":$09.style.justifyContent="flex-start";break;case "center":$09.style.justifyContent="center";break;};$06.appendChild($09);var $6A=this.rowMoveHandling!=="Disabled"&&$A.grid==="main";var $5v=$k.rowDragHandleWidth;var $0d=$5j.areas||[];if($6A&&!$0a.moveDisabled){$0d.push({"v":"Hover","w":$5v,"bottom":0,"top":0,"left":0,"css":$k.$eC("_rowmove_handle"),"action":"Move"});};var ro=$k.$gH($A);DayPilot.Areas.attach($06,ro,{"areas":$0d,"allowed":function(){return !$7z.row;}});var $4a=document.createElement("div");$4a.style.position="absolute";$4a.style.bottom="0px";$4a.style.width="100%";$4a.style.height="1px";$4a.className=this.$eC($0b.resourcedivider);$06.appendChild($4a);function drawText2(){var $7k=document.createElement("div");if($k.treeEnabled&&!$A.isNewRow){var $R=$A.level*$k.treeIndent+$k.treeImageMarginLeft;if($6A){$R+=$5v;};var $D=$k.treeImageWidth;var $V=$k.treeImageHeight;$7k.style.marginLeft=$R+'px';$7k.style.position="relative";$7k.className=$k.$eC("_rowheader_inner_indent");var $46=document.createElement("div");$46.style.width=$D+"px";$46.style.height=$V+"px";$46.style.backgroundRepeat="no-repeat";$46.style.position='absolute';$46.style.top=$k.treeImageMarginTop+"px";if(!$A.loaded&&$A.children.length===0){$46.className=$k.$eC('_tree_image_expand');$46.style.cursor='pointer';$46.index=i;$46.onclick=function(ev){$k.$jd(this.index);ev=ev||window.event;ev.cancelBubble=true;};}else if($A.children.length>0){if($A.expanded){$46.className=$k.$eC('_tree_image_collapse');}else{$46.className=$k.$eC('_tree_image_expand');};$46.style.cursor='pointer';$46.index=i;$46.onclick=function(ev){$k.$id(this.index);ev=ev||window.event;ev.cancelBubble=true;};}else{$46.className=$k.$eC('_tree_image_no_children');};$7k.appendChild($46);};var $5n=document.createElement("div");if($k.treeEnabled){var $07=$k.treeImageMarginRight;$5n.style.marginLeft=($D+$07)+"px";};$5n.innerHTML=$5j.html||$5j.text||"";$5n.className=$k.$eC("_rowheader_inner_text");c.textDiv=$5n;c.cellDiv=$06;$7k.appendChild($5n);$09.appendChild($7k);var va=$5j.verticalAlignment||$0a.verticalAlignment;if(va){$09.style.display="flex";switch(va){case "center":$09.style.alignItems="center";break;case "top":$09.style.alignItems="flex-start";break;case "bottom":$09.style.alignItems="flex-end";break;}}};drawText2();c.appendChild($06);(function domAdd(){if(typeof $k.onBeforeRowHeaderDomAdd!=="function"&&typeof $k.onBeforeRowHeaderDomRemove!=="function"){return;};var $06=c;var $n={};$n.control=$k;$n.row=$k.$gH($A);$n.element=null;$n.target="Cell";$06.domArgs=$n;if(typeof $k.onBeforeRowHeaderDomAdd==="function"){$k.onBeforeRowHeaderDomAdd($n);};if($n.element){var $1M=null;switch($n.target&&$n.target.toLowerCase()){case "text":$1M=$5n;break;case "cell":$1M=$09;break;};if($1M){$n.$ho=$1M;$1M.innerHTML="";var $7A=DayPilot.Util.isReactComponent($n.element);if($7A){if(!$k.$hk.reactDOM){throw new DayPilot.Exception("Can't reach ReactDOM");};$k.$hk.reactDOM.render($n.element,$1M);}else{$1M.appendChild($n.element);}}}})();$7k.appendChild(c);$7p.rows[i].cells.push(c);if(!$A.columns||$A.columns.length===0){c.colSpan=$28>0?$28:1;$06.style.width=$4p+"px";}else{var $R=$D;var $1N=($7u||$7t)?0:1;for(var j=1;j<$28;j++){var $5j=$7w[j-$1N]||{};var c=document.createElement("div");c.style.position="absolute";c.style.top=$A.top+"px";c.style.left=$R+"px";$7k.appendChild(c);$7p.rows[i].cells.push(c);c.row=$A;c.index=i;var $7B=$5j.toolTip||$0a.toolTip;if($7B){c.title=$7B;};c.setAttribute("unselectable","on");c.onmousemove=$k.$j7;c.onmouseout=$k.$j8;c.onmouseup=$k.$j9;c.oncontextmenu=$k.$ja;c.onclick=$k.$jb;c.ondblclick=$k.$jc;var $06=document.createElement("div");var w=$7q[j];$R+=w;var $4N=$5j.backColor||$0a.backColor;if($4N){$06.style.backgroundColor=$4N;};var $5T=$5j.fontColor||$0a.fontColor;if($5T){$06.style.color=$5T;};$06.style.width=w+"px";$06.style.height=($A.height)+"px";$06.style.overflow='hidden';$06.style.position='relative';$06.setAttribute("unselectable","on");DayPilot.Util.addClass($06,this.$eC("_rowheader"));DayPilot.Util.addClass($06,this.$eC("_rowheadercol"));DayPilot.Util.addClass($06,this.$eC("_rowheadercol"+j));if($7r){DayPilot.Util.addClass($06,$k.$eC("_rowheader_selected"));};if($0a.cssClass){DayPilot.Util.addClass($06,$0a.cssClass);};if($5j.cssClass){DayPilot.Util.addClass($06,$5j.cssClass);};var $7C=$5j.horizontalAlignment||$0a.horizontalAlignment;if($7C){$06.style.textAlign=$7C;};var $09=document.createElement("div");$09.setAttribute("unselectable","on");$09.className=this.$eC("_rowheader_inner");switch($7C){case "right":$09.style.justifyContent="flex-end";break;case "left":$09.style.justifyContent="flex-start";break;case "center":$09.style.justifyContent="center";break;};$06.appendChild($09);var $4a=document.createElement("div");$4a.style.position="absolute";$4a.style.bottom="0px";$4a.style.width="100%";$4a.style.height="1px";$4a.className=this.$eC("_resourcedivider");$06.appendChild($4a);var $5n=document.createElement("div");var $7D=$5j.html||$5j.text||"";$5n.innerHTML=$7D;c.textDiv=$5n;c.cellDiv=$06;$09.appendChild($5n);DayPilot.Areas.attach($06,ro,{"areas":$5j.areas,"allowed":function(){return !$7z.row;}});c.appendChild($06);}}};this.$ja=function(ev){if($k.rowRightClickHandling==="Disabled"){return false;};var $7E=this.row;var $A=$k.$gH($7E);var $n={};$n.ctrl=ev.ctrlKey;$n.shift=ev.shiftKey;$n.meta=ev.metaKey;$n.originalEvent=ev;$n.row=$A;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onRowRightClick==="function"){$k.onRowRightClick($n);if($n.preventDefault.value){return;}};switch($k.rowRightClickHandling){case "ContextMenu":if($7E.contextMenu){$7E.contextMenu.show($A);};break;};if(typeof $k.onRowRightClicked==="function"){$k.onRowRightClicked($n);};return false;};this.$jb=function(ev){if($1X.cancelClick){return;};var $A=this.row;var r=$k.$gH($A,this.index);if($A.isNewRow){$k.$gN.edit($A);return;};$k.$gK(r,ev.ctrlKey,ev.shiftKey,ev.metaKey);};this.$jc=function(ev){if($k.timeouts.resClick){for(var $19 in $k.timeouts.resClick){window.clearTimeout($k.timeouts.resClick[$19]);};$k.timeouts.resClick=null;};var $A=this.row;var e=$k.$gH($A,this.index);if($k.$ek()){var $n={};$n.resource=e;$n.row=e;$n.ctrl=ev.ctrlKey;$n.shift=ev.shiftKey;$n.meta=ev.metaKey;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onRowDoubleClick==='function'){$k.onRowDoubleClick($n);if($n.preventDefault.value){return;}};switch($k.rowDoubleClickHandling){case 'PostBack':$k.rowDoubleClickPostBack(e);break;case 'CallBack':$k.rowDoubleClickCallBack(e);break;case 'Select':$k.$gM($A,ev.ctrlKey,ev.shiftKey,ev.metaKey);break;case 'Edit':$k.$gN.edit($A);break;};if(typeof $k.onRowDoubleClicked==='function'){$k.onRowDoubleClicked($n);}}else{switch($k.rowDoubleClickHandling){case 'PostBack':$k.rowDoubleClickPostBack(e);break;case 'CallBack':$k.rowDoubleClickCallBack(e);break;case 'JavaScript':$k.onRowDoubleClick(e);break;case 'Select':$k.$gM($A,ev.ctrlKey,ev.shiftKey,ev.metaKey);break;case 'Edit':$k.$gN.edit($A);break;}}};this.rowDoubleClickPostBack=function(e,$s){var $15={};$15.resource=e;this.$ff("RowDoubleClick",$15,$s);};this.rowDoubleClickCallBack=function(e,$s){var $15={};$15.resource=e;this.$fg("RowDoubleClick",$15,$s);};this.$je=function(ev){if($k.timeHeaderClickHandling==="Disabled"){return;};var $T={};$T.start=this.cell.start;$T.level=this.cell.level;$T.end=this.cell.end;if(!$T.end){$T.end=new DayPilot.Date($T.start).addMinutes($k.cellDuration);};$k.$gO($T);};this.$jf=function(ev){if($k.timeHeaderRightClickHandling==="Disabled"){return;};ev.cancelBubble=true;ev.preventDefault?ev.preventDefault():null;var $T={};$T.start=this.cell.start;$T.level=this.cell.level;$T.end=this.cell.end;if(!$T.end){$T.end=new DayPilot.Date($T.start).addMinutes($k.cellDuration);};if($k.$ek()){var $n={};$n.header=$T;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onTimeHeaderRightClick==='function'){$k.onTimeHeaderRightClick($n);if($n.preventDefault.value){return;}};switch(this.timeHeaderRightClickHandling){case 'PostBack':$k.timeHeaderRightClickPostBack(e);break;case 'CallBack':$k.timeHeaderRightClickCallBack(e);break;};if(typeof $k.onTimeHeaderRightClicked==='function'){$k.onTimeHeaderRightClicked($n);}}};this.$jg=function(i){var $A=$k.rowlist[i];if($A.hidden){return 0;};var $7F=$A.height;if(typeof $A.forcedHeight==="number"){$7F=$A.forcedHeight;};return $7F;};this.$jh=function(i,$1M,onComplete){var $0Y=200;var $1l=[];if(typeof i==="number"){addRow(i);}else if(DayPilot.isArray(i)){i.forEach(function($04){addRow($04);});}else{throw new DayPilot.Exception("Unexpected param (must be number/array).")};var $O=0;window.requestAnimationFrame(draw);function addRow(i){var $0U=$k.$jg(i);var to=$1M;if($1M==="hide"){to=0;}else if($1M==="show"){to=$k.rowlist[i].height;};var $7G=to-$0U;$1l.push({"i":i,"now":$0U,"dist":$7G});};function draw($7H){if(!$O){$O=$7H;};var $7I=$7H-$O;var $7J=Math.min(1,$7I/$0Y);if($7J===0){$7J=0.1;};$1l.forEach(function(r){var h=r.now+r.dist*$7J;$k.rowlist[r.i].forcedHeight=h;});$k.$ji();if($7J<1){window.requestAnimationFrame(draw);}else{if(typeof onComplete==="function"){onComplete();}}}};this.$gH=function($A){return new DayPilot.Row($A,$k);};this.$f0=function(i,$2o){$2o=$2o||"main";var $2l=$k.$hr[$2o];var $2m=$2l.rowlist;var $A=$2m[i];if(!$A.events){$A.resetEvents();};if($A.data){return;};$A.data={};$A.data.start=new DayPilot.Date($A.start);$A.data.startTicks=$A.data.start.getTime();var $0Y=this.$f4().getTime()-this.$eZ().getTime();$A.data.end=$0g.isResourcesView()?$A.data.start.addTime($0Y):$A.data.start.addDays(1);$A.data.endTicks=$A.data.end.getTime();$A.data.offset=$A.start.getTime()-this.$eZ().getTime();$A.data.i=i;$A.data.grid=$2o;};this.$jj={};this.$dX=function($03){if($03){this.events.list=$03;}else if(!this.events.list){this.events.list=[];};if(this.events.list!=null&&!DayPilot.isArray(this.events.list)){throw "DayPilot.Scheduler.events.list expects an array object";};$2d.prepareRows(true);var $02=this.events.list;var $7K=typeof this.onBeforeEventRender==='function';var $1l;var $7L=$k.viewType==="Resources";$k.$jj={};for(var j=0;j<$02.length;j++){var $7M=$02[j];if(!$7M){continue;};if(typeof $7M!=="object"){throw new DayPilot.Exception("Event data item must be an object");};if(!$7M.start){throw new DayPilot.Exception("Event data item must specify 'start' property");};if($7M instanceof DayPilot.Event){throw "DayPilot.Scheduler: DayPilot.Event object detected in events.list array. Use raw event data instead.";};var $7N=typeof $7M.id==="string"||typeof $7M.id==="number";var $7O=typeof $7M.recurrentMasterId==="string"||typeof $7M.recurrentMasterId==="number";if(!$7N){var $7O=typeof $7M.recurrentMasterId==="string"||typeof $7M.recurrentMasterId==="number";if(!$7O){throw new DayPilot.Exception("All events must have an id property (string or number)");}};var $7P=!$k.temp.allowDuplicateEventIds;if($7P){var $7Q="_"+$7M.id;if(!$7N&&$7O){$7Q="#"+$7M.recurrentMasterId+"#"+new DayPilot.Date($7M.start);};if($k.$jj[$7Q]){throw new DayPilot.Exception("Duplicate event IDs are not allowed: "+$7Q);};$k.$jj[$7Q]=true;};if($7M.type==="Milestone"){$7M.end=$7M.start;};if($7K){this.$hF(j);};if($7M.resource==="*"){$1l=$k.rowlist;}else if($7L){$1l=$k.$jk($7M.resource).concat($k.$jk("*"));}else if($k.viewType==="Days"){$1l=$k.rowlist;}else if($k.viewType==="Gantt"){$1l=$k.$jk($7M.id);};for(var x=0;$1l&&x<$1l.length;x++){var $A=$1l[x];var ep=this.$hG($7M,$A);if(!ep){continue;};if($7K){ep.cache=this.$dJ.events[j];}}};var $2m=$k.$eY();$2m.forEach(function($A){$k.$hM($A);});$k.$fE();};this.$jl={};var $2d=this.$jl;$2d.rowcache={};$2d.prepareRows=function($7R){$2d.rowcache={};var $1l=$k.$eY();for(var i=0;i<$1l.length;i++){var $A=$1l[i];if($7R){$A.resetEvents();};$k.$f0($A.index,$A.grid);if(!$A.id){continue;};var $7S=typeof $A.id+"_"+$A.id;if(!$2d.rowcache[$7S]){$2d.rowcache[$7S]=DayPilot.list();};$2d.rowcache[$7S].push($A);}};$2d.loadEvent=function($7M){};this.$jk=function(id){var $7S=typeof id+"_"+id;return DayPilot.list($2d.rowcache[$7S]);};this.$hE=function(){var $7T={};if($k.viewType!=="Resources"){return false;};for(var i=0;i<$k.rowlist.length;i++){var $A=$k.rowlist[i];var id=$A.id;if($7T[id]){return true;};$7T[id]=true;};return false;};this.$hF=function(i){var $0c=this.$dJ.events;var $s=this.events.list[i];var $7U={};if($s instanceof DayPilot.Event){$s=$s.data;};for(var name in $s){$7U[name]=$s[name];};if(typeof $7U.start==="string"){$7U.start=new DayPilot.Date($7U.start);};if(typeof $7U.end==="string"){$7U.end=new DayPilot.Date($7U.end);};if(typeof this.onBeforeEventRender==='function'){var $n={};$n.e=$7U;$n.data=$7U;this.onBeforeEventRender($n);};$0c[i]=$7U;};this.$jm=function(e){var cd=e.data.container;var $01=typeof cd;if($01!=="string"&&$01!=="number"){return null;};return typeof cd+"_"+cd;};this.$hM=function($A){$A.lines=[];$A.sections=null;if($A.isNewRow){return;};if(this.sortDirections){$A.events.sort(this.$jn);}else if(!$k.$dB){$A.events.sort(this.$jo);};$A.containerCache={};$A.containers=[];$A.events.forEach(function(e){var $7V=$k.$jm(e);if($7V){var $7W=$A.containerCache[$7V];if(!$7W){$7W={"events":[],"line":null,"start":null,"end":null,"left":null,"width":null};$A.containerCache[$7V]=$7W;$A.containers.push($7W);};e.part.container=$7W;$7W.events.push(e);}});$A.containers.forEach(function(c){var $0V=c.events[0];var $0P=c.events[c.events.length-1];c.start=$0V.part.start;c.end=$0P.part.end;c.left=$0V.part.left;c.width=$0P.part.right-$0V.part.left;c.right=$0P.part.right;});var $7X=$k.$dB;if($7X){$7Y.loadRow($A);return;};var $7Z=$k.groupConcurrentEvents;if($7Z){for(var i=0;i<$A.blocks.length;i++){$A.blocks[i].clear();}};DayPilot.list($A.events).forEach(function(e){if(e.part.height){return;};if($A.eventHeight){e.part.height=$A.eventHeight;return;};e.part.height=$0g.eventHeight();});var $80=function(e){return typeof e.data.line==="number";};$A.events.filter($80).forEach(function(e){$A.putIntoLine(e);});for(var j=0;j<$A.events.length;j++){var e=$A.events[j];$A.putIntoLine(e);if($7Z){$A.putIntoBlock(e);}};var $81=0;for(var i=0;i<$A.lines.length;i++){var $0H=$A.lines[i];$0H.top=$81;$81+=($0H.height||$A.eventHeight)*$A.eventStackingLineHeight/100;};if($7Z){for(var j=0;j<$A.blocks.length;j++){var $82=$A.blocks[j];$82.lines=[];$82.events.sort(this.$jn);for(var k=0;k<$82.events.length;k++){var e=$82.events[k];$82.putIntoLine(e);};if($82.lines.length<=$k.groupConcurrentEventsLimit){$82.expanded=true;};var $83=DayPilot.list($82.events).map(function(e){return e.id();}).some(function($04){return DayPilot.contains($k.$jp,$04);});if($83){$82.expanded=true;};var $81=0;for(var i=0;i<$82.lines.length;i++){var $0H=$82.lines[i];$0H.top=$81;$81+=($0H.height||$A.eventHeight)*$A.eventStackingLineHeight/100;}}}};this.$fD=function($1l){$1l=DayPilot.ua($1l);$1l=$k.$gj($1l);$1l.forEach(function($A){$k.$hM($A);});if($k.$dB){$7Y.calculateEventPositions();}else{$1l.forEach(function($A){$k.$it($A);});}};this.$hX=function(){var $O=$k.scale==="Manual"?$k.itline[0].start:$k.startDate;return DayPilot.list($k.rowlist).some(function($04){if(!$04.start){return false;};return $04.start.getTime()!==new DayPilot.Date($O).getTime();});};this.$hG=function(e,$A){if($A.hideEvents){return;};var $O=new DayPilot.Date(e.start);var end=new DayPilot.Date(e.end);end=$k.$gp(end);var $84=$O.ticks;var $85=end.ticks;if($85<$84){return null;};var $0c=null;if(typeof $k.onBeforeEventRender==='function'){var $1n=DayPilot.indexOf($k.events.list,e);$0c=$k.$dJ.events[$1n];};if($0c){if($0c.hidden){return null;}}else if(e.hidden){return null;};var $86=false;switch(this.viewType){case 'Days':$86=!($85<=$A.data.startTicks||$84>=$A.data.endTicks)||($84===$85&&$84===$A.data.startTicks);break;case 'Resources':$86=($A.id===e.resource||$A.id==="*"||e.resource==="*")&&(!($85<=$A.data.startTicks||$84>=$A.data.endTicks)||($84===$85&&$84===$A.data.startTicks));break;case 'Gantt':$86=($A.id===e.id)&&!($85<=$A.data.startTicks||$84>=$A.data.endTicks);break;};if(!$86){return null;};var ep=new DayPilot.Event(e,$k);ep.part.dayIndex=$A.data.i;ep.part.grid=$A.data.grid;ep.part.start=$A.data.startTicks<$84?$O:$A.data.start;ep.part.end=$A.data.endTicks>$85?end:$A.data.end;var $87=this.getPixels(ep.part.start.addTime(-$A.data.offset));var $88=this.getPixels(ep.part.end.addTime(-$A.data.offset));if(ep.part.start===ep.part.end){$88=this.getPixels(ep.part.end.addTime(-$A.data.offset).addMilliseconds(1));};if($0c&&$0c.height){ep.part.height=$0c.height;}else if(e.height){ep.part.height=e.height;};var $89=$0c||ep.data;ep.part.$jq=function(){var $8a=this.height;if($k.eventVersionsEnabled&&!DayPilot.list(ep.versions).isEmpty()){var $0p=ep.versions.length;$8a+=$0p*$k.eventVersionHeight;$8a+=$0p*$k.eventVersionMargin;};return $8a+$k.eventMarginBottom;};var $R=$87.left;var $S=$88.left;ep.part.startPixels=$87;ep.part.endPixels=$88;if($R===$S){if($87.cut||$88.cut){return null;};var $2C=(ep.part.start.addTime(-$A.data.offset).getTime()+ep.part.end.addTime(-$A.data.offset).getTime())/2;var $8b=$k.getPixels(new DayPilot.Date(Math.floor($2C)));if($8b.cut){return null;}};ep.part.box=$0g.useBox($85-$84);var $3w=$k.eventHeight;if(e.type==="Milestone"){var $D=e.width||$3w;ep.part.end=ep.part.start;ep.part.left=$R-$D/2;ep.part.width=$D;ep.part.barLeft=0;ep.part.barWidth=$D;}else if(ep.part.box){var $8c=$87.boxLeft;var $8d=$88.boxRight;ep.part.left=$8c;ep.part.width=$8d-$8c;ep.part.barLeft=DayPilot.Util.atLeast($R-ep.part.left,0);ep.part.barWidth=DayPilot.Util.atLeast($S-$R,1);}else{ep.part.left=$R;ep.part.width=DayPilot.Util.atLeast($S-$R,1);ep.part.barLeft=0;ep.part.barWidth=DayPilot.Util.atLeast($S-$R-1,1);};var $6O=$k.eventMinWidth;ep.part.width=Math.max(ep.part.width,$6O);ep.part.right=ep.part.left+ep.part.width;ep.cache=$0c;if($k.eventVersionsEnabled){$k.$jr(ep,$A);};if(typeof $k.onEventFilter==="function"&&$k.events.$hC){var $n={};$n.filter=$k.events.$hC;$n.filterParam=$k.events.$hC;$n.visible=true;$n.e=ep;$k.onEventFilter($n);if(!$n.visible){return null;}};$A.events.push(ep);return ep;};this.$jr=function(ep,$A){ep.versions=[];var $s=ep.cache||ep.data;var $02=DayPilot.list($s.versions);if($02.isEmpty()){return;};var $8e=ep.part.left;var $8f=ep.part.left+ep.part.width;$02.forEach(function($1L){var $O=new DayPilot.Date($1L.start);var end=new DayPilot.Date($1L.end);var $87=$k.getPixels($O.addTime(-$A.data.offset));var $88=$k.getPixels(end.addTime(-$A.data.offset));if($O.ticks===end.ticks){$88=$k.getPixels(end.addTime(-$A.data.offset).addTime(1));};var $R=$87.left;var $S=$88.left;if($R===$S&&($87.cut||$88.cut)){return null;};var $6b={};$6b.left=$R;$6b.continueLeft=$O<$A.data.start;$6b.right=$S;$6b.continueRight=end>$A.data.end;$6b.width=$S-$R;ep.versions.push($6b);if($6b.left<$8e){$8e=$6b.left;};if($6b.right>$8f){$8f=$6b.right;}});if(!$k.eventVersionsReserveSpace){ep.part.versionsLeft=ep.part.left;ep.part.versionsRight=ep.part.left+ep.part.width;ep.part.versionsWidth=ep.part.width;}else{ep.part.versionsLeft=$8e;ep.part.versionsRight=$8f;ep.part.versionsWidth=$8f-$8e;}};this.$jo=function(a,b){if(!a||!b||!a.start||!b.start){return 0;};var $8g=a.start().ticks-b.start().ticks;if($8g!==0){return $8g;};var $8h=b.end().ticks-a.end().ticks;return $8h;};this.$jn=function(a,b){if(!a||!b){return 0;};var $8i=a.cache||a.data;var $8j=b.cache||b.data;var $8k=$8i.sort&&$8i.sort.length>0&&$8j.sort&&$8j.sort.length>0;if(!$8k){return $k.$jo(a,b);};var $l=0;var i=0;while($l===0&&typeof $8i.sort[i]!=="undefined"&&typeof $8j.sort[i]!=="undefined"){if($8i.sort[i]===$8j.sort[i]){$l=0;}else if(typeof $8i.sort[i]==="number"&&typeof $8j.sort[i]==="number"){$l=$8i.sort[i]-$8j.sort[i];}else{$l=$k.$js($8i.sort[i],$8j.sort[i],$k.sortDirections[i]);};i++;};return $l;};this.$js=function(a,b,$8l){var $8m=($8l!=="desc");var $8n=$8m?-1:1;var $8o=-$8n;if(a===null&&b===null){return 0;};if(b===null){return $8o;};if(a===null){return $8n;};var ar=[];ar[0]=a;ar[1]=b;ar.sort();return a===ar[0]?$8n:$8o;};this.$gM=function($A,$1p,$1N,$1q){if($k.$ek()){var $1n=DayPilot.indexOf($k.rowlist,$A);var e=$k.$gH($A,$1n);var $7r=DayPilot.indexOf($1X.selected,$A)!==-1;var $14=$7r?"deselected":"selected";var $n={};$n.row=e;$n.selected=$7r;$n.ctrl=$1p;$n.shift=$1N;$n.meta=$1q;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onRowSelect==='function'){$k.onRowSelect($n);if($n.preventDefault.value){return;}};var $8p=$1N&&!$1p&&!$1q;if(!$1N){$1X.$jt={"row":$A,"index":$1n};};if($8p){$1X.fixRowSelectLast();var $8q=$1X.$jt.index;var $8r=$1n;$1X.selectRange($8q,$8r);};switch($k.rowSelectHandling){case 'PostBack':$k.rowSelectPostBack(e,$14);break;case 'CallBack':$k.rowSelectCallBack(e,$14);break;case "Notify":!$8p&&$1X.select($A,$1p,$1N,$1q);$k.rowSelectNotify(e,$14);break;case 'Update':!$8p&&$1X.select($A,$1p,$1N,$1q);break;};if(typeof $k.onRowSelected==='function'){$n.selected=DayPilot.indexOf($1X.selected,$A)!==-1;$k.onRowSelected($n);}}else{$1X.select($A,$1p,$1N);var $1n=DayPilot.indexOf($k.rowlist,$A);var e=$k.$gH($A,$1n);var $7r=DayPilot.indexOf($1X.selected,$A)!==-1;var $14=$7r?"deselected":"selected";switch($k.rowSelectHandling){case 'PostBack':$k.rowSelectPostBack(e,$14);break;case 'CallBack':$k.rowSelectCallBack(e,$14);break;case "Notify":$k.rowSelectNotify(e,$14);break;case 'JavaScript':$k.onRowSelect(e,$14);break;}}};this.rowSelectPostBack=function(r,$14,$s){var $15={};$15.resource=r;$15.change=$14;this.$ff('RowSelect',$15,$s);};this.rowSelectCallBack=function(r,$14,$s){var $15={};$15.resource=r;$15.change=$14;this.$fg('RowSelect',$15,$s);};this.rowSelectNotify=function(r,$14,$s){var $15={};$15.resource=r;$15.change=$14;this.$fg('RowSelect',$15,$s,"Notify");};this.rows={};this.rows.selection={};var $7s=this.rows.selection;$7s.$dJ=[];$7s.get=function(){var $02=[];DayPilot.list($1X.selected).forEach(function($04){$02.push($k.$gH($04));});return $02;};$7s.clear=function(){$1X.clearSelection();};$7s.add=function($A){if(!$A||!$A.isRow){throw "DayPilot.Scheduler.rows.selection.add(): DayPilot.Row object expected";};var $8s=DayPilot.list($1X.selected).some(function($04){return $04===$A.$.row;});if(!$8s){$1X.selected.push($A.$.row);$7s.$ju();$1X.$jv($A.$.row);}};$7s.remove=function($A){if(!$A||!$A.isRow){throw "DayPilot.Scheduler.rows.selection.remove(): DayPilot.Row object expected";};var $7r=$7s.isSelected($A);if($7r){DayPilot.rfa($1X.selected,$A.$.row);$7s.$ju();$1X.$jv($A.$.row);}};$7s.isSelected=function($A){if(!$A||!$A.isRow){throw "DayPilot.Scheduler.rows.selection.isSelected(): DayPilot.Row object expected";};var $7r=DayPilot.indexOf($1X.selected,$A.$.row)!==-1;return $7r;};$7s.$ju=function(){$k.selectedRows=DayPilot.list($1X.selected).map(function($04){return $04.id;});$7s.$dJ=[];$1X.selected.forEach(function($A){$7s.$dJ[$A.index]=true;});};this.rows.all=function(){var $02=DayPilot.list();for(var i=0;i<$k.rowlist.length;i++){var r=$k.$gH($k.rowlist[i]);$02.push(r);};return $02;};this.rows.visible=function(){var $02=DayPilot.list();for(var i=0;i<$k.rowlist.length;i++){var r=$k.rowlist[i];if(!r.hidden){var r=$k.$gH($k.rowlist[i]);$02.push(r);}};return $02;};this.rows.each=function(f){$k.rows.all().forEach(f);};this.rows.forEach=function(f){$k.rows.all().forEach(f);};this.rows.filter=function($M,$38){$k.rows.$hC=$M;if($38){return;};if($k.$en){$k.$fO({"immediateEvents":true});}};Object.defineProperty($k.rows,"filterParam",{get:function(){return $k.rows.$hC;},});this.rows.sort=function($8t){var $1Q=$k.rows.sortParam;if(typeof $8t==="string"){$k.rows.$jw={"field":$8t,"order":"asc"};}else if(typeof $8t==="object"){var $M=DayPilot.Util.copyProps($8t);if(!$M.order){$M.order="asc";};$k.rows.$jw=$M;}else{$k.rows.$jw=null;};if($k.$en){$k.$fO({"immediateEvents":true});};if(typeof $k.onRowSorted==="function"){var $n={};$n.oldSortParam=$1Q;$k.onRowSorted($n);}};Object.defineProperty($k.rows,"sortParam",{get:function(){return{"order":$k.rows.$jx(),"field":$k.rows.$jy()};},});this.rows.$jy=function(){var $M=$k.rows.$jw;if(!$M){return null;};return $M.field;};this.rows.$jx=function(){var $M=$k.rows.$jw;if(!$M){return "asc";};return $M.order;};this.rows.find=function($M,$O){if(typeof $M==="string"||typeof $M==="number"||(!$M&&$O)){var $8u=$k.$jk($M);if(!$M){$8u=$k.rowlist;};var $0V=null;if(typeof $O==="string"||$O instanceof DayPilot.Date){$O=new DayPilot.Date($O);$0V=$8u.find(function($04){return $O===$04.start;});}else{$0V=$8u.first();};if($0V){return new DayPilot.Row($0V,$k);};return null;}else if(typeof $M==="function"){var $1n=$O||0;var r=$k.rowlist.find(function(r,i){if(i<$1n){return false;};var $A=$k.$gH(r);return $M($A);});if(r){return $k.$gH(r);}}else{throw new DayPilot.Exception("Invalid rows.find() argument: id or function expected");}};this.rows.load=function($2r,$2s,$2t){if(!$2r){throw new DayPilot.Exception("rows.load(): 'url' parameter required");};var $2u=function($n){var $2v={};$2v.exception=$n.exception;$2v.request=$n.request;if(typeof $2t==='function'){$2t($2v);}};var $2w=function($n){var r=$n.request;var $s;try{$s=JSON.parse(r.responseText);}catch(e){var $2x={};$2x.exception=e;$2u($2x);return;};if(DayPilot.isArray($s)){var $2y={};$2y.preventDefault=function(){this.preventDefault.value=true;};$2y.data=$s;if(typeof $2s==="function"){$2s($2y);};if($2y.preventDefault.value){return;};$k.resources=$s;if($k.$en){$k.update();}}};var $2z=$k.rowsLoadMethod&&$k.rowsLoadMethod.toUpperCase()==="POST";if($2z){DayPilot.ajax({"method":"POST","url":$2r,"success":$2w,"error":$2u});}else{DayPilot.ajax({"method":"GET","url":$2r,"success":$2w,"error":$2u});}};this.rows.expand=function($8v){var $1l=[];var $1o=$8v||1;for(var i=0;i<$k.rowlist.length;i++){var $A=$k.rowlist[i];var $8w=$1o===-1;if($A.level<$1o){$8w=true;};if($8w&&!$A.expanded&&$A.children&&$A.children.length>0){$1l.push($A.index);}};if($1l.length===0){return;};if($1l.length===1){$k.$id($1l[0]);}else{for(var i=0;i<$1l.length;i++){var $1n=$1l[i];var $1Y=$k.rowlist[$1n].resource;$1Y.expanded=true;};$k.$fO();}};this.rows.expandAll=function(){$k.rows.expand(-1);};this.rows.collapseAll=function(){$k.rowlist.forEach(function($A){$A.resource.expanded=false;});$k.$fO();};this.rows.headerHide=function(){$k.$jz=true;$k.$jA();$k.$iY();$k.$eR();};this.rows.headerShow=function(){$k.$jz=false;$k.$jA();$k.$iY();$k.$eR();};this.rows.headerToggle=function(){if($k.$jz){$k.rows.headerShow();}else{$k.rows.headerHide();}};this.rows.edit=function($A){$1X.edit($A.$.row);};this.rows.remove=function($A){var $s=$A.$.row.resource;var $8x=$8y.findParentArray($s);if(!$8x){throw "Cannot find source node parent";};var $8z=DayPilot.indexOf($8x,$s);$8x.splice($8z,1);$k.update();};this.rows.update=function($A){if(!($A instanceof DayPilot.Row)){throw new DayPilot.Exception("DayPilot.Scheduler.rows.update() expects a DayPilot.Row object.");};var $1n=$A.index;var $2m=$k.$i8($A.grid).rowlist;var $1H=$2m[$1n];var $1Y=$A.data;var parent=$A.parent()?$A.parent().$.row:null;var $8A=$k.$jB($1Y);var $A=$k.$jC($8A,parent);$A.hidden=$1H.hidden;$A.level=$1H.level;$A.children=$1H.children;$A.index=$1n;$A.top=$1H.top;$A.height=$1H.height;$2m[$1n]=$A;$A.resetEvents();$k.$f0($A.index,$A.grid);$k.$jD($A);$k.$hM($A);$k.$gi($A.index,$A.grid);$k.$e7();$k.$eb();};this.$jD=function($A){var $03=$k.events.list;var $8B=$03.length;var $7K=typeof $k.onBeforeEventRender==="function";for(var j=0;j<$8B;j++){var $7M=$03[j];if(!$7M){continue;};if($7M instanceof DayPilot.Event){throw new DayPilot.Exception("DayPilot.Scheduler: DayPilot.Event object detected in events.list array. Use raw event data instead.");};if($k.viewType==="Days"){throw new DayPilot.Exception(".rows.update() not supported for viewType = 'Days'.");}else if($k.viewType==="Gantt"){throw new DayPilot.Exception(".rows.update() not supported for viewType = 'Gantt'.");};var $86=$7M.resource==="*"||$A.id==="*"||$7M.resource===$A.id;if(!$86){continue;};if($7K){this.$hF(j);};var ep=this.$hG($7M,$A);if(!ep){continue;};if($7K){ep.cache=this.$dJ.events[j];}}};this.$jE=function(){var $1L=$7z.source;var $1M=$7z.target;var $y=$7z.position;var $8C=$7z.sourceCalendar;$1X.resetMoving();if($k.$ek()){var $n={};$n.source=$k.$gH($1L);$n.source.calendar=$8C;$n.target=$k.$gH($1M);$n.position=$y;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onRowMove==="function"){$k.onRowMove($n);if($n.preventDefault.value){return;}};switch($k.rowMoveHandling){case "Update":$1X.move($n);break;case "CallBack":$k.rowMoveCallBack($n.source,$n.target,$n.position);break;case "PostBack":$k.rowMovePostBack($n.source,$n.target,$n.position);break;case "Notify":$1X.move($n);$k.rowMoveNotify($n.source,$n.target,$n.position);break;};if(typeof $k.onRowMoved==="function"){$k.onRowMoved($n);}}else{var $1L=$k.$gH($1L);var $1M=$k.$gH($1M);var $y=$y;switch($k.rowMoveHandling){case "CallBack":$k.rowMoveCallBack($1L,$1M,$y);break;case "PostBack":$k.rowMovePostBack($1L,$1M,$y);break;case "JavaScript":$k.onRowMove($1L,$1M,$y);break;}}};this.$ei=function($1l){var $02=DayPilot.list($1l);$1X.selected=[];if(!$02.isEmpty()){$k.$dz=false;$k.$dW();};$02.forEach(function($04){var $A=$k.$et($04);if($A){$1X.selected.push($A);}});$1X.$jF();};this.$gN={};var $1X=this.$gN;$1X.edit=function($A){var $8D=$1X.$jG($A);};$1X.rowSelectLastSetDefault=function(){$1X.$jt={"row":$k.rowlist[0],"index":0};};$1X.rowSelectSetLast=function($A){var $1n=DayPilot.indexOf($k.rowlist,$A);if($1n===-1){throw "DayPilot.Scheduler: Row not found when selecting a range";};$1X.$jt={"row":$A,"index":$1n};};$1X.fixRowSelectLast=function(){if(!$1X.$jt){$1X.rowSelectLastSetDefault();};var $1n=DayPilot.indexOf($k.rowlist,$1X.$jt.row);if($1n>-1){return;};var $A=$k.$et($1X.$jt.row.id);if($A){$1n=DayPilot.indexOf($k.rowlist,$A);$1X.$jt={"row":$A,"index":$1n};}else{$1X.rowSelectLastSetDefault();}};$1X.createOverlay=function($A){var $D=$k.$iT();var $3o=$k.$eC("_rowmove_source");var $06=DayPilot.Util.div($k.divHeader,0,$A.top,$D,$A.height);$06.className=$3o;$A.moveOverlay=$06;};$1X.deleteOverlay=function($A){if(!$A){return;};DayPilot.de($A.moveOverlay);$A.moveOverlay=null;};$1X.$jG=function($A){var r=$1X.$jH($A);var c=r.cells[0];if(c.input){return c.input;};DayPilot.Areas.disable(c.firstChild);var $D=c.clientWidth;if($A.isNewRow){$D=$k.$eI();};var $8D=document.createElement("textarea");$8D.style.position="absolute";$8D.style.top="0px";$8D.style.left="0px";$8D.style.width=$D+"px";$8D.style.height=$A.height+"px";$8D.style.border="0px none";$8D.style.overflow="hidden";$8D.style.boxSizing="border-box";$8D.style.resize="none";$8D.style.paddingLeft=($A.level*$k.treeIndent)+"px";var $2h=c.textDiv;$8D.style.fontFamily=DayPilot.gs($2h,'fontFamily')||DayPilot.gs($2h,'font-family');$8D.style.fontSize=DayPilot.gs($2h,'fontSize')||DayPilot.gs($2h,'font-size');$8D.value=$A.name||"";c.firstChild.appendChild($8D);c.input=$8D;var $8E=function(){try{c.input.parentNode.removeChild(c.input);}catch(e){$e();};c.input=null;};$8D.focus();$8D.onblur=function(){$8D.onblur=null;var $1I=$8D.value;$8E();DayPilot.Areas.enable(c.firstChild);$k.$gJ($A,$1I,$8D.canceled);};$8D.onkeydown=function(e){var $8F=(window.event)?event.keyCode:e.keyCode;if($8F===27){$8D.canceled=true;$8E();};if($8F===13){$8D.onblur();return false;};return true;};if($8D.setSelectionRange){$8D.setSelectionRange(0,9999);}else{$8D.select();};return $8D;};$1X.selected=[];$1X.select=function($A,$1p,$1N,$1q){var $7r=DayPilot.indexOf($1X.selected,$A)!==-1;if($1p||$1q){if($7r){DayPilot.rfa($1X.selected,$A);$7s.$ju();$1X.$jv($A);return;}}else{$7r=false;$1X.clearSelection();};if(!$7r){$1X.selected.push($A);};$7s.$ju();$1X.$jv($A);};$1X.selectRange=function($8q,$8r){$1X.clearSelection();var $6Q=Math.min($8q,$8r);var $C=Math.max($8q,$8r);for(var i=$6Q;i<=$C;i++){var $A=$k.rowlist[i];$1X.selected.push($A);};$7s.$ju();for(var i=$6Q;i<=$C;i++){var $A=$k.rowlist[i];$1X.$jv($A);}};$1X.$jF=function(){for(var i=0;i<$1X.selected.length;i++){var $A=$1X.selected[i];$1X.$jv($A);}};$1X.$jv=function($A){var y=DayPilot.indexOf($k.rowlist,$A);if(y===-1){var $1M=$k.$et($A.id);if($1M){y=$1M.index;}else{return;}};$k.$go(y);$k.$eb();$k.$hn(y);$k.$j1(y);};$1X.$h0=function(){var $02=[];if(!$1X.selected){return $02;};for(var i=0;i<$1X.selected.length;i++){var $A=$1X.selected[i];var $1n=DayPilot.indexOf($k.rowlist,$A);var r=$k.$gH($A,$1n);$02.push(r.toJSON());};return $02;};$1X.$jt=null;$1X.clearSelection=function(){var $7r=$1X.selected;$1X.selected=[];$k.selectedRows=[];$7s.$dJ=[];var $8G=5;if($7r.length<=$8G){$7r.forEach(function($A){$1X.$jv($A);});}else{$k.$e7();$k.$eb();for(var i=0;i<$k.rowlist.length;i++){if($k.divHeader.rows[i]){$k.$gi(i);}}}};$1X.$jH=function($A){var $7f=$k.divHeader;for(var y=0;y<$7f.rows.length;y++){var r=$7f.rows[y];if(r&&r.cells[0]&&r.cells[0].row===$A){return r;}};return null;};$1X.startMoving=function($A){var $7z=DayPilot.Global.rowmoving;$7z.row=$A;$7z.sourceCalendar=$k;$7z.cursor=$k.divResScroll.style.cursor;$k.divResScroll.style.cursor="move";$1X.createOverlay($A);};$1X.resetMoving=function(){$k.divResScroll.style.cursor=$7z.cursor;DayPilot.de($7z.div);$1X.deleteOverlay($7z.row);DayPilot.Global.rowmoving=$7z={};};$1X.$jI=function(ev){var $2k=DayPilot.mo3($k.divHeader,ev);var ri=$k.$h8($2k.y);var $A=$k.rowlist[ri.i];if(!$A){return;};if($A.isNewRow){return;};var $8H=$2k.y-ri.top;var $8I=ri.bottom-ri.top;var $8J=$8I/3;var $8K=$8J*2;var $2C=$8I/2;var $y="before";var $8L=$A.children&&$A.children.length>0;var $8M=(function(){var i=ri.i;var $8N=$A.level;while(i>=0){var r=$k.rowlist[i];i--;if($8N<=r.level){continue;};if(r===$7z.row){return true;};if(r.level===0){return false;};$8N=r.level;};return false;})();var $8O=$k.treeEnabled;if($8M||ri.i===$7z.row.index){$y="forbidden";}else if($8O){if($8L){if($8H<$2C){$y="before";}else{$y="child";}}else{if($8H<$8J){$y="before";}else if($8H<$8K){$y="child";}else{$y="after";}}}else{if($8L){$y="before";}else{if($8H<$2C){$y="before";}else{$y="after";}}};if($7z.row.moveDisabled){$y="forbidden";};$7z.calendar=$k;$7z.source=$7z.row;$7z.target=$k.rowlist[ri.i];$7z.position=$y;var $8P=(function(){if(!$7z.last){return true;};if($7z.last.target!==$7z.target){return true;};if($7z.last.position!==$7z.position){return true;};return false;})();if($8P){if(typeof $k.onRowMoving==='function'){var $n={};$n.source=$k.$gH($7z.source);$n.target=$k.$gH($7z.target);$n.position=$y;$k.onRowMoving($n);$7z.position=$n.position;}}else if($7z.last){$7z.position=$7z.last.position;};$7z.last={};$7z.last.target=$7z.target;$7z.last.position=$7z.position;(function drawRowPosition(){if($7z.div){DayPilot.de($7z.div);};var top=ri.top;var $J=$7z.position;var ro=$k.rowlist[ri.i];var $1o=ro.level;var $R=$1o*$k.treeIndent;switch($J){case "before":top=ri.top;break;case "child":top=ri.top+$2C;break;case "after":top=ri.bottom;break;case "forbidden":top=ri.top+$2C;break;};var $D=$k.$iT()-$R;var $y=document.createElement("div");$y.style.position="absolute";$y.style.left=$R+"px";$y.style.width=$D+"px";$y.style.top=top+"px";$y.className=$k.$eC("_rowmove_position_"+$J);$7z.div=$y;$k.divResScroll.appendChild($y);})();};$1X.move=function($n){var $1L=$n.source.$.row.resource;var $1M=$n.target.$.row.resource;var $y=$n.position;if($y==="forbidden"){return;};var $8x=$n.source.calendar.$jJ.findParentArray($1L);if(!$8x){throw "Cannot find source node parent";};var $8z=DayPilot.indexOf($8x,$1L);$8x.splice($8z,1);var $8Q=$8y.findParentArray($1M);if(!$8Q){throw "Cannot find target node parent";};var $8R=DayPilot.indexOf($8Q,$1M);switch($y){case "before":$8Q.splice($8R,0,$1L);break;case "after":$8Q.splice($8R+1,0,$1L);break;case "child":if(!$1M.children){$1M.children=[];$1M.expanded=true;};$1M.children.push($1L);break;};$k.update();};var rm={};this.$jK=rm;rm.$jL=function(ev){};var $8y={};this.$jJ=$8y;$8y.findParentArray=function($1Y){return $8y.findInArray($k.resources,$1Y);};$8y.findInArray=function($4y,$1Y){if(DayPilot.indexOf($4y,$1Y)!==-1){return $4y;};for(var i=0;i<$4y.length;i++){var r=$4y[i];if(r.children&&r.children.length>0){var parent=$8y.findInArray(r.children,$1Y);if(parent){return parent;}}};return null;};this.$dV=function(){var $8S=this.resources;var $8T=this.$eS();if(!$8T){if(this.viewType==="Gantt"){$8S=this.$jM();}else if(this.viewType==="Days"){$8S=this.$jN();}};if($8T&&this.viewType==="Days"&&(!$8S||$8S.length===0)){$8S=this.$jN();};var $1n={};$1n.i=0;if($8S!=null&&!DayPilot.isArray($8S)){throw "DayPilot.Scheduler.resources expects an array object";};$8S=$8S||[];var $8U=$8S.filter(function(r){return !r.frozen;});$k.rowlist=DayPilot.list();this.$jO($8U,$1n,0,null,this.treeEnabled,false,"main");var top=$8S.filter(function(r){return typeof r.frozen==="string"&&r.frozen.toLowerCase()==="top";});$k.$hr.top.rowlist=DayPilot.list();$k.$hr.top.height=0;this.$jO(top,{"i":0},0,null,false,false,"top");var $00=$8S.filter(function(r){return typeof r.frozen==="string"&&r.frozen.toLowerCase()==="bottom";});$k.$hr.bottom.rowlist=DayPilot.list();$k.$hr.bottom.height=0;this.$jO($00,{"i":0},0,null,false,false,"bottom");var $8V=$k.rowCreateHandling!=="Disabled";if($8V){this.$jP();}};this.$jP=function(){var r={};r.id="NEW";r.isNewRow=true;r.html="";r.index=$k.rowlist.length;r.loaded=true;r.start=this.startDate;r.children=[];r.height=$k.eventHeight;r.marginBottom=0;r.marginTop=0;r.getHeight=function(){if($k.rowCreateHeight){return $k.rowCreateHeight;};return $k.eventHeight+$k.rowMarginBottom+$k.rowMarginTop;};r.putIntoLine=function(){};r.resetEvents=function(){};this.rowlist.push(r);};this.$jM=function(){var $02=[];if(this.$dH&&this.resources){for(var i=0;i<this.resources.length;i++){$02.push(this.resources[i]);}};if(!this.events.list){return;};for(var i=0;i<this.events.list.length;i++){var e=this.events.list[i];var r={};r.id=e.id;r.name=e.text;r.columns=e.columns;$02.push(r);};return $02;};this.$jN=function(){var $02=[];var $O=$k.$eZ();var $8W=this.$g8.locale();for(var i=0;i<this.days;i++){var d=$O.addDays(i);if(!$k.showNonBusiness&&!$k.businessWeekends){if(d.dayOfWeek()==0||d.dayOfWeek()==6){continue;}};var r={};r.name=d.toString($8W.datePattern,$8W);r.start=d;$02.push(r);};return $02;};this.$eZ=function(){if(this.itline&&this.itline.length>0){return this.itline[0].start;};return new DayPilot.Date(this.startDate);};this.$f4=function(){if(this.itline&&this.itline.length>0){var end=$k.itline[this.itline.length-1].end;if($k.viewType!=="Days"){return end;};return end.addDays($k.days-1);};var $O=new DayPilot.Date($k.startDate);return $O.addDays($k.days);};this.visibleStart=function(){return this.$eZ();};this.visibleEnd=function(){return this.$f4();};this.$jC=function($1Y,parent){var $A={};$A.backColor=$1Y.backColor;$A.fontColor=$1Y.fontColor;$A.cssClass=$1Y.cssClass;$A.expanded=$1Y.expanded;$A.name=$1Y.name;$A.html=$1Y.html?$1Y.html:$A.name;$A.eventHeight=typeof $1Y.eventHeight!=='undefined'?$1Y.eventHeight:$k.$g8.eventHeight();$A.minHeight=typeof $1Y.minHeight!=='undefined'?$1Y.minHeight:$k.rowMinHeight;$A.marginBottom=typeof $1Y.marginBottom!=='undefined'?$1Y.marginBottom:$k.rowMarginBottom;$A.marginTop=typeof $1Y.marginTop!=='undefined'?$1Y.marginTop:$k.rowMarginTop;$A.eventStackingLineHeight=typeof $1Y.eventStackingLineHeight!=='undefined'?$1Y.eventStackingLineHeight:$k.eventStackingLineHeight;$A.loaded=!$1Y.dynamicChildren;$A.id=$1Y.id||$1Y.value;$A.toolTip=$1Y.toolTip;$A.children=[];$A.columns=[];$A.start=$1Y.start?new DayPilot.Date($1Y.start):this.$eZ();$A.isParent=$1Y.isParent;$A.contextMenu=$1Y.contextMenu?DayPilot.Util.evalVariable($1Y.contextMenu):this.contextMenuResource;$A.areas=$1Y.areas;$A.moveDisabled=$1Y.moveDisabled;$A.bubbleHtml=$1Y.bubbleHtml;$A.cellsDisabled=$1Y.cellsDisabled;$A.tags=$1Y.tags;$A.task=$1Y.task;$A.swimlane=$1Y.swimlane;$A.hideEvents=$1Y.hideEvents;$A.height=$A.eventHeight;$A.level=0;$A.resource=$1Y.$jQ;$A.lines=[];$A.blocks=[];$A.containers=[];$A.containerCache={};$A.isRow=true;$A.getHeight=function(){var $V=0;if($k.groupConcurrentEvents){for(var i=0;i<this.blocks.length;i++){var $82=this.blocks[i];$V=Math.max($V,$82.getHeight());}}else{if(this.lines.length>0){var $0P=this.lines.length-1;var $0H=this.lines[$0P];var $8X=$0H.height||this.eventHeight;var top=$0H.top||0;$V=top+$8X;}};if($V===0){$V=this.eventHeight;};return($V>this.minHeight)?$V:this.minHeight;};$A.$i0=function(){var $1G=$A.start.getTime()-$k.$eZ().getTime();var end=$k.itline[$k.itline.length-1].end.addTime($1G);return end;};$A.resetEvents=function(){var r=this;r.events=DayPilot.list();r.events.forRange=function($O,end){$O=new DayPilot.Date($O);end=end?new DayPilot.Date(end):r.$i0();var $l=DayPilot.list();for(var i=0;i<r.events.length;i++){var ev=r.events[i];if(DayPilot.Util.overlaps(ev.start(),ev.end(),$O,end)){$l.push(ev);}};return $l;};};$A.calculateUtilization=function(){var r=this;var $8Y=r.sections=getSections();for(var i=0;i<$8Y.length;i++){var $08=$8Y[i];$08.events=DayPilot.list();for(var x=0;x<r.events.length;x++){var e=r.events[x];if(DayPilot.Util.overlaps($08.start,$08.end,e.start(),e.rawend())){$08.events.push(e);}};$08.sum=function(name){var $8Z=0;for(var i=0;i<this.events.length;i++){var e=this.events[i];var $90=0;if(typeof name==="undefined"){$90=1;}else if(e.tag(name)){$90=e.tag(name);}else if(e.data[name]){$90=e.data[name];};if(typeof $90==='number'){$8Z+=$90;}};return $8Z;}};function getPoints(){var $91=[];for(var i=0;i<r.events.length;i++){var e=r.events[i];if(!DayPilot.contains($91,e.start().toString())){$91.push(e.start().toString());};if(!DayPilot.contains($91,e.rawend().toString())){$91.push(e.rawend().toString());}};$91.sort();return $91;};function getSections(){var $91=getPoints();var $8Y=[];var $08={"start":r.data.start};for(var i=0;i<$91.length;i++){$08.end=new DayPilot.Date($91[i]);$8Y.push($08);$08={"start":new DayPilot.Date($91[i])};};$08.end=r.data.end;$8Y.push($08);$8Y.forRange=function($O,end){var $02=DayPilot.list();for(var i=0;i<this.length;i++){var $08=this[i];if(DayPilot.Util.overlaps($O,end,$08.start,$08.end)){$02.push($08);}};$02.maxSum=function(name){var $C=0;for(var i=0;i<this.length;i++){var $08=this[i];var $8Z=$08.sum(name);if($8Z>$C){$C=$8Z;}};return $C;};return $02;};return $8Y;}};$A.$jR=function(){var $0H=[];$0H.height=0;$0H.add=function(ep){this.push(ep);var $8a=ep.part.$jq();if($8a>$0H.height){$0H.height=$8a;}};$0H.isFree=function($92,$93,$6r){var end=$92+$93-1;var $C=this.length;for(var i=0;i<$C;i++){var e=this[i];if(!(end<e.part.left||$92>e.part.left+e.part.width-1)){if(DayPilot.contains($6r,e.data)){continue;};return false;};if(e.part.container){if(!(end<e.part.container.left||$92>e.part.container.left+e.part.container.width-1)){return false;}};if($k.eventVersionsReserveSpace){if(!(end<e.part.versionsLeft||$92>e.part.versionsRight-1)){return false;}}};return true;};return $0H;};$A.findFreeLine=function($R,$D,$94){if(typeof $94==="number"){for(var i=0;i<=$94;i++){if(!this.lines[i]){this.lines[i]=$A.$jR();}};return $94;}else if($94==="dedicated"){var $0H=$A.$jR();$0H.isFree=function(){return false;};this.lines.push($0H);return this.lines.length-1;};for(var i=0;i<this.lines.length;i++){var $0H=this.lines[i];if($0H.isFree($R,$D)){return i;}};var $0H=$A.$jR();this.lines.push($0H);return this.lines.length-1;};$A.putIntoLine=function(ep){var $95=this;var $7W=ep.part.container;if($7W){if($7W.line===null){if(typeof ep.data.line==="number"||ep.data.line==="dedicated"){i=$A.findFreeLine($7W.left,$7W.width,ep.data.line);this.lines[i].add(ep);$7W.line=i;return i;}}}else if(typeof ep.data.line==="number"||ep.data.line==="dedicated"){i=$A.findFreeLine(ep.part.left,ep.part.width,ep.data.line);this.lines[i].add(ep);return i;};var i=-1;if($7W){if($7W.line!==null){this.lines[$7W.line].add(ep);return $7W.line;};i=$A.findFreeLine($7W.left,$7W.width);$7W.line=i;}else if($k.eventVersionsReserveSpace){i=$A.findFreeLine(ep.part.versionsLeft,ep.part.versionsWidth);}else{i=$A.findFreeLine(ep.part.left,ep.part.width);};this.lines[i].add(ep);return i;};$A.putIntoBlock=function(ep){for(var i=0;i<this.blocks.length;i++){var $82=this.blocks[i];if(DayPilot.indexOf($82.events,ep)!==-1){return;};if($82.overlapsWith(ep.part.left,ep.part.width)){$82.events.push(ep);ep.part.block=$82;$82.min=Math.min($82.min,ep.part.left);$82.max=Math.max($82.max,ep.part.left+ep.part.width);return i;}};var $82={};$82.expanded=false;$82.row=this;$82.events=DayPilot.list();$82.lines=DayPilot.list();$82.putIntoLine=function(ep){var $96=this;for(var i=0;i<this.lines.length;i++){var $0H=this.lines[i];if($0H.isFree(ep.part.left,ep.part.width)){$0H.add(ep);return i;}};var $0H=[];$0H.height=0;$0H.add=function(ep){this.push(ep);if(ep.part.height>$0H.height){$0H.height=ep.part.height;}};$0H.isFree=function($O,$D){var end=$O+$D-1;var $C=this.length;for(var i=0;i<$C;i++){var e=this[i];if(!(end<e.part.left||$O>e.part.left+e.part.width-1)){return false;}};return true;};$0H.add(ep);this.lines.push($0H);};$82.overlapsWith=function($O,$D){var end=$O+$D-1;if(!(end<this.min||$O>this.max-1)){return true;};return false;};$82.getHeight=function(){if(!this.expanded){return $k.eventHeight;};if(this.lines.length>0){var $0P=this.lines.length-1;var $0H=this.lines[$0P];var $8X=$0H.height||$k.eventHeight;var top=$0H.top||0;return top+$8X;}else{return $k.eventHeight;}};$82.clear=function(){$82.events=DayPilot.list();$82.min=null;$82.max=null;};$82.events.push(ep);ep.part.block=$82;$82.min=ep.part.left;$82.max=ep.part.left+ep.part.width;this.blocks.push($82);};$A.$jS=false;$A.$jT=parent;$A.$jU=function(){this.hidden=!this.$jV();this.$jS=false;if(this.$jT){this.$jT.$jU();}};$A.$jV=function(){if(!this.$jT){return true;};return this.$jT.$jV()&&this.$jT.expanded;};if($1Y.columns){for(var j=0;j<$1Y.columns.length;j++){$A.columns.push($1Y.columns[j]);}};return $A;};this.$g9=function(){$k.rowlist.forEach(function($A){if(typeof $k.onRowFilter==="function"&&$k.rows.$hC){var parent=$A.$jT;var $n={};$n.visible=true;$n.row=$k.$gH($A);$n.filter=$k.rows.$hC;$n.filterParam=$k.rows.$hC;$k.onRowFilter($n);$A.$jS=!$n.visible;if(!$n.visible){$A.hidden=true;}else{if(parent){parent.$jU();}}}});};this.$jW=function($8S){return !$8S.some(function(r){return r.children&&r.children.length;});};this.$jX=function($8S){return !$8S.some(function(r){return !r.children||r.children.length===0;});};this.$i8=function(name){name=name||"main";return $k.$hr[name];};this.$jO=function($8S,$1n,$1o,parent,$97,$98,$2o){if(!$8S){return;};var $99=false;if($k.rows.$jw){switch($k.rowSortingMode){case "LeavesOnly":$99=$k.$jW($8S);break;case "ParentsOnly":$99=$k.$jX($8S);break;}};if($99){var $9a=$k.rows.$jy();var $9b=$k.rows.$jx()==="desc";var $9c=DayPilot.list($8S,true);$9c.sort(function($0V,$9d){var a=$k.$j4($0V,$9a);var b=$k.$j4($9d,$9a);var $l=0;if(a===b){$l=0;}else if(typeof a==="number"&&typeof b==="number"){$l=a-b;}else{$l=$k.$js(a,b,"asc");};return $9b?-$l:$l;});$8S=$9c;};var $2m=$k.$i8($2o).rowlist;for(var i=0;i<$8S.length;i++){if(!$8S[i]){continue;};var $9e={};$9e.level=$1o;$9e.hidden=$98;$9e.index=$1n.i;if($8S[i].hidden){continue;};var $1Y=this.$jB($8S[i],$9e);var $A=$k.$jC($1Y,parent);if($98){$A.hidden=true;};$A.level=$1o;$A.index=$1n.i;$A.grid=$2o||"main";if(parent!==null){parent.children.push($1n.i);};$2m.push($A);$1n.i++;if($97&&$1Y.children&&$1Y.children.length){var $9f=$98||!$A.expanded;this.$jO($1Y.children,$1n,$1o+1,$A,true,$9f,$2o);}}};this.$jY=['text','html','backColor','cssClass','areas','horizontalAlignment','hidden'];this.$iv=function($A){if($A.isNewRow){return{"row":{"cssClass":$k.$eC("_row_new"),"moveDisabled":true,"html":$k.rowCreateHtml||""}};};var $n={};$n.row=this.$gH($A);DayPilot.Util.copyProps($A,$n.row,['html','backColor','fontColor','cssClass','toolTip','contextMenu','moveDisabled']);$n.row.columns=DayPilot.Util.createArrayCopy($A.columns,$k.$jY);$n.row.areas=DayPilot.Util.createArrayCopy($A.areas);var $7b=$k.rowHeaderColumns;if(typeof $n.row.columns==='undefined'&&$7b.length>0){r.columns=[];for(var i=0;i<$7b.length;i++){r.columns.push({});}};if(typeof this.onBeforeRowHeaderRender==="function"){this.onBeforeRowHeaderRender($n);};return $n;};this.$jB=function($1Y,$9e){var r=this.$jZ($1Y,$9e);if(typeof this.onBeforeResHeaderRender==='function'){var $n={};$n.resource=r;this.onBeforeResHeaderRender($n);};return r;};this.$jZ=function($1Y,$9e){var r={get $s(){return this.$jQ;}};for(var name in $9e){r[name]=$9e[name];};for(var name in $1Y){r[name]=$1Y[name];};if(typeof $1Y.html==='undefined'){r.html=$1Y.name;};var $9g=$k.rowHeaderColumns&&$k.rowHeaderColumns.length>0;if($9g){if(typeof r.columns==='undefined'){r.columns=[];var $7b=$k.rowHeaderColumns;if($k.$gf()){for(var i=0;i<$7b.length;i++){var $9h=$7b[i];var $5n=$k.$j4($1Y,$9h.display);r.columns.push({"text":$5n});}}else{for(var i=0;i<$7b.length;i++){r.columns.push({});}}}};r.$jQ=$1Y;return r;};this.$g6=function(){this.nav.top.dp=this;this.nav.top.innerHTML="";DayPilot.Util.addClass(this.nav.top,this.$eC("_main"));this.nav.top.setAttribute("role","region");this.nav.top.setAttribute("aria-label","scheduler");this.nav.top.style.MozUserSelect='none';this.nav.top.style.KhtmlUserSelect='none';this.nav.top.style.webkitUserSelect='none';this.nav.top.style.WebkitTapHighlightColor="rgba(0,0,0,0)";this.nav.top.style.WebkitTouchCallout="none";if(this.width){this.nav.top.style.width=this.width;};if(this.heightSpec==="Parent100Pct"){this.nav.top.style.height="100%";};this.nav.top.style.lineHeight="1.2";this.nav.top.style.position="relative";if(!this.visible){this.nav.top.style.display="none";};this.nav.top.onmousemove=this.$k0;this.nav.top.onmouseout=function(){$k.$if();};this.nav.top.ontouchstart=$9i.onMainTouchStart;this.nav.top.ontouchmove=$9i.onMainTouchMove;this.nav.top.ontouchend=$9i.onMainTouchEnd;if(this.hideUntilInit&&this.backendUrl){this.nav.top.style.visibility='hidden';};var $4f=this.$eI();var $9j=$k.timeHeaderPosition==="Top";$k.$g5=$k.timeHeaderPosition;var $9k=this.$g8.layout();if($9k==='DivBased'){var $R=document.createElement("div");$R.style.position="absolute";$R.style.left="0px";$R.style.width=($4f)+"px";var $9l=document.createElement("div");$9l.style.height="1px";$9l.className=this.$eC("_divider_horizontal");this.nav.dh1=$9l;this.nav.left=$R;if($k.timeHeaderPosition==="Top"){$R.appendChild(this.$k1());$R.appendChild($9l);$R.appendChild(this.$k2());if($k.$hr.top.enabled()||true){$R.appendChild(this.$k3());};$R.appendChild(this.$k4());}else if($k.timeHeaderPosition==="Bottom"){$R.appendChild(this.$k2());$R.appendChild($9l);$R.appendChild(this.$k1());}else{$R.appendChild(this.$k2());};var $9m=document.createElement("div");$9m.style.position="absolute";$9m.style.left=($4f)+"px";$9m.style.width=$0g.splitterWidth()+"px";$9m.style.height=(this.$eJ()+this.$eO())+"px";$9m.className=this.$eC("_divider")+" "+this.$eC("_splitter");$9m.setAttribute("unselectable","on");this.nav.divider=$9m;if(this.rowHeaderScrolling){this.$k5();};var $S=document.createElement("div");$S.style.marginLeft=($4f+$0g.splitterWidth())+"px";$S.style.marginRight='1px';$S.style.position='relative';this.nav.right=$S;var $9n=document.createElement("div");$9n.style.height="1px";if($9j){$9n.style.position="absolute";$9n.style.top=this.$eJ()+"px";};$9n.style.width="100%";$9n.className=this.$eC("_divider_horizontal");this.nav.dh2=$9n;if($k.timeHeaderPosition==="Top"){$S.appendChild($k.$k6());$S.appendChild($9n);$S.appendChild($k.$k7());if($k.$hr.top.enabled()||true){$S.appendChild($k.$k8());};$S.appendChild($k.$k9());}else if($k.timeHeaderPosition==="Bottom"){$S.appendChild($k.$k7());$S.appendChild($9n);$S.appendChild($k.$k6());}else{$S.appendChild($k.$k7());};var $9o=document.createElement("div");$9o.style.clear='left';var $9p=document.createElement("div");$9p.style.height="1px";$9p.style.position="absolute";$9p.style.left="0px";$9p.style.right="0px";$9p.style.display="none";$9p.className=this.$eC("_divider_horizontal");this.nav.dividerTop=$9p;var $9q=document.createElement("div");$9q.style.height="1px";$9q.style.position="absolute";$9q.style.left="0px";$9q.style.right="0px";$9q.style.display="none";$9q.className=this.$eC("_divider_horizontal");this.nav.dividerBottom=$9q;this.nav.top.appendChild($R);this.nav.top.appendChild($9m);this.nav.top.appendChild($S);this.nav.top.appendChild($9o);this.nav.top.appendChild($9p);this.nav.top.appendChild($9q);}else{var $7f=document.createElement("table");$7f.cellPadding=0;$7f.cellSpacing=0;$7f.border=0;$7f.style.position='absolute';var $9r=$7f.insertRow(-1);var $9s=$9r.insertCell(-1);$9s.appendChild(this.$k1());var $9t=$9r.insertCell(-1);$9t.appendChild(this.$k6());var $9u=$7f.insertRow(-1);var $9v=$9u.insertCell(-1);$9v.appendChild(this.$k2());var $9w=$9u.insertCell(-1);$9w.appendChild(this.$k7());this.nav.top.appendChild($7f);};this.$dS=document.createElement("div");this.$dS.style.display="none";this.nav.top.appendChild(this.$dS);if(this.$gZ()){var $9x=document.createElement("input");$9x.type="hidden";$9x.id=this.id+"_state";$9x.name=this.id+"_state";this.nav.state=$9x;this.nav.top.appendChild($9x);};var $7c=5;var loading=document.createElement("div");loading.style.position='absolute';loading.style.left=(this.$eI()+$0g.splitterWidth()+5)+"px";loading.style.top=(this.$eJ()+$7c)+"px";loading.style.display='none';loading.innerHTML=this.loadingLabelText;DayPilot.Util.addClass(loading,this.$eC("_loading"));this.nav.loading=loading;this.nav.top.appendChild(loading);this.$ka();$k.$kb();};this.$k0=function(ev){if($7z.row){$1X.$jI(ev);}else if(DayPilotScheduler.splitting){var $D=DayPilot.mo3($k.nav.top,ev).x;var $C=$k.$iT();var $6M=$D-1;if($k.rowHeaderCols){$6M=Math.min($C,$D-1);};$k.rowHeaderWidth=$6M;$k.$jz=false;if(!$k.rowHeaderCols){$k.$kc();};$k.$jA();}};this.$e5=function(){var $V=this.$eJ();var $9j=$k.timeHeaderPosition==="Top";if(this.nav.corner){this.nav.corner.style.height=($V)+"px";};if(this.divTimeScroll){this.divTimeScroll.style.height=$V+"px";};if(this.divNorth){this.divNorth.style.height=$V+"px";};if(this.nav.dh1&&this.nav.dh2){if($9j){this.nav.dh1.style.top=$V+"px";this.nav.dh2.style.top=$V+"px";}};this.nav.loading.style.top=($V+5)+"px";if($9j){this.nav.scroll.style.top=($V+1)+"px";}};this.$eI=function(){if(this.$jz){return 0;};var $l=0;var $9y=this.rowHeaderScrolling;if($9y){$l=this.rowHeaderWidth;}else{$l=this.$iT();};return $l;};this.$k5=function(){var $06=this.nav.divider;$06.style.cursor="col-resize";$06.setAttribute("unselectable","on");$06.onmousedown=function(ev){var $9z=DayPilotScheduler.splitting={};$9z.cursor=$k.nav.top.style.cursor;$9z.cleanup=function(){$k.nav.top.style.cursor=$9z.cursor;if(typeof $k.onRowHeaderResized==="function"){var $n={};$k.onRowHeaderResized($n);}};$k.nav.top.style.cursor="col-resize";return false;};};this.$jA=function(){var $9A=$0g.splitterWidth();var $D=this.$eI();if(this.nav.corner)this.nav.corner.style.width=$D+"px";if(this.nav.corner)this.divCorner.style.width=$D+"px";this.divResScroll.style.width=$D+"px";if($0g.layout()==="DivBased"){this.nav.left.style.width=($D)+"px";this.nav.divider.style.left=($D-$9A)+"px";this.nav.right.style.marginLeft=($D)+"px";};if(this.nav.message){this.nav.message.style.left=$k.$eH()+"px";};if(this.nav.loading){this.nav.loading.style.left=($D+$9A+5)+"px";};if(this.nav.hideIcon){var hi=this.nav.hideIcon;var $9B=$k.$eC("_header_icon_show");var $9C=$k.$eC("_header_icon_hide");hi.style.left=($D-1)+"px";if($k.$jz){DayPilot.Util.removeClass(hi,$9C);DayPilot.Util.addClass(hi,$9B);}else{DayPilot.Util.removeClass(hi,$9B);DayPilot.Util.addClass(hi,$9C);}}};this.$kc=function(){this.$iU();var $0l=this.$iT();var $9D=function($T,$D,$R){if(!$T||!$T.style){return;};var $06=$T.firstChild;if($k.$iZ){$T.style.width=$D+"px";$06.style.width=$D+"px";if(typeof $R==="number"){$T.style.left=$R+"px";}}else{$06.style.width=$D+"px";}};var $9E=function($A){var $T=$A.cells[0];if($T.colSpan>1){var $T=$A.cells[0];$9D($T,$0l);}else{if($k.rowHeaderCols){var $R=0;for(var j=0;j<$A.cells.length;j++){var $D=$k.rowHeaderCols[j];var $T=$A.cells[j];$9D($T,$D,$R);$R+=$D;}}else{var $D=$k.rowHeaderWidth;var $T=$A.cells[0];$9D($T,$D);}}};var $7f=this.divHeader;$7f.style.width=$0l+"px";var $1C=$k.$iV();for(var i=$1C.start;i<$1C.end;i++){var $A=$7f.rows[i];if(!$A){continue;};$9E($A);};if($k.$hr.top.enabled()){for(var i=0;i<$k.$hr.top.rowlist.length;i++){var $A=$k.$hr.top.divHeader.rows[i];$9E($A);}};if($k.$hr.bottom.enabled()){for(var i=0;i<$k.$hr.bottom.rowlist.length;i++){var $A=$k.$hr.bottom.divHeader.rows[i];$9E($A);}};if($k.nav.resScrollSpace){$k.nav.resScrollSpace.style.width=$0l+"px";};this.$kd();};this.$g2=function(){this.$jA();this.$kc();};this.$g1=function(){var $06=$k.nav.corner;var $0a=$0g.$iu();var scroll=document.createElement("div");scroll.style.position="absolute";scroll.style.bottom="0px";scroll.style.left="0px";scroll.style.width="100%";scroll.style.height=$0g.headerHeight()+"px";scroll.style.overflow="hidden";$k.nav.columnScroll=scroll;var $A=document.createElement("div");$A.style.position="absolute";$A.style.bottom="0px";$A.style.left="0px";$A.style.width="5000px";$A.style.height=$0g.headerHeight()+"px";$A.style.overflow="hidden";$A.className=this.$eC("_columnheader");scroll.appendChild($A);var $09=document.createElement("div");$09.style.position="absolute";$09.style.top="0px";$09.style.bottom="0px";$09.style.left="0px";$09.style.right="0px";$09.className=this.$eC("_columnheader_inner");$A.appendChild($09);if($k.$hl){$k.$hl.dispose();$k.$hl=null;};var $9F=[];$0a.forEach(function($5j){var $n={};$n.column={};$n.column.html=$5j.html||$5j.text||$5j.name||$5j.title||"";$n.column.areas=null;$n.column.sortingEnabled=!!$5j.sort;$n.column.data=$5j;$9F.push($n);if(typeof $k.onBeforeRowHeaderColumnRender==="function"){$k.onBeforeRowHeaderColumnRender($n);}});var $9G=new DayPilot.Splitter($09);$9G.enabled=$k.rowHeaderColumnsResizable;$9G.widths=DayPilot.Util.propArray($0a,"width",$k.rowHeaderColumnDefaultWidth);$9G.height=$0g.headerHeight();$9G.css.title=this.$eC("_columnheader_cell");$9G.css.titleInner=this.$eC("_columnheader_cell_inner");$9G.css.splitter=this.$eC("_columnheader_splitter");var $9H=$k.rows.$jy();var $9I=$k.rows.$jx();$9G.titles=DayPilot.list($9F).map(function($n){var $5j=$n.column.data;var $0h=$n.column.html;var title={};title.areas=[];if($5j.sort&&$n.column.sortingEnabled){var $3o=$k.$eC("_sorticon");if($9H===$5j.sort){$3o+=" "+$k.$eC("_sorticon_active");if($9I==="asc"){$3o+=" "+$k.$eC("_sorticon_asc");}else{$3o+=" "+$k.$eC("_sorticon_desc");}}else{$3o+=" "+$k.$eC("_sorticon_asc");};title.areas=[{$S:5,top:0,$00:0,$D:10,$4w:$3o,$9J:function($n){var $8t={};$8t.field=$5j.sort;if($9H===$5j.sort){$8t.order=$k.rows.$jx()==="asc"?"desc":"asc";}else{$8t.order="asc";};$k.rows.sort($8t);}}];};if(DayPilot.isArray($n.column.areas)){title.areas=title.areas.concat($n.column.areas);};title.html=$0h;return title;});$9G.data=DayPilot.list($0a,true);$9G.updating=function($n){$k.$el.skip=true;DayPilot.Util.updatePropsFromArray($0g.$iu(),"width",this.widths);$k.$g2();if($k.cellWidthSpec==="Auto"){}};$9G.updated=function($9K){$k.$iY();if($k.$ek()){if(typeof $k.onRowHeaderColumnResized==="function"){var $n={};$n.column=$0g.$iu()[$9K.index];$k.onRowHeaderColumnResized($n);}}else{switch($k.rowHeaderColumnResizedHandling){case "CallBack":break;case "PostBack":break;case "JavaScript":if(typeof $k.onRowHeaderColumnResized==="function"){var $n={};$n.column=$0g.$iu()[$9K.index];$k.onRowHeaderColumnResized($n);};break;}}};$9G.color='#000000';$9G.opacity=30;$9G.init();$06.appendChild(scroll);this.$hl=$9G;};this.$dZ=function(){var $06=this.nav.corner;if(!$06){return;};$k.$hh();$06.innerHTML='';$06.className=this.$eC('_corner');var $09=document.createElement("div");$09.style.position="absolute";$09.style.top="0px";$09.style.left="0px";$09.style.right="0px";$09.style.bottom="0px";$09.className=this.$eC('_corner_inner');this.divCorner=$09;$09.innerHTML='&nbsp;';if(this.rowHeaderColumns&&this.rowHeaderColumns.length>0){var $9L=document.createElement("div");$9L.style.position="absolute";$9L.style.top="0px";$9L.style.left="0px";$9L.style.right="0px";$9L.style.bottom=($0g.headerHeight()+1)+"px";$06.appendChild($9L);var $9m=document.createElement("div");$9m.style.position="absolute";$9m.style.left="0px";$9m.style.right="0px";$9m.style.height="1px";$9m.style.bottom=($0g.headerHeight())+"px";$9m.className=this.$eC("_divider");$06.appendChild($9m);$9L.appendChild($09);this.$g1();}else{$06.appendChild($09);};(function $a(){var $n={};$n.control=$k;$n.html=$k.cornerHtml;$n.areas=null;var $9M=null;if(typeof $k.onBeforeCornerRender==="function"){$k.onBeforeCornerRender($n);};if(typeof $k.onBeforeCornerDomAdd==="function"){$n.element=null;$k.onBeforeCornerDomAdd($n);$9M=$n.element;};if($9M){var $1M=$k.divCorner;$1M.domArgs=$n;var $7A=DayPilot.Util.isReactComponent($9M);if($7A){if(!$k.$hk.reactDOM){throw new DayPilot.Exception("Can't reach ReactDOM");};$k.$hk.reactDOM.render($9M,$1M);}else{$1M.appendChild($9M);}}else{if($k.divCorner){$k.divCorner.innerHTML=$n.html||'';}};if($n.areas){DayPilot.Areas.attach($k.nav.corner,{},{"areas":$n.areas});}})();var $9N=document.createElement("div");$9N.style.position='absolute';$9N.style.padding='2px';$9N.style.top='0px';$9N.style.left='1px';$9N.style.backgroundColor="#FF6600";$9N.style.color="white";$9N.innerHTML="\u0044\u0045\u004D\u004F";if(DayPilot.Util.isNullOrUndefined("K5woOes"))$06.appendChild($9N);};this.$ka=function(){var $9O=3;var $R=this.$eI()+$0g.splitterWidth()-1;var $D=10;var $V=20;var top=this.$eJ()+$9O;var $06=DayPilot.Util.div(this.nav.top,$R,top,$D,$V);$06.style.cursor="pointer";$06.className=$k.$eC("_header_icon");DayPilot.Util.addClass($06,$k.$eC("_header_icon_hide"));$06.onclick=function(){$k.rows.headerToggle();};this.nav.hideIcon=$06;};this.$gb=function(){if(!$k.nav.hideIcon){return;};if($k.rowlist.length>0&&$k.rowHeaderHideIconEnabled){$k.nav.hideIcon.style.display='';}else{$k.nav.hideIcon.style.display='none';}};this.$k1=function(){var $4f=this.$eI();var $06=document.createElement("div");$k.nav.corner=$06;$06.style.width=$4f+"px";$06.style.height=(this.$eJ())+"px";$06.style.overflow='hidden';$06.style.position='relative';$06.setAttribute("unselectable","on");$06.onmousemove=function(){$k.$j0();};$06.oncontextmenu=function(){return false;};this.$dZ();return $06;};this.$eJ=function(){if($k.timeHeaderPosition==="None"){return 0;};if($k.timeHeaders){var $0P=$6i.timeHeader($k.timeHeaders.length-1);return $0P.top+$0P.height;}else if(this.timeHeader){return $k.timeHeader.length*$0g.headerHeight();}else{return 0;}};this.$ke=null;this.$kf=function(){return $k.scrollStep||$k.eventHeight;};this.$k2=function(){var $06=document.createElement("div");$06.style.width=(this.$eI())+"px";$06.style.height=this.$eO()+"px";$06.style.overflow='hidden';$06.style.position='relative';$06.className=$k.$eC("_rowheader_scroll");var $I=$k.$kf();var $9P=$k.$g8.mobile();if($9P&&!$d){$06.style.overflowY="auto";};$06.onmousemove=function(){$k.$j0();};$06.onscroll=function(){if($k.nav.columnScroll&&$k.rowHeaderScrolling){$k.nav.columnScroll.scrollLeft=$06.scrollLeft;};if($k.$ke){clearTimeout($k.$ke);};if($9P){var f=function(){var $9Q=$k.$ik()-$k.nav.scroll.offsetHeight;$06.scrollTop=Math.min($06.scrollTop,$9Q);$k.nav.scroll.scrollTop=$06.scrollTop;};if(!$d){$k.$ke=setTimeout(f,10);}}else{$k.$ke=setTimeout(function(){$k.nav.scroll.scrollTop=$06.scrollTop;},500);}};$06.addEventListener("wheel",function(ev){if($k.$kg()===0){return;};var $6K;if($k.overrideWheelScrolling||$k.scrollStep){$6K=ev.deltaY>0?$I:-$I;}else{if(ev.deltaMode===1){$6K=ev.deltaY*$0g.$kh()*1.7;}else{$6K=ev.deltaY;}};$k.nav.scroll.scrollTop=$06.scrollTop+$6K;ev.preventDefault&&ev.preventDefault();},false);$06.oncontextmenu=function(){return false;};$06.onmouseenter=function(){if($k.rowHeaderScrolling){$06.style.overflowX="auto";}};$06.onmouseleave=function(){if($k.rowHeaderScrolling){$06.style.overflowX="hidden";}};$06.setAttribute("role","region");$06.setAttribute("aria-label","scheduler rows");this.divResScroll=$06;this.$eP=$06;return $06;};this.$ki=function($06){if($0g.layout()==='TableBased'){var $D=parseInt(this.width,10);var $9R=isNaN($D)||(this.width.indexOf("%")!==-1);var $9S=/MSIE/i.test(navigator.userAgent);var $4f=this.$iT();if($9R){if(this.nav.top&&this.nav.top.offsetWidth>0){$06.style.width=(this.nav.top.offsetWidth-6-$4f)+"px";}}else{$06.style.width=($D-$4f)+"px";}}};this.$hm=function(ev){$k.$e3();$k.$ej();};this.$e3=function(){if($k.$g8.layout()==='TableBased'){$k.$ki($k.nav.scroll);$k.$ki($k.divTimeScroll);};$k.$e6();$k.$iY();$k.$kj();$k.$dJ.drawArea=null;};this._wd=null;this.$hg=null;this.$kk=function(){if(!$k.watchWidthChanges){return;};if($k.$hg){return;};var $9T=function(){if(!$k.nav||!$k.nav.top){clearInterval($k.$hg);return;};if(!$k._wd){$k._wd={};$k._wd.counter=0;$k._wd.changed=false;$k._wd.width=$k.nav.top.offsetWidth;return;};if($k._wd.width!==$k.nav.top.offsetWidth){$k._wd.changed=true;$k._wd.counter=0;$k._wd.width=$k.nav.top.offsetWidth;};if($k._wd.changed){$k._wd.counter+=1;};if($k._wd.changed&&$k._wd.counter>2){$k._wd.changed=false;$k.$e3();$k.$ej();}};this.$hg=setInterval($9T,200);$9T();};this.$kj=function(){var $1C=$k.rangeHold;$k.clearSelection();$k.rangeHold=$1C;$k.$gB($1C,true);};this.$iY=function(){if(!$k.$en){return;};if($k.cellWidthSpec!=='Auto'){return;};$k.$dT();$k.$dU();$k.$e0();$k.$e7();$k.$e9();$k.$e8();$k.$dX();$k.$e1();$k.$e4();$k.$fE();$k.$ed();$k.$eb();$k.$ec();$k.$e6();};this.$dT=function(){if(this.cellWidthSpec!=='Auto'){return;};var $0l=this.nav.top.clientWidth;var $9U=this.$eI();var $9V=$k.$kg();var $1t=$0l-$9U-$9V;var $9W=this.$ip();if(!$9W){return;};var $T=$1t/this.$ip();this.cellWidth=Math.max($T,$k.cellWidthMin);$k.$eN=$T<$k.cellWidthMin;};this.$kg=function(){if($k.heightSpec==="Auto"){return 0;};if($k.heightSpec==="Max"||$k.heightSpec==="Fixed"||$k.heightSpec==="Parent100Pct"){var $09=$k.$ik();if($09>$k.height){return DayPilot.sw($k.nav.scroll);}else{return 0;}};return DayPilot.sw($k.nav.scroll);};this.$eU=function(){var $0l=this.nav.top.clientWidth;var $9U=this.$eI();var $9X=2;var $V=this.$eO();var innerHeight=this.$ik();var $9Y=$k.heightSpec==="Auto";var $9Z=0;if(innerHeight>$V&&!$9Y){$9Z=DayPilot.swa();};var $1t=$0l-$9U-$9X-$9Z;return $1t;};this.$k6=function(){var $9j=$k.timeHeaderPosition==="Top";var $06=document.createElement("div");$06.style.overflow='hidden';$06.style.display='block';if($9j){$06.style.position='absolute';$06.style.top="0px";}else{$06.style.position="relative";};$06.style.width="100%";$06.style.height=this.$eJ()+"px";$06.style.overflow="hidden";$06.onmousemove=function(){$k.$j0();if($k.cellBubble){$k.cellBubble.delayedHide();}};this.$ki($06);this.divTimeScroll=$06;var $09=document.createElement("div");$09.style.width=(this.$eF()+5000)+"px";this.divNorth=$09;$06.appendChild($09);return $06;};this.$eO=function(){var $V=0;var $8t=$k.heightSpec;if($8t==='Fixed'||$8t==="Parent100Pct"){return this.height?this.height:0;}else{$V=$k.$ik();};var $a0=$8t==="Max"||$8t==="Max100Pct";if($a0&&$V>$k.height){return $k.height;};return $V;};this.$kl=null;this.$km=0;this.$kn=0;this.$ko=0;this.$eR=function(){if(typeof $k.onHeightChanged!=="function"&&typeof $k.onDimensionsChanged!=="function"){return;};if($k.$kl){clearTimeout($k.$kl);};var $1K=function(){var $a1=$k.nav.top.offsetHeight;var $a2=$k.$km;$k.$km=$a1;var $6M=$k.nav.top.offsetWidth;var $6H=$k.$kn;$k.$kn=$6M;var $a3=$k.$eI();var $a4=$k.$ko;$k.$ko=$a3;if(typeof $k.onHeightChanged==="function"){if($a1!==$a2){var $n={};$n.oldHeight=$a2;$n.newHeight=$a1;$k.onHeightChanged($n);}};if(typeof $k.onDimensionsChanged==="function"){if($a1!==$a2||$6M!==$6H||$a3!==$a4){var $n={};$n.oldHeight=$a2;$n.newHeight=$a1;$n.oldWidth=$6H;$n.newWidth=$6M;$n.oldRowHeaderWidth=$a4;$n.newRowHeaderWidth=$a3;$k.onDimensionsChanged($n);}}};$k.$kl=setTimeout($1K,100);};this.$ik=function(){var $V;if(this.$dG!==-1){$V=this.$dG;if(this.$dG>0&&$k.nav.scroll.style.overflowX==="auto"){$V+=DayPilot.sh($k.nav.scroll);}}else{$V=this.rowlist.length*this.$g8.eventHeight();};$V+=$k.$hr.bottom.height;return $V;};this.$j0=function(){if(!$k.$kp){return;};this.$kd();this.$kq();this.$kr();this.$iR();this.$if();$k.cellBubble&&$k.cellBubble.hideOnMouseOut();$k.bubble&&$k.bubble.hideOnMouseOut();$k.$kp=false;};this.$hr={};this.$hr.top={};this.$hr.top.height=0;this.$hr.top.rowlist=[];this.$hr.top.enabled=function(){return this.rowlist&&this.rowlist.length>0;};Object.defineProperty($k.$hr.top,"top",{get:function(){return $k.$eJ()+1;},});Object.defineProperty($k.$hr.top,"right",{get:function(){return $k.$kg();},});Object.defineProperty($k.$hr.top,"heightRes",{get:function(){return this.height;},});this.$hr.bottom={};this.$hr.bottom.height=0;this.$hr.bottom.rowlist=[];this.$hr.bottom.enabled=function(){return this.rowlist&&this.rowlist.length>0;};Object.defineProperty($k.$hr.bottom,"top",{get:function(){return $k.$eJ()+$k.$eO()-this.height-DayPilot.sh($k.nav.scroll)+1;},});Object.defineProperty($k.$hr.bottom,"right",{get:function(){return $k.$kg();},});Object.defineProperty($k.$hr.bottom,"heightRes",{get:function(){return this.height+DayPilot.sh($k.nav.scroll);},});this.$hr.main={};this.$kb=function(){var $8U=$k.$hr.main;$8U.divCells=$k.divCells;$8U.divLines=$k.divLines;$8U.divHeader=$k.divHeader;$8U.divEvents=$k.divEvents;$8U.divShadow=$k.divShadow;$8U.divHover=$k.divHover;$8U.div=$k.nav.scroll;Object.defineProperty($k.$hr.main,"rowlist",{get:function(){return $k.rowlist;},});Object.defineProperty($k.$hr.main,"top",{get:function(){return $k.$eJ()+1;},});};this.$k3=function(){var $2l=$k.$hr.top;var top=$2l.top;var $V=$2l.height;var $06=document.createElement("div");$06.style.position="absolute";$06.style.left="0px";$06.style.right="0px";$06.style.top=top+"px";$06.style.height=$V+"px";$06.style.overflow="hidden";$06.style.boxSizing="border-box";$06.rows=[];$2l.divHeader=$06;return $06;};this.$k4=function(){var $2l=$k.$hr.bottom;var top=$2l.top;var $V=$2l.height;var $06=document.createElement("div");$06.style.position="absolute";$06.style.left="0px";$06.style.right="0px";$06.style.top=top+"px";$06.style.height=$V+"px";$06.style.overflow="hidden";$06.style.boxSizing="border-box";var $73=document.createElement("div");$73.style.position="absolute";$73.style.height="500px";$73.style.top=$2l.height+"px";$73.style.left="0px";$73.style.right="0px";$73.className=$k.$eC("_rowheader");$06.appendChild($73);$06.rows=[];$2l.divHeader=$06;$2l.divSpace=$73;return $06;};this.$k8=function(){var $2l=$k.$hr.top;var top=$2l.top;var $V=$2l.height;var $S=0;var $06=document.createElement("div");$06.style.position="absolute";$06.style.left="0px";$06.style.right=$S+"px";$06.style.top=top+"px";$06.style.height=$V+"px";$06.style.overflow="hidden";$06.className=$k.$eC("_grid_top");$06.onmousedown=$k.$ks;$06.onmousemove=$k.$iS;$06.oncontextmenu=$k.$kt;$k.nav.fixedTop=$06;$2l.div=$06;var $a5=$k.$ku($06);DayPilot.Util.copyProps($a5,$2l);return $06;};this.$k9=function(){var $2l=$k.$hr.bottom;var top=$2l.top;var $V=$2l.height;var $S=0;var $06=document.createElement("div");$06.style.position="absolute";$06.style.left="0px";$06.style.right=$S+"px";$06.style.bottom=top+"px";$06.style.height=$V+"px";$06.style.overflow="hidden";$06.className=$k.$eC("_grid_bottom");$06.onmousedown=$k.$ks;$06.onmousemove=$k.$iS;$06.oncontextmenu=$k.$kt;$k.nav.fixedBottom=$06;$2l.div=$06;var $a5=$k.$ku($06);DayPilot.Util.copyProps($a5,$2l);return $06;};this.$ku=function($06){var $a6=document.createElement("div");$a6.style.position="absolute";$06.appendChild($a6);var $a7=document.createElement("div");$a7.style.position="absolute";$06.appendChild($a7);var $a8=document.createElement("div");$a8.style.position="absolute";$06.appendChild($a8);var $a9=document.createElement("div");$a9.style.position="absolute";$a9.style.left="0px";$a9.style.width="100000px";$a9.style.bottom="0px";$a9.style.height="1px";$06.appendChild($a9);var $aa=document.createElement("div");$aa.style.position='absolute';$06.appendChild($aa);var $ab=document.createElement("div");$ab.style.position="absolute";$06.appendChild($ab);return{"divCells":$a6,"divLines":$a7,"divEvents":$a8,"divShadow":$ab,"divHover":$aa,};};this.$eQ=function(){var $ac=$k.$hr.top;var $ad=$k.$hr.bottom;updateGrid($ac);updateGrid($ad);$k.divStretch.style.height=($k.$dG+$ad.height)+"px";$k.nav.dividerTop.style.top=($ac.top+$ac.height-1)+"px";$k.nav.dividerTop.style.right=$ac.right+"px";$k.$kv($k.nav.dividerTop,$ac.enabled());$k.nav.dividerBottom.style.top=($ad.top-1)+"px";$k.nav.dividerBottom.style.right=($ad.right)+"px";$k.$kv($k.nav.dividerBottom,$ad.enabled());};function updateGrid($2l){$2l.div.style.right=$2l.right+"px";$2l.div.style.height=$2l.height+"px";$2l.div.style.top=$2l.top+"px";$k.$kv($2l.div,$2l.enabled());$2l.divHeader.style.height=$2l.heightRes+"px";$2l.divHeader.style.top=$2l.top+"px";$k.$kv($2l.divHeader,$2l.enabled());if($2l.divSpace){$2l.divSpace.style.top=$2l.height+"px";}};this.$kv=function(el,$ae){el.style.display=$ae?"":"none";};this.$eY=function(){var $2m=$k.rowlist;$2m=$2m.concat($k.$hr.top.rowlist);$2m=$2m.concat($k.$hr.bottom.rowlist);return $2m;};this.$kw=function(){return $k.rowlist.length>0||$k.$hr.top.rowlist.length>0||$k.$hr.bottom.rowlist.length>0;};this.$k7=function(){var $06=document.createElement("div");$06.style.overflow="auto";$06.style.overflowX="auto";$06.style.overflowY="auto";$06.style.height=(this.$eO())+"px";if($k.timeHeaderPosition==="Top"){$06.style.top=(this.$eJ()+1)+"px";$06.style.position="absolute";}else{$06.style.position="relative";};$06.style.width="100%";$06.className=this.$eC("_scrollable");$06.oncontextmenu=function(){return false;};this.$ki($06);if($k.overrideWheelScrolling){var scrollStep=$k.$kf();$06.onwheel=function(ev){var $6K=ev.deltaY>0?scrollStep:-scrollStep;$k.nav.scroll.scrollTop=$06.scrollTop+$6K;ev.preventDefault&&ev.preventDefault();};$06.onmousewheel=function(ev){ev=ev||window.event;var $6K=ev.wheelDelta<0?scrollStep:-scrollStep;$k.nav.scroll.scrollTop=$06.scrollTop+$6K;ev.preventDefault&&ev.preventDefault();ev.returnValue=false;};};this.nav.scroll=$06;this.$eq=document.createElement("div");this.$eq.style.MozUserSelect="none";this.$eq.style.KhtmlUserSelect="none";this.$eq.style.webkitUserSelect="none";this.$eq.daypilotMainD=true;this.$eq.calendar=this;if($b){this.$eq.style.webkitTransform="translateZ(0px)";};this.$eq.style.position='absolute';var $af=this.$eF();if($af>0&&!isNaN($af)){this.$eq.style.width=($af)+"px";};this.$eq.setAttribute("unselectable","on");this.$eq.onmousedown=this.$ks;this.$eq.onmousemove=this.$iS;this.$eq.onmouseup=this.$kx;this.$eq.oncontextmenu=this.$kt;this.$eq.ondblclick=this.$ky;this.$eq.className=this.$eC("_matrix");this.divStretch=document.createElement("div");this.divStretch.style.position='absolute';this.divStretch.style.height='1px';this.$eq.appendChild(this.divStretch);this.divCells=document.createElement("div");this.divCells.style.position='absolute';this.divCells.oncontextmenu=this.$kt;this.$eq.appendChild(this.divCells);this.divLines=document.createElement("div");this.divLines.style.position='absolute';this.divLines.oncontextmenu=this.$kt;this.$eq.appendChild(this.divLines);this.divBreaks=document.createElement("div");this.divBreaks.style.position='absolute';this.divBreaks.oncontextmenu=this.$kt;this.$eq.appendChild(this.divBreaks);this.divSeparators=document.createElement("div");this.divSeparators.style.position='absolute';this.divSeparators.oncontextmenu=this.$kt;this.$eq.appendChild(this.divSeparators);this.divLinksBelow=document.createElement("div");this.divLinksBelow.style.position="absolute";this.$eq.appendChild(this.divLinksBelow);this.divCrosshair=document.createElement("div");this.divCrosshair.style.position='absolute';this.divCrosshair.ondblclick=this.$ky;this.divCrosshair.onmousedown=this.$kz;this.$eq.appendChild(this.divCrosshair);this.divRange=document.createElement("div");this.divRange.style.position='absolute';this.divRange.oncontextmenu=this.$kt;this.$eq.appendChild(this.divRange);this.divEvents=document.createElement("div");this.divEvents.style.position='absolute';this.$eq.appendChild(this.divEvents);this.divSeparatorsAbove=document.createElement("div");this.divSeparatorsAbove.style.position='absolute';this.divSeparatorsAbove.oncontextmenu=this.$kt;this.$eq.appendChild(this.divSeparatorsAbove);this.divLinksAbove=document.createElement("div");this.divLinksAbove.style.position="absolute";this.$eq.appendChild(this.divLinksAbove);this.divLinkShadow=document.createElement("div");this.divLinkShadow.style.position="absolute";this.$eq.appendChild(this.divLinkShadow);this.divLinkpoints=document.createElement("div");this.divLinkpoints.style.position="absolute";this.$eq.appendChild(this.divLinkpoints);this.divRectangle=document.createElement("div");this.divRectangle.style.position="absolute";this.$eq.appendChild(this.divRectangle);this.divHover=document.createElement("div");this.divHover.style.position='absolute';this.$eq.appendChild(this.divHover);this.divShadow=document.createElement("div");this.divShadow.style.position='absolute';this.$eq.appendChild(this.divShadow);$06.appendChild(this.$eq);return $06;};this.$kA={};var $1h=this.$kA;$1h.create=function(){if($k.nav.overlay){return;};var $06=document.createElement('div');$06.style.position="absolute";$06.style.left="0px";$06.style.right="0px";$06.style.top="0px";$06.style.bottom="0px";$06.className=$k.$eC("_block");$k.nav.top.appendChild($06);$k.nav.overlay=$06;};$1h.show=function(){$1h.create();$k.nav.overlay.style.display='';};$1h.hide=function(){if($k.nav.overlay){$k.nav.overlay.style.display='none';}};this.$gV=function($j){$j=$j||{};var $0i=$j.delay||0;var $5n=$j.text||$k.loadingLabelText;var $82=typeof $j.block!=="undefined"?$j.block:$k.blockOnCallBack;if($k.loadingTimeout){window.clearTimeout($k.loadingTimeout);};var $ag=function(){if($k.loadingLabelVisible||$j.text){$k.nav.loading.innerHTML=$5n;$k.nav.loading.style.display='';};if($82){$1h.show();}};if($0i===0){$ag();}else{$k.loadingTimeout=window.setTimeout($ag,$0i);}};this.$dN=function(){if(this.loadingTimeout){window.clearTimeout(this.loadingTimeout);};this.nav.loading.style.display='none';$1h.hide();};this.loadingStart=function($j){$k.$gV($j);};this.loadingStop=function(){$k.$dN();};this.uiBlock=function(){$1h.show();};this.uiUnblock=function(){$1h.hide();};this.$kB=function(){this.startDate=new DayPilot.Date(this.startDate).getDatePart();};this.$kC=function($ah){var $06=document.createElement("div");$06.style.position="absolute";$06.style.top="-2000px";$06.style.left="-2000px";$06.className=this.$eC($ah);document.body.appendChild($06);var $V=$06.offsetHeight;var $D=$06.offsetWidth;document.body.removeChild($06);var $l={};$l.height=$V;$l.width=$D;return $l;};this.$dO=function($ai){if($ai){this.autoRefreshEnabled=true;};if(!this.autoRefreshEnabled){return;};if(this.$dy>=this.autoRefreshMaxCount){return;};this.$gU();var $aj=this.autoRefreshInterval;if(!$aj||$aj<10){throw "The minimum autoRefreshInterval is 10 seconds";};this.autoRefreshTimeout=window.setTimeout(function(){$k.$kD();},this.autoRefreshInterval*1000);};this.$gU=function(){if(this.autoRefreshTimeout){window.clearTimeout(this.autoRefreshTimeout);this.autoRefreshTimeout=null;}};this.autoRefreshStart=function($ai){$k.$dO($ai);};this.autoRefreshPause=function(){$k.$gU();};this.$kE=function(){return !DayPilotScheduler.resizing&&!DayPilotScheduler.moving&&!DayPilotScheduler.drag&&!DayPilotScheduler.range;};this.$kD=function(){if($k.$kE()){var $5G=false;if(typeof this.onAutoRefresh==='function'){var $n={};$n.i=this.$dy;$n.preventDefault=function(){this.preventDefault.value=true;};$k.onAutoRefresh($n);if($n.preventDefault.value){$5G=true;}};if(!$5G&&this.$eS()){this.commandCallBack(this.autoRefreshCommand);};this.$dy++;};if(this.$dy<this.autoRefreshMaxCount){this.autoRefreshTimeout=window.setTimeout(function(){$k.$kD();},this.autoRefreshInterval*1000);}};this.$kF=function(){if(!DayPilotScheduler.globalHandlers){DayPilotScheduler.globalHandlers=true;DayPilot.re(document,'mousemove',DayPilotScheduler.gMouseMove);DayPilot.re(document,'mouseup',DayPilotScheduler.gMouseUp);DayPilot.re(document,'mousedown',DayPilotScheduler.gMouseDown);DayPilot.re(document,'touchmove',DayPilotScheduler.gTouchMove);DayPilot.re(document,'touchend',DayPilotScheduler.gTouchEnd);DayPilot.re(window,'keyup',DayPilotScheduler.gKeyUp);};DayPilot.re(window,'resize',this.$hm);};this.$kG=function(){this.nav.scroll.root=this;this.nav.scroll.onscroll=this.$ej;$k.$iq=this.nav.scroll.scrollLeft;$k.$io=this.nav.scroll.scrollTop;if(this.divNorth){$k.$ir=this.divNorth.clientWidth;}};this.$eg=function(){if(!this.nav.state){return;};var $ak={};$ak.scrollX=this.nav.scroll.scrollLeft;$ak.scrollY=this.nav.scroll.scrollTop;var $N=$k.$h1($ak.scrollX,$ak.scrollY);var $1C=$k.$h2($N);var $1Y=$k.$h3($N);$ak.rangeStart=$1C.start;$ak.rangeEnd=$1C.end;$ak.resources=$1Y;if(this.syncResourceTree){$ak.tree=this.$h4();};this.nav.state.value=DayPilot.he(JSON.stringify($ak));};this.$ec=function(){if(!this.separators){return;};for(var i=0;i<this.separators.length;i++){this.$kH(i);}};this.$kI={};this.$kI.step=300;this.$kI.delay=10;this.$kI.mode="display";this.$kI.layers=false;this.$it=function($A){if($k.$dB){$7Y.calculateEventPositionsRow($A);return;};var $al=true;var $81=0;for(var j=0;j<$A.lines.length;j++){var $0H=$A.lines[j];$0H.height=0;$0H.top=$81;for(var k=0;k<$0H.length;k++){var e=$0H[k];if(!e.part.top||$al){e.part.line=j;if(!e.part.height){e.part.height=$A.eventHeight;};var $8a=e.part.$jq();if($8a>$0H.height){$0H.height=$8a;};e.part.top=$81+$A.marginTop;var $2P=$k.eventVersionPosition==="Above";if($k.eventVersionsEnabled&&!DayPilot.list(e.versions).isEmpty()){var $89=e.cache||e.data;var $0p=$89.versions.length;var top=e.part.top;if(!$2P){top+=e.part.height+$k.eventVersionMargin;};DayPilot.list($89.versions).forEach(function($6b,i){if(!e.versions[i]){return;};var offset=i*($k.eventVersionHeight+$k.eventVersionMargin);e.versions[i].top=top+offset;if($2P){e.part.top+=$k.eventVersionHeight;e.part.top+=$k.eventVersionMargin;}});};e.part.top+=$k.eventMarginBottom;e.part.right=e.part.left+e.part.width;e.part.fullTop=this.rowlist[e.part.dayIndex].top+e.part.top;e.part.fullBottom=e.part.fullTop+e.part.height;}};$81+=($0H.height||$A.eventHeight)*$A.eventStackingLineHeight/100;}};var $7Y={};$7Y.loadRow=function($A){$A.evColumns=DayPilot.list($k.itline).map(function($T,i){return{"events":DayPilot.list()};});DayPilot.list($A.events).forEach(function(e){var $O=e.start();var $T=$k.$fb($O);$A.evColumns[$T.i].events.push(e);});};$7Y.calculateEventPositions=function(){var $9Y=$k.$dC;var $2K=0;DayPilot.list($k.rowlist).forEach(function($A){var $0f=0;$A.evColumns.forEach(function($5y,i){var $T=$k.itline[i];var top=$k.rowMarginTop;$5y.events.forEach(function(e){e.part.left=$T.left;e.part.width=$T.width;e.part.top=top;if(!e.part.height){if($9Y){e.part.height=$7Y.getEventAutoHeight(e)+$k.durationBarHeight;}else{e.part.height=$A.eventHeight;}};top+=e.part.height+$k.eventMarginBottom;});$5y.height=top;if($5y.height>$0f){$0f=$5y.height;}});$A.maxColumnHeight=$0f;$A.top=$2K;var $am=$A.height;$A.height=$A.getHeight();if($0f>$k.rowMarginTop){$A.height=$0f+$k.rowMarginBottom;};if($am!==$A.height){$k.$gk=true;};$2K+=$A.height;});$k.$dG=$2K;};$7Y.getEventAutoHeight=function(e){var $0h=e.client.html();var $06=document.createElement("div");$06.style.position="absolute";$06.style.top="-2000px";$06.style.left="-2000px";$06.style.width=e.part.width+"px";$06.className=$k.$eC($0b.event);var $09=document.createElement("div");$09.className=$k.$eC($0b.eventInner);$09.innerHTML=$0h;$09.style.position='static';$09.style.overflow='auto';$06.appendChild($09);var parent=$k.divEvents;parent.appendChild($06);var $V=$06.offsetHeight;parent.removeChild($06);return $V;};$7Y.calculateEventPositionsRow=function($A){$7Y.calculateEventPositions();};$7Y.drawEventsWithoutCheckingOverflow=function(){DayPilot.list($k.rowlist).forEach(function($A){$7Y.drawEventsRow($A);});};$7Y.drawEvents=function(){$7Y.drawEventsWithoutCheckingOverflow();$7Y.checkOverflow();$k.$e4();$k.$e6();};$7Y.checkOverflow=function(){if(!$k.$dC){return;};var $an=false;DayPilot.list($k.elements.events).forEach(function($06){var $09=$06.firstChild;var $ao=$09.offsetHeight-$09.clientHeight+$06.offsetHeight-$06.clientHeight;var $ap=$09.scrollHeight+$ao;var $a2=$06.event.part.height;$06.event.part.height=$ap;if($a2!==$ap){$an=true;}});if($an){$k.$e8();$7Y.calculateEventPositions();$7Y.drawEventsWithoutCheckingOverflow();$k.$e7();$k.$eb();}};$7Y.drawEventsRow=function($A){$A.evColumns.forEach(function($5y,i){$5y.events.forEach(function(e){$k.$hI(e);});});};this.$g4=null;this.$ed=function($aq){if($k.$dF){return;};if($k.$dB){$7Y.drawEvents();return;};var $I=this.$kI.step;var $ar=this.$kI.layers;if($ar){$k.divEvents=document.createElement("div");$k.divEvents.style.position='absolute';$k.$eq.insertBefore(this.divEvents,this.divSeparatorsAbove);};if(this.$kI.mode==='display'){this.divEvents.style.display='none';}else if(this.$kI.mode==='visibility'){this.divEvents.style.visibility='hidden';};this.divEvents.setAttribute("role","region");this.divEvents.setAttribute("aria-label","scheduler events");var $as=this.dynamicEventRendering==='Progressive';var $N=this.$ev();var top=$N.pixels.top;var $00=$N.pixels.bottom;var $at=$k.allowMultiMove||$k.allowMultiResize;var $2m=$k.rowlist.filter(function($A){var $2K=$A.top-$k.dynamicEventRenderingMargin;var $au=$2K+$A.height+2*$k.dynamicEventRenderingMargin;if($as&&!$at&&($00<=$2K||top>=$au)){return false;};return true;});if($k.$hr.top.enabled()){$2m=$2m.concat($k.$hr.top.rowlist);};if($k.$hr.bottom.enabled()){$2m=$2m.concat($k.$hr.bottom.rowlist);};$2m.forEach(function($A){$k.$it($A);for(var j=0;j<$A.lines.length;j++){var $0H=$A.lines[j];for(var k=0;k<$0H.length;k++){var e=$0H[k];var $av=$k.$hI(e);if($aq&&$av){$I--;if($I<=0){$k.divEvents.style.visibility='';$k.divEvents.style.display='';$k.$g4=window.setTimeout(function(){$k.$ed($aq);},$k.$kI.delay);return;}}}}});this.divEvents.style.display='';if(!DayPilot.list($k.multiselect.$fp).isEmpty()){$k.multiselect.redraw();};this.$ey();$1u.load();};this.$gm=function($aw,$2o){var $2l=$k.$i8($2o);var $A=$2l.rowlist[$aw];if($k.$dB){$7Y.drawEventsRow($A);return;};this.divEvents=document.createElement("div");this.divEvents.style.position='absolute';this.divEvents.style.display='none';this.$eq.insertBefore(this.divEvents,this.divSeparatorsAbove);this.$it($A);for(var j=0;j<$A.lines.length;j++){var $0H=$A.lines[j];for(var k=0;k<$0H.length;k++){var e=$0H[k];this.$hI(e);}};this.divEvents.style.display='';};this.$e8=function(){if(this.elements.events){var length=this.elements.events.length;for(var i=0;i<length;i++){var $06=this.elements.events[i];this.$hH($06);}};this.elements.events=[];};this.$gl=function($aw,$2o){$2o=$2o||"main";if(this.elements.events){var length=this.elements.events.length;var $ax=[];for(var i=0;i<length;i++){var $06=this.elements.events[i];var e=$06.event;if(e.part.dayIndex===$aw&&e.part.grid===$2o){this.$hH($06);$ax.push(i);}};for(var i=$ax.length-1;i>=0;i--){this.elements.events.splice($ax[i],1);}}};this.$hH=function($06){var $2f=$06.domArgs;$06.domArgs=null;if($2f&&typeof $k.onDomRemoveEvent==="function"){$k.onDomRemoveEvent($2f);};if($2f&&typeof $k.onBeforeEventDomRemove==="function"){$k.onBeforeEventDomRemove($2f);};if($2f&&typeof $k.onBeforeEventDomAdd==="function"&&$k.$hk.reactDOM){var $1M=$2f&&$2f.$ho;if($1M){var $2g=DayPilot.Util.isReactComponent($2f.element);if($2g){if(!$k.$hk.reactDOM){throw new DayPilot.Exception("Can't reach ReactDOM");};$k.$hk.reactDOM.unmountComponentAtNode($1M);}}};if($06.parentNode){$06.parentNode.removeChild($06);};$06.onclick=null;$06.oncontextmenu=null;$06.onmouseover=null;$06.onmouseout=null;$06.onmousemove=null;$06.onmousedown=null;$06.ondblclick=null;if($06.event){$06.event.rendered=null;$06.event=null;};if($06.related){DayPilot.de($06.related);}};this.$kJ=function($06){if($06.event){$06.event.rendered=false;};$06.onclick=null;$06.onmousedown=null;$06.event=null;if($06.parentNode){$06.parentNode.removeChild($06);}};this.$kK=function(){if(this.dynamicEventRendering!=='Progressive'){return;};var $ay=$k.dynamicEventRenderingCacheSweeping;if(!$ay){return;};var $az=$k.dynamicEventRenderingCacheSize||0;this.divEvents.style.display='none';var $aA=[];var $aB=0;var length=this.elements.events.length;for(var i=length-1;i>=0;i--){var $06=this.elements.events[i];if(this.$kL($06.event)){if($az>0){$az--;$aA.unshift($06);}else{this.$hH($06);$aB++;}}else{$aA.unshift($06);}};this.elements.events=$aA;this.divEvents.style.display='';};this.$kM=function($az){var $aA=[];var $aB=0;var $N=this.$ev();var length=this.elements.cells.length;for(var i=length-1;i>=0;i--){var $06=this.elements.cells[i];var $aC=($N.xStart<$06.coords.x&&$06.coords.x<=$N.xEnd)&&($N.yStart<$06.coords.y&&$06.coords.y<=$N.yEnd);if(!$aC){if($az>0){$az--;$aA.unshift($06);}else{this.$hR($06);$aB++;}}else{$aA.unshift($06);}}};this.$hR=function($06){if(!$06){return;};if(!$06.coords){return;};var x=$06.coords.x;var y=$06.coords.y;var $2o=$06.coords.grid;DayPilot.rfa($k.elements.cells,$06);DayPilot.de($06);$k.$dJ.cells[$2o+"_"+x+"_"+y]=null;};this.$e9=function(){if(this.elements.separators){for(var i=0;i<this.elements.separators.length;i++){var $06=this.elements.separators[i];DayPilot.de($06);}};this.elements.separators=[];};this.$kN=function(){var $as=this.dynamicEventRendering==='Progressive';if(!this.nav.scroll){return false;};var top=this.nav.scroll.scrollTop;var $00=top+this.nav.scroll.clientHeight;for(var i=0;i<this.rowlist.length;i++){var $A=this.rowlist[i];var $2K=$A.top;var $au=$A.top+$A.height;if($as&&($00<=$2K||top>=$au)){continue;};for(var j=0;j<$A.lines.length;j++){var $0H=$A.lines[j];for(var k=0;k<$0H.length;k++){var e=$0H[k];if(this.$kO(e)){return true;}}}};return false;};this.$kO=function($s){if($s.rendered){return false;};var $as=this.dynamicEventRendering==='Progressive';var $R=this.nav.scroll.scrollLeft;var $S=$R+this.nav.scroll.clientWidth;var $aD=$s.part.left;var $aE=$s.part.left+$s.part.width;if($as&&($S<=$aD||$R>=$aE)){return false;};return true;};this.$kL=function(ev){if(!ev.rendered){return true;};var $N=this.$ev();var top=$N.pixels.top;var $00=$N.pixels.bottom;var $R=$N.pixels.left-this.dynamicEventRenderingMargin;var $S=$N.pixels.right+this.dynamicEventRenderingMargin;var $aD=ev.part.left;var $aE=ev.part.right;var $aF=ev.part.fullTop;var $aG=ev.part.fullBottom;if($S<=$aD||$R>=$aE){return true;};if($00<=$aF||top>=$aG){return true;};return false;};this.$jp=DayPilot.list();this.$kP=function($82){if($82.rendered){return false;};var $A=$82.row;if($A.hidden){return false;};var $R=$82.min;var $D=$82.max-$82.min;var $V=$k.eventHeight;var top=$82.row.top;var $06=document.createElement("div");$06.style.position='absolute';$06.style.left=$R+'px';$06.style.top=top+'px';$06.style.width=$D+'px';$06.style.height=$V+'px';$06.className=$k.$eC("_event_group");$06.style.cursor="pointer";var $n={};$n.group={};$n.group.count=$82.events.length;$n.group.events=DayPilot.list($82.events,true);$n.group.html="&#x1F7A7; "+$82.events.length+" events";if(typeof $k.onBeforeGroupRender==="function"){$k.onBeforeGroupRender($n);};var $09=document.createElement("div");$09.innerHTML=$n.group.html;$06.appendChild($09);$06.onmousedown=function(ev){var ev=ev||window.event;ev.cancelBubble=true;};$06.onclick=function(ev){var $82=$06.event;$82.expanded=true;$k.$kJ($06);var $aH=DayPilot.indexOf($k.elements.events,$06);if($aH!==-1){$k.elements.events.splice($aH,1);};var $02=$k.$jp;DayPilot.list($82.events).forEach(function(e){$02.push(e.id());});$k.$fE();$k.$fF([$A]);$k.$e6();var ev=ev||window.event;ev.cancelBubble=true;};$82.part={};$82.part.left=$R;$82.part.width=$D;$82.part.height=$k.eventHeight;$82.part.dayIndex=DayPilot.indexOf($k.rowlist,$82.row);$82.part.top=0;$82.part.isBlock=true;$82.client={};$82.client.html=function(){return $n.group.html;};$82.data={};$06.event=$82;this.elements.events.push($06);this.divEvents.appendChild($06);$82.rendered=true;return true;};this.$hI=function(e,$j){$j=$j||{};var $aI=$j.forced;if(e.rendered){return false;};if($k.groupConcurrentEvents){var $82=e.part.block;if($82.events.length>1&&!$82.expanded){return $k.$kP($82);}};var $as=this.dynamicEventRendering==='Progressive';var $aw=e.part.dayIndex;var $2o=e.part.grid||"main";var $2l=$k.$hr[$2o];var $a8=$2l.divEvents;var $2m=$2l.rowlist;var $A=$2m[$aw];if($A.hidden){return false;};var $2K=$A.top;var $N=this.$ev();var $R=$N.pixels.left-this.dynamicEventRenderingMargin;var $S=$N.pixels.right+this.dynamicEventRenderingMargin;var top=$N.pixels.top;var $00=$N.pixels.bottom;var $aD=e.part.left;var $aE=e.part.left+e.part.width;var $aF=e.part.top+$2K;var $aG=$aF+e.part.height;var $aJ=$k.multiselect.$fP(e);var $aK=$S<=$aD||$R>=$aE;var $aL=$2o==="main"&&($00<=$aF||top>=$aG);if(!$aI&&!$aJ&&$as&&($aK||$aL)){return false;};var $3v=e.data.type==="Milestone";var $D=e.part.width;var $V=e.part.height;var $0c=e.cache||e.data;$D=DayPilot.Util.atLeast(0,$D);$V=DayPilot.Util.atLeast(0,$V);var $06=document.createElement("div");$06.related=[];(function drawVersions(parent){if(!$k.eventVersionsEnabled){return;};DayPilot.list($0c.versions).forEach(function($6b,i){if(!$6b){return;};var $aM=e.versions[i];if(!$aM){return;};var $06=document.createElement("div");$06.style.position="absolute";$06.style.overflow="hidden";$06.style.left=$aM.left+'px';$06.style.top=($2K+$aM.top)+'px';$06.style.width=$aM.width+'px';$06.style.height=$k.eventVersionHeight+'px';$06.className=$k.$eC($0b.event)+" "+$k.$eC("_event_previous")+" "+$k.$eC("_event_version");$06.onmousedown=function(ev){ev.preventDefault();ev.stopPropagation();};if($6b.toolTip){$06.title=$6b.toolTip;};if($6b.cssClass){DayPilot.Util.addClass($06,$6b.cssClass);};var $09=document.createElement("div");$09.setAttribute("unselectable","on");$09.className=$k.$eC($0b.eventInner);$09.innerHTML=$6b.html||$6b.text||"";if($6b.backColor){$09.style.background=$6b.backColor;};if($6b.fontColor){$09.style.color=$6b.fontColor;};if($6b.borderColor){$09.style.borderColor=$6b.borderColor;};if($6b.backImage){$09.style.backgroundImage="url("+$6b.backImage+")";if($6b.backRepeat){$09.style.backgroundRepeat=$6b.backRepeat;}};$06.appendChild($09);if($aM.continueLeft&&!$3v){DayPilot.Util.addClass($06,$k.$eC("_event_continueleft"));};if($aM.continueRight&&!$3v){DayPilot.Util.addClass($06,$k.$eC("_event_continueright"));};var $5Q=$k.durationBarVisible&&!$6b.barHidden;var $D=$aM.width;if($5Q&&$D>0){var $5U=100*$aM.barLeft/($D);var $5V=Math.ceil(100*$aM.barWidth/($D));if($k.durationBarMode==="PercentComplete"){$5U=0;$5V=$6b.complete||0;};var $4v=document.createElement("div");$4v.setAttribute("unselectable","on");$4v.className=$k.$eC($0b.eventBar);$4v.style.position="absolute";if($6b.barBackColor){$4v.style.backgroundColor=$6b.barBackColor;};var $aN=document.createElement("div");$aN.setAttribute("unselectable","on");$aN.className=$k.$eC($0b.eventBarInner);$aN.style.left=$5U+"%";if(0<$5V&&$5V<=1){$aN.style.width="1px";}else{$aN.style.width=$5V+"%";};if($6b.barColor){$aN.style.backgroundColor=$6b.barColor;};if($6b.barImageUrl){$aN.style.backgroundImage="url("+$6b.barImageUrl+")";};$4v.appendChild($aN);$06.appendChild($4v);};if($6b.htmlLeft){var $7c=$k.eventHtmlLeftMargin;var $aO=document.createElement("div");$aO.style.position='absolute';$aO.style.right=-($aM.left-$7c)+'px';$aO.style.top=($2K+$aM.top)+'px';$aO.style.height=$k.eventHeight+'px';$aO.style.boxSizing="border-box";$aO.innerHTML=$6b.htmlLeft;$aO.className=$k.$eC("_event_left");$aO.type="divLeft";$aO.versionPart=$aM;parent.related.push($aO);$a8.appendChild($aO);};if($6b.htmlRight){var $7c=$k.eventHtmlRightMargin;var $aP=document.createElement("div");$aP.style.position='absolute';$aP.style.left=($aM.left+$aM.width+$7c)+'px';$aP.style.top=($2K+$aM.top)+'px';$aP.style.height=$k.eventHeight+'px';$aP.style.boxSizing="border-box";$aP.innerHTML=$6b.htmlRight;$aP.className=$k.$eC("_event_right");$aP.type="divRight";$aP.versionPart=$aM;parent.related.push($aP);$a8.appendChild($aP);};$06.versionPart=$aM;$06.type="version";var $0d=DayPilot.list($6b.areas,true);$0d.map(function($N){return DayPilot.Util.copyProps($N);});$0d.forEach(function($N){if($N.start){$N.left=$k.getPixels(new DayPilot.Date($N.start)).left-$R;if($N.end){$N.width=$k.getPixels(new DayPilot.Date($N.end)).left-$N.left-$R;}}});if(!$0d.isEmpty()){DayPilot.Areas.attach($06,$6b,{"areas":$0d});};parent.related.push($06);$a8.appendChild($06);});})($06);if($0c.htmlLeft){var $7c=$k.eventHtmlLeftMargin;var $aO=document.createElement("div");$aO.style.position='absolute';$aO.style.right=-(e.part.left-$7c)+'px';$aO.style.top=($2K+e.part.top)+'px';$aO.style.height=$k.eventHeight+'px';$aO.style.boxSizing="border-box";$aO.innerHTML=$0c.htmlLeft;$aO.className=$k.$eC("_event_left");$aO.type="divLeft";$06.related.push($aO);$a8.appendChild($aO);};if($0c.htmlRight){var $7c=$k.eventHtmlRightMargin;var $aP=document.createElement("div");$aP.style.position='absolute';$aP.style.left=(e.part.left+e.part.width+$7c)+'px';$aP.style.top=($2K+e.part.top)+'px';$aP.style.height=$k.eventHeight+'px';$aP.style.boxSizing="border-box";$aP.innerHTML=$0c.htmlRight;$aP.className=$k.$eC("_event_right");$aP.type="divRight";$06.related.push($aP);$a8.appendChild($aP);};var top=$2K+e.part.top;if($k.treeAnimation){var $aQ=typeof $A.forcedHeight==="number"?$A.forcedHeight:$A.height;if(e.part.top+e.part.height>$aQ){$V=Math.max(0,$aQ-e.part.top);}};$06.style.position='absolute';$06.style.left=(e.part.left+$k.eventMarginLeft)+'px';$06.style.top=($2K+e.part.top)+'px';$06.style.width=($D-$k.eventMarginLeft-$k.eventMarginRight)+'px';$06.style.height=$V+'px';if(!$k.eventTextWrappingEnabled){$06.style.whiteSpace='nowrap';};$06.style.overflow='hidden';$06.className=this.$eC($0b.event);if($3v){DayPilot.Util.addClass($06,$k.$eC("_task_milestone"));};if(e.data.type==="Group"){DayPilot.Util.addClass($06,$k.$eC("_task_parent"));DayPilot.Util.addClass($06,$k.$eC("_task_group"));};if($0c.cssClass){DayPilot.Util.addClass($06,$0c.cssClass);};var $aR=true;if($aR&&typeof e.part.line==="number"){DayPilot.Util.addClass($06,this.$eC($0b.eventLine+e.part.line));};$06.setAttribute("unselectable","on");if(this.showToolTip&&!this.bubble){$06.title=e.client.toolTip()||"";};$06.onmousemove=this.$kQ;$06.onmouseout=this.$kR;$06.onmousedown=this.$kS;$06.onmouseup=this.$kT;$06.ontouchstart=$9i.onEventTouchStart;$06.ontouchmove=$9i.onEventTouchMove;$06.ontouchend=$9i.onEventTouchEnd;if(e.client.clickEnabled()){$06.onclick=this.$fc;};if(e.client.doubleClickEnabled()){$06.ondblclick=this.$ft;};$06.oncontextmenu=this.$fs;if(typeof $0c.ariaLabel!=="undefined"){$06.setAttribute("aria-label",$0c.ariaLabel);}else{$06.setAttribute("aria-label",$0c.text);};$06.setAttribute("tabindex","-1");var $aS=[];var $aT=0;var $09=document.createElement("div");$09.setAttribute("unselectable","on");$09.className=$k.$eC($0b.eventInner);if($0c.backColor){$09.style.background=$0c.backColor;};if($0c.fontColor){$09.style.color=$0c.fontColor;};if($0c.borderColor==="darker"&&$0c.backColor){$09.style.borderColor=DayPilot.ColorUtil.darker($0c.backColor,2);}else{$09.style.borderColor=$0c.borderColor;};if($0c.backImage){$09.style.backgroundImage="url("+$0c.backImage+")";if($0c.backRepeat){$09.style.backgroundRepeat=$0c.backRepeat;}};$06.appendChild($09);var $aU=e.start().getTime()===e.part.start.getTime();var $aV=e.rawend().getTime()===e.part.end.getTime();if(!$aU&&!$3v){DayPilot.Util.addClass($06,this.$eC("_event_continueleft"));};if(!$aV&&!$3v){DayPilot.Util.addClass($06,this.$eC("_event_continueright"));};if(e.client.barVisible()&&$D>0&&!$3v){var $5U=100*e.part.barLeft/($D);var $5V=Math.ceil(100*e.part.barWidth/($D));if(this.durationBarMode==="PercentComplete"){$5U=0;$5V=$0c.complete||0;};var $4v=document.createElement("div");$4v.setAttribute("unselectable","on");$4v.className=this.$eC($0b.eventBar);$4v.style.position="absolute";if($0c.barBackColor){$4v.style.backgroundColor=$0c.barBackColor;};var $aN=document.createElement("div");$aN.setAttribute("unselectable","on");$aN.className=this.$eC($0b.eventBarInner);$aN.style.left=$5U+"%";if(0<$5V&&$5V<=1){$aN.style.width="1px";}else{$aN.style.width=$5V+"%";};if($0c.barColor){$aN.style.backgroundColor=$0c.barColor;};if($0c.barImageUrl){$aN.style.backgroundImage="url("+$0c.barImageUrl+")";};$4v.appendChild($aN);$06.appendChild($4v);};$06.row=$aw;if($0c.areas){for(var i=0;i<$0c.areas.length;i++){var $N=$0c.areas[i];if(!DayPilot.Areas.isVisible($N)){continue;};if($N.start){$N.left=$k.getPixels(new DayPilot.Date($N.start)).left-e.part.left;};if($N.end){$N.right=e.part.left+e.part.width-$k.getPixels(new DayPilot.Date($N.end)).left;};var a=DayPilot.Areas.createArea($06,e,$N);$06.appendChild(a);}};$06.event=e;if($aJ){$k.multiselect.add($06.event,true);$k.multiselect.$fO($06);};(function domAdd(){if(typeof $k.onBeforeEventDomAdd!=="function"&&typeof $k.onBeforeEventDomRemove!=="function"){if(!$3v){$09.innerHTML=e.client.innerHTML();};return;};var $n={};$n.control=$k;$n.e=e;$n.element=null;$06.domArgs=$n;if(typeof $k.onDomAddEvent==="function"){$k.onDomAddEvent($n);};if(typeof $k.onBeforeEventDomAdd==="function"){$k.onBeforeEventDomAdd($n);};if($n.element){var $1M=$09;if($1M){$n.$ho=$1M;var $7A=DayPilot.Util.isReactComponent($n.element);if($7A){if(!$k.$hk.reactDOM){throw new DayPilot.Exception("Can't reach ReactDOM");};$k.$hk.reactDOM.render($n.element,$1M);}else{$1M.appendChild($n.element);}}}else if(!$3v){$09.innerHTML=e.client.innerHTML();}})();this.elements.events.push($06);$a8.appendChild($06);e.rendered=true;if($k.$ek()){if(typeof $k.onAfterEventRender==='function'){var $n={};$n.e=$06.event;$n.div=$06;$k.onAfterEventRender($n);}}else{if($k.afterEventRender){$k.afterEventRender($06.event,$06);}};return true;};this.$ek=function(){return $k.api===2;};this.$gn=function(){for(var i=0;i<this.elements.events.length;i++){var $06=this.elements.events[i];var event=$06.event;var $aw=event.part.dayIndex;var $2l=$k.$i8(event.part.grid);var $A=$2l.rowlist[$aw];var $2K=$A.top;var top=$2K+event.part.top;var $aQ=typeof $A.forcedHeight==="number"?$A.forcedHeight:$A.height;var $V=event.part.height;var $aW=false;if(event.part.top+event.part.height>$aQ){$V=Math.max(0,$aQ-event.part.top);$aW=true;};$06.style.top=top+'px';$06.style.height=$V+"px";DayPilot.list($06.related).filter(function($04){return !!$04.versionPart;}).forEach(function($aX){var $aM=$aX.versionPart;$aX.style.top=($2K+$aM.top)+'px';});DayPilot.list($06.related).filter(function($04){return !$04.versionPart&&($04.type==="divLeft"||$04.type==="divRight");}).forEach(function($aX){$aX.style.top=top+'px';});}};this.$fV=function(e){if(!e){return null;};for(var i=0;i<$k.elements.events.length;i++){var $06=$k.elements.events[i];if($06.event===e||$06.event.data===e.data){return $06;}};return null;};this.$hB=function(e){var ev=$k.events.$hx(e.data);if(!ev){return null;};var $A=$k.rowlist[ev.part.dayIndex];$k.$it($A);$k.$hI(ev,{"forced":true});return $k.$fV(ev);};this.$kR=function(ev){var $06=this;DayPilot.Areas.hideAreas($06,ev);if($06.active){return;};DayPilot.Util.removeClass($06,$k.$eC("_event_hover"));$k.$kU($06);if(!$2D.source){$1u.hideLinkpointsWithDelay();};if($k.bubble&&$k.eventHoverHandling==='Bubble'){$k.bubble.hideOnMouseOut();}};this.$kV=function($06){if(typeof this.onEventMouseOver==="function"){var $n={};$n.div=$06;$n.e=$06.event;this.onEventMouseOver($n);}};this.$kU=function($06){if(typeof this.onEventMouseOut==="function"){var $n={};$n.div=$06;$n.e=$06.event;this.onEventMouseOut($n);}};this.$kW=function($06){var $A=$06.row;if(typeof this.onRowMouseOver==="function"){var $n={};$n.div=$06;$n.row=$k.$gH($A);this.onRowMouseOver($n);}};this.$kX=function($06){var $A=$06.row;if(typeof this.onRowMouseOut==="function"){var $n={};$n.div=$06;$n.row=$k.$gH($A);this.onRowMouseOut($n);}};this.$kQ=function(ev){ev=ev||window.event;if($k.cellBubble){$k.cellBubble.delayedHide();};var $06=this;while($06&&!$06.event){$06=$06.parentNode;};$k.$kY($06,ev);var $aY=$06.event.cache?$06.event.cache.deleteDisabled:$06.event.data.deleteDisabled;if(!$06.active){var $0d=[];if($k.eventDeleteHandling!=="Disabled"&&!$aY){var top=$k.durationBarVisible?$k.durationBarHeight:0;$0d.push({"action":"JavaScript","v":"Hover","w":17,"h":17,"top":top+2,"right":2,"css":$k.$eC($0b.eventDelete),"js":function(e){$k.$fn(e);}});};var $02=$06.event.cache?$06.event.cache.areas:$06.event.data.areas;if($02&&$02.length>0){$0d=$0d.concat($02);};DayPilot.Areas.showAreas($06,$06.event,null,$0d);DayPilot.Util.addClass($06,$k.$eC("_event_hover"));$k.$kV($06);};if($k.linkCreateHandling!=="Disabled"&&!$2D.source){$1u.clearHideTimeout();$1u.hideLinkpoints();if($k.$kE()){$1u.showLinkpoint($06);}};$k.$fj(ev);$k.coords.insideEvent=true;};this.$fd={};this.$kT=function(ev){var $6A=$k.$fd;if(!$k.ionicEventClickFix){return;};var $aZ=$6A.originalMouse;if(!$aZ){return;};var $b0=DayPilot.mc(ev);if($aZ.x===$b0.x&&$aZ.y===$b0.y){$k.$fc.call(this,ev);ev.preventDefault();ev.stopPropagation();}};this.$kS=function(ev){$k.$j0();if(typeof DayPilot.Bubble!=='undefined'){DayPilot.Bubble.hideActive();DayPilot.Bubble.cancelShowing();};ev=ev||window.event;$k.$fj(ev);var $b1=DayPilot.Util.mouseButton(ev);ev.preventDefault();ev.stopPropagation();if($b1.left){var $1N=ev.shiftKey;if($0g.$fm()!=="Disabled"&&$1N){$13.start();return false;};if(this.style.cursor==='w-resize'||this.style.cursor==='e-resize'){DayPilotScheduler.preventEventClick=true;DayPilotScheduler.resizing=this;DayPilotScheduler.resizingEvent=this.event;DayPilotScheduler.originalMouse=DayPilot.mc(ev);document.body.style.cursor=this.style.cursor;$1u.hideLinkpoints();}else if((this.style.cursor==='move')||($k.moveBy==='Full'&&this.event.client.moveEnabled())){$k.$kZ(this,ev);}};if(DayPilot.Menu&&DayPilot.Menu.active){DayPilot.Menu.active.hide();DayPilot.Menu.active=null;}};this.$kZ=function($06,ev){var $6A=$k.$fd;$k.$fj(ev);$6A.start=true;$6A.moving=$06;$6A.movingEvent=$06.event;$6A.originalMouse=DayPilot.mc(ev);$6A.moveOffsetX=DayPilot.mo3($06,ev).x;$6A.moveDragStart=$k.getDate($k.coords.x,true);$1u.hideLinkpoints();};this.$l0={};var $9i=$k.$l0;if(typeof DayPilot.Global.touch==="undefined"){DayPilot.Global.touch={};};DayPilot.Global.touch.active=false;DayPilot.Global.touch.start=false;$9i.timeouts=[];$9i.onEventTouchStart=function(ev){if(DayPilot.Global.touch.active||DayPilot.Global.touch.start){return;};ev.stopPropagation();$9i.clearTimeouts();DayPilot.Global.touch.start=true;DayPilot.Global.touch.active=false;var $06=this;$k.coords=$9i.relativeCoords(ev);var $b2=$k.tapAndHoldTimeout;$9i.timeouts.push(window.setTimeout(function(){DayPilot.Global.touch.active=true;DayPilot.Global.touch.start=false;ev.preventDefault();var e=$06.event;switch($k.eventTapAndHoldHandling){case "Move":if(e.client.moveEnabled()){var $2k=touchMousePos(ev);$9i.startMoving($06,$2k);};break;case "ContextMenu":if(DayPilot.Menu){DayPilot.Menu.touchPosition(ev);};var $12=e.client.contextMenu();if($12){$12.show(e);}else{if($k.contextMenu){$k.contextMenu.show(e);}};break;}},$b2));};$9i.onEventTouchMove=function(ev){$9i.clearTimeouts();DayPilot.Global.touch.start=false;};$9i.onEventTouchEnd=function(ev){if(DayPilot.Util.isMouseEvent(ev)){return;};$9i.clearTimeouts();if(DayPilot.Global.touch.start){DayPilot.Global.touch.start=false;ev.preventDefault();ev.stopPropagation();var $06=this;window.setTimeout(function(){$k.$fh($06,ev);});};window.setTimeout(function(){DayPilot.Global.touch.start=false;DayPilot.Global.touch.active=false;},500);};$9i.onMainTouchStart=function(ev){if(DayPilot.Global.touch.active||DayPilot.Global.touch.start){return;};if(ev.touches.length>1){return;};if($k.timeRangeSelectedHandling==='Disabled'){return;};$9i.clearTimeouts();DayPilot.Global.touch.start=true;DayPilot.Global.touch.active=false;var $b2=$k.tapAndHoldTimeout;$9i.timeouts.push(window.setTimeout(function(){DayPilot.Global.touch.active=true;DayPilot.Global.touch.start=false;ev.preventDefault();$k.coords=$9i.relativeCoords(ev);$9i.range=$k.$l1();},$b2));var $b3=true;if($b3){$k.coords=$9i.relativeCoords(ev);}};$9i.onMainTouchMove=function(ev){$9i.clearTimeouts();DayPilot.Global.touch.start=false;if(DayPilotScheduler.resizing){ev.preventDefault();$9i.updateResizing();return;};if(DayPilot.Global.touch.active){ev.preventDefault();$k.coords=$9i.relativeCoords(ev);if(DayPilotScheduler.moving){$9i.updateMoving();return;};if($9i.range){var $1C=$9i.range;$1C.end={x:Math.floor($k.coords.x/$k.cellWidth),"time":$k.getDate($k.coords.x,true)};$k.$gB($1C);}}};$9i.debug=function($g){};$9i.onMainTouchEnd=function(ev){$9i.clearTimeouts();var $b3=true;if(DayPilot.Global.touch.active){if(DayPilotScheduler.moving){ev.preventDefault();var e=DayPilotScheduler.movingEvent;if($k!==DayPilotScheduler.movingShadow.calendar){return;};var $0v=DayPilotScheduler.movingShadow.start;var $1a=DayPilotScheduler.movingShadow.end;var $1i=($k.viewType!=='Days')?DayPilotScheduler.movingShadow.row.id:null;var external=DayPilotScheduler.drag&&e.part.external;var $3i=DayPilotScheduler.movingShadow.overlapping;var $b4=!DayPilotScheduler.movingShadow.allowed;DayPilot.Util.removeClass(DayPilotScheduler.moving,$k.$eC($k.$l2.eventMovingSource));DayPilot.de(DayPilotScheduler.movingShadow);$k.$iR();DayPilotScheduler.movingShadow.calendar=null;document.body.style.cursor='';DayPilotScheduler.moving=null;DayPilotScheduler.movingEvent=null;DayPilotScheduler.movingShadow=null;$k.$iJ.clear();if($3i||$b4||$k.$iJ.forbidden||$k.$iJ.invalid){return;};$k.$gr(e,$0v,$1a,$1i,external);};if($9i.range){var $1C=$9i.range;$9i.range=null;var $2n=$k.elements.range2;if($2n&&$2n.overlapping){$k.clearSelection();}else{$k.$gx($1C);}}}else if(DayPilot.Global.touch.start&&$b3){if($k.coords.x<$k.getScrollX()){return;};var $1C=$k.$l1();$k.$gB($1C);var $2n=$k.elements.range2;if($2n&&$2n.overlapping){$k.clearSelection();}else{$k.$gx($1C);}};window.setTimeout(function(){DayPilot.Global.touch.start=false;DayPilot.Global.touch.active=false;},500);};$9i.clearTimeouts=function(){for(var i=0;i<$9i.timeouts.length;i++){clearTimeout($9i.timeouts[i]);};$9i.timeouts=[];};$9i.relativeCoords=function(ev){var $6w=$k.$eq;var t=ev.touches?ev.touches[0]:ev;var x=t.pageX;var y=t.pageY;var $2k=offset(x,y,$6w);$2k.grid="main";if($k.$hr.top.enabled()){var top=$k.$hr.top;var $b5=offset(x,y,top.divCells);if($b5.y>0&&$b5.y<=top.height){$2k=$b5;$2k.grid="top";}};if($k.$hr.bottom.enabled()){var $00=$k.$hr.bottom;var $b6=offset(x,y,$00.divCells);if($b6.y>0&&$b6.y<=top.height){$2k=$b6;$2k.grid="bottom";}};function offset(x,y,$06){var $b7=DayPilot.abs($06);var $2k={x:x-$b7.x,y:y-$b7.y,toString:function(){return "x: "+this.x+", y:"+this.y;}};return $2k;};return $2k;};$9i.startMoving=function($06,$2k){DayPilotScheduler.moving=$06;DayPilotScheduler.movingEvent=$06.event;DayPilotScheduler.originalMouse=$2k;var $b8=DayPilot.abs($06);DayPilotScheduler.moveOffsetX=$2k.x-$b8.x;DayPilotScheduler.moveDragStart=$k.getDate($k.coords.x,true);DayPilotScheduler.movingShadow=$k.$hp($06);$k.$ie();};$9i.startResizing=function($06,$4a){DayPilotScheduler.resizing=$06;DayPilotScheduler.resizingEvent=$06.event;DayPilotScheduler.resizing.dpBorder=$4a;if(!DayPilotScheduler.resizingShadow){DayPilotScheduler.resizingShadow=$k.$hp($06);};$k.$iL();};$9i.updateResizing=function(){if(!DayPilotScheduler.resizingShadow){var mv=DayPilotScheduler.resizing;DayPilotScheduler.resizingShadow=$k.$hp(mv);};$k.$iL();var $2k={x:$k.coords.x,y:$k.coords.y,"grid":$k.coords.grid};$k.$l3($2k);};$9i.updateMoving=function(){if(DayPilotScheduler.movingShadow&&DayPilotScheduler.movingShadow.calendar!==$k){$k.$iR();};if(!DayPilotScheduler.movingShadow){var mv=DayPilotScheduler.moving;DayPilotScheduler.movingShadow=$k.$hp(mv);};var $1M=DayPilotScheduler.movingShadow.calendar;$1M.$ie();var $2k={x:$k.coords.x,y:$k.coords.y,"grid":$k.coords.grid};$k.$l3($2k);};this.$kY=function($06,ev){var $b9=this.eventResizeMargin;var $ba=this.eventMoveMargin;var $2h=$06;if(typeof(DayPilotScheduler)==='undefined'){return;};var offset=DayPilot.mo3($06,ev);if(!offset){return;};$k.eventOffset=offset;if(DayPilotScheduler.resizing){return;};if(DayPilotScheduler.moving){return;};var $bb=$2h.event.part.start.toString()===$2h.event.start().toString();var $bc=$2h.event.part.end.toString()===$2h.event.rawend().toString();if($k.moveBy==='Top'&&offset.y<=$ba&&$2h.event.client.moveEnabled()&&$k.eventMoveHandling!=='Disabled'){$06.style.cursor='move';}else if(($k.moveBy==='Top'||$k.moveBy==='Full')&&offset.x<=$b9&&$2h.event.client.resizeEnabled()&&$k.eventResizeHandling!=='Disabled'){if($bb){$06.style.cursor="w-resize";$06.dpBorder='left';}else{$06.style.cursor='not-allowed';}}else if($k.moveBy==='Left'&&offset.x<=$ba&&$2h.event.client.moveEnabled()&&$k.eventMoveHandling!=='Disabled'){$06.style.cursor="move";}else if($06.offsetWidth-offset.x<=$b9&&$2h.event.client.resizeEnabled()&&$k.eventResizeHandling!=='Disabled'){if($bc){$06.style.cursor="e-resize";$06.dpBorder='right';}else{$06.style.cursor='not-allowed';}}else if(!DayPilotScheduler.resizing&&!DayPilotScheduler.moving){if($2h.event.client.clickEnabled()&&$k.eventClickHandling!=='Disabled'){$06.style.cursor='pointer';}else{$06.style.cursor='default';}};if(typeof(DayPilot.Bubble)!=='undefined'&&$k.bubble&&$k.eventHoverHandling==='Bubble'){if($06.style.cursor==='default'||$06.style.cursor==='pointer'){var $bd=this.$l4&&offset.x===this.$l4.x&&offset.y===this.$l4.y;var $bd=false;if(!$bd){this.$l4=offset;$k.bubble.showEvent($06.event);}}else{}}};this.$ip=function(){if(this.viewType!=='Days'){return this.itline.length;}else{return Math.floor(24*60/this.cellDuration);}};this.$gz=function($1C){var $1C=$1C||DayPilotScheduler.range||$k.rangeHold;if(!$1C){return null;};var $A=$k.rowlist[$1C.start.y];if(!$A){return null;};var r=$1C.$l5?$1C.$l5:$1C;var $be=r.end.time>r.start.time;var $1B=$A.id;var $W=$be?r.start.x:r.end.x;var $X=($be?r.end.x:r.start.x);var $1G=$A.start.getTime()-this.$eZ().getTime();var $3N=$k.snapToGrid&&$k.snapToGridTimeRangeSelecting;var $O,end;if($3N){$O=this.itline[$W].start.addTime($1G);end=this.itline[$X].end.addTime($1G);}else{if($be){$O=r.start.time;end=r.end.time;}else{$O=r.end.time;end=r.start.time;}};return new DayPilot.Selection($O,end,$1B,$k);};this.$l6=function($2h){var $bf=$2h.parentNode;var $6O=$k.eventEditMinWidth;var $bg=document.createElement('textarea');$bg.style.position='absolute';$bg.style.width=(($2h.offsetWidth<$6O)?$6O:($2h.offsetWidth-2))+'px';$bg.style.height=($2h.offsetHeight-2)+'px';$bg.style.fontFamily=DayPilot.gs($2h,'fontFamily')||DayPilot.gs($2h,'font-family');$bg.style.fontSize=DayPilot.gs($2h,'fontSize')||DayPilot.gs($2h,'font-size');$bg.style.left=$2h.offsetLeft+'px';$bg.style.top=$2h.offsetTop+'px';$bg.style.border='1px solid black';$bg.style.padding='0px';$bg.style.marginTop='0px';$bg.style.backgroundColor='white';$bg.value=($2h.event.text()||"").trim();$bg.event=$2h.event;$bf.appendChild($bg);return $bg;};this.$l7=function($06){var $2T=$U.events();$2T.sort(function(a,b){var e1=a.event;var e2=b.event;if(e1.part.dayIndex!==e2.part.dayIndex){return e1.part.dayIndex-e2.part.dayIndex;};if(e1.start()!==e2.start()){return e1.start().getTime()-e2.start().getTime();};return e2.end().getTime()-e1.end().getTime();});var $1n=$2T.indexOf($06);if($1n===-1){return null;};if($1n+1<$2T.length){return $2T[$1n+1];};return $2T[0];};this.$fk=function($2h){if(!$2h){return;};if(DayPilotScheduler.editing){DayPilotScheduler.editing.blur();};if(!$2h.event){return;};var $bg=this.$l6($2h);DayPilotScheduler.editing=$bg;DayPilot.re($bg,DayPilot.touch.start,function(ev){ev.stopPropagation();});$bg.onblur=function(){$bg.onblur=null;if(DayPilotScheduler.editing===$bg){DayPilotScheduler.editing=null;};if($bg.parentNode){$bg.parentNode.removeChild($bg);};if(!$2h.event){return;};var $bh=$2h.event.text();var $1I=$bg.value;$k.$gR($2h.event,$1I,$bg.canceling);};$bg.onmousedown=function(e){e=e||window.event;e.stopPropagation&&e.stopPropagation();};$bg.onkeypress=function(e){var $8F=(window.event)?event.keyCode:e.keyCode;if($8F===13){this.onblur();return false;};return true;};$bg.cancel=function(){if(DayPilotScheduler.editing){DayPilotScheduler.editing.canceling=true;DayPilotScheduler.editing.blur();}};$bg.onkeydown=function(e){var $8F=(window.event)?event.keyCode:e.keyCode;if($8F===27){DayPilotScheduler.editing.cancel();}else if($8F===9){var $42=$k.$l7($2h);DayPilotScheduler.editing.cancel();if($42){if(DayPilot.browser.ie){setTimeout(function(){$k.$fk($42);},0);}else{$k.$fk($42);}};return false;}};$bg.select();$bg.focus();};this.$l8={};this.$l8.resource=(function(){return typeof(DayPilot.Bubble)!=='undefined'?new DayPilot.Bubble():{"showResource":function(){},"hideOnMouseOut":function(){}};})();this.$l8.cell=(function(){return typeof(DayPilot.Bubble)!=='undefined'?new DayPilot.Bubble():{"showResource":function(){},"hideOnMouseOut":function(){}};})();this.$j7=function(ev){var td=this;var $A=td.row;if(typeof(DayPilot.Bubble)!=='undefined'){if($k.cellBubble){};var r=$k.$gH($A);r.div=td;if($k.resourceBubble){$k.resourceBubble.showResource(r);}else if($A.bubbleHtml){$k.$l8.resource.showResource(r);}}};this.$j5=function(ev){var $06=this;if($06.active){return;};$06.active=true;$k.$kW($06);};this.$j6=function(ev){var $06=this;delete $06.active;$k.$kX($06);};this.$j8=function(ev){var td=this;if(typeof(DayPilot.Bubble)!=='undefined'&&$k.resourceBubble){$k.resourceBubble.hideOnMouseOut();}else{$k.$l8.resource.hideOnMouseOut();};var $06=td.firstChild;DayPilot.Areas.hideAreas($06,ev);$06.data=null;};this.$j9=function(ev){if($7z.row){$1X.cancelClick=true;setTimeout(function(){$1X.cancelClick=false;},100);}};this.$e0=function(){if($k.timeHeaderPosition==="None"){return;};if(!this.timeHeader){return;};this.$dJ.timeHeader={};if($k.elements.timeHeader.length>0){$k.$hj();$k.elements.timeHeader=[];};var $9U=document.createElement("div");$9U.style.position="relative";this.nav.timeHeader=$9U;for(var y=0;y<this.timeHeader.length;y++){var $A=this.timeHeader[y];for(var x=0;x<$A.length;x++){this.$l9(x,y);}};var $bi=this.divNorth;if($bi.childNodes.length===1){$bi.replaceChild($9U,$bi.childNodes[0]);}else{if(DayPilot.browser.ie){if($bi&&$bi.firstChild){var $bj=[];for(var i=0;i<$bi.firstChild.childNodes.length;i++){$bj.push($bi.firstChild.childNodes[i]);};DayPilot.de($bj);}};$bi.innerHTML='';$bi.appendChild($9U);};var $af=this.$eF();$bi.style.width=($af+5000)+"px";if($af>0){this.divStretch.style.width=($af)+"px";}};this.$hh=function(){if(!$k.divCorner){return;};var $2f=$k.divCorner&&$k.divCorner.domArgs;$k.divCorner.domArgs=null;if(!$2f){return;};if(typeof $k.onBeforeCornerDomRemove==="function"){$k.onBeforeCornerDomRemove($2f);};if(typeof $k.onBeforeCornerDomAdd==="function"&&$k.$hk.reactDOM){var $1M=$k.divCorner;if($1M){var $2g=DayPilot.Util.isReactComponent($2f.element);if($2g){if(!$k.$hk.reactDOM){throw new DayPilot.Exception("Can't reach ReactDOM");};$k.$hk.reactDOM.unmountComponentAtNode($1M);}}}};this.$f6=function(h,$bk){var $0h=null;var $8W=this.$g8.locale();var $bk=$bk||this.cellGroupBy;var $0U=h.start;var to=h.end;switch($bk){case 'Minute':$0h=$0U.toString("m");break;case 'Hour':$0h=($k.$g8.timeFormat()==='Clock12Hours')?$0U.toString("h tt",$8W):$0U.toString("H",$8W);break;case 'Day':$0h=$0U.toString($8W.datePattern);break;case 'Week':$0h=$0g.weekStarts()===1?$0U.weekNumberISO():$0U.weekNumber();break;case 'Month':$0h=$0U.toString("MMMM yyyy",$8W);break;case 'Quarter':$0h="Q"+Math.floor($0U.getMonth()/3+1);break;case 'Year':$0h=$0U.toString("yyyy");break;case 'None':$0h='';break;case 'Cell':var $0Y=(h.end.ticks-h.start.ticks)/60000;$0h=this.$la($0U,$0Y);break;default:throw new DayPilot.Exception("Invalid groupBy value: "+$bk);};return $0h;};this.$la=function($O,$0Y){var $8W=this.$g8.locale();var $0Y=$0Y||this.cellDuration;if($0Y<1){return $O.toString("ss");}else if($0Y<60){return $O.toString("mm");}else if($0Y<1440){return $k.$g8.timeFormat()==='Clock12Hours'?$O.toString("h tt",$8W):$O.toString("H",$8W);}else if($0Y<10080){return $O.toString("d");}else if($0Y===10080){return $0g.weekStarts()===1?$O.weekNumberISO():$O.weekNumber();}else{return $O.toString("MMMM yyyy",$8W);}};this.$f2=function($0U){var $4L=this.scale;switch($4L){case "Cell":throw "Invalid scale: Cell";case "Manual":throw "Internal error (addScaleSize in Manual mode)";case "CellDuration":return $0U.addMinutes(this.cellDuration);default:return this.$f5($0U,$4L,true);}};this.$f5=function($0U,$bk,$bl){var to;var $bm=this.viewType!=='Days'?this.days:1;var $0E=this.startDate.addDays($bm);if($k.scale==="Manual"){$0E=$k.$f4();};var $bk=$bk||this.cellGroupBy;var $40=60;switch($bk){case 'Minute':if($0U.getMinutes()+$0U.getSeconds()+$0U.getMilliseconds()>0){$0U=$0U.getDatePart().addHours($0U.getHours()).addMinutes($0U.getMinutes());};to=$0U.addMinutes(1);break;case 'Hour':if($0U.getHours()+$0U.getMinutes()+$0U.getSeconds()+$0U.getMilliseconds()>0){$0U=$0U.getDatePart().addHours($0U.getHours());};to=$0U.addHours(1);break;case 'Day':to=$0U.getDatePart().addDays(1);break;case 'Week':to=$0U.getDatePart().addDays(1);while(to.dayOfWeek()!==$0g.weekStarts()){to=to.addDays(1);};break;case 'Month':$0U=$0U.getDatePart();to=$0U.addMonths(1);to=to.firstDayOfMonth();var $bn=(DayPilot.DateUtil.diff(to,$0U)/(1000.0*60))%$40===0;while(!$bn){to=to.addHours(1);$bn=(DayPilot.DateUtil.diff(to,$0U)/(1000.0*60))%$40===0;};break;case "Quarter":$0U=$0U.getDatePart();to=$0U.addMonths(1);to=to.firstDayOfMonth();while(to.getMonth()%3){to=to.addMonths(1);};var $bn=(DayPilot.DateUtil.diff(to,$0U)/(1000.0*60))%$40===0;while(!$bn){to=to.addHours(1);$bn=(DayPilot.DateUtil.diff(to,$0U)/(1000.0*60))%$40===0;};break;case 'Year':$0U=$0U.getDatePart();to=$0U.addYears(1);to=to.firstDayOfYear();var $bn=(DayPilot.DateUtil.diff(to,$0U)/(1000.0*60))%$40===0;while(!$bn){to=to.addHours(1);$bn=(DayPilot.DateUtil.diff(to,$0U)/(1000.0*60))%$40===0;};break;case 'None':to=$0E;break;case 'Cell':var $T=this.$fb($0U);if($T.current){to=$T.current.end;}else{if($T.past){to=$T.previous.end;}else{to=$T.next.start;}};break;default:if($bl){throw new DayPilot.Exception("Invalid scale value: "+$bk);}else{throw new DayPilot.Exception("Invalid groupBy value: "+$bk);}};if(to.getTime()>$0E.getTime()){to=$0E;};return to;};this.$l2={};this.$l2.timeheadercol="_timeheadercol";this.$l2.timeheadercolInner="_timeheadercol_inner";this.$l2.resourcedivider="_resourcedivider";this.$l2.eventFloat="_event_float";this.$l2.eventFloatInner="_event_float_inner";this.$l2.event="_event";this.$l2.eventInner="_event_inner";this.$l2.eventBar="_event_bar";this.$l2.eventBarInner="_event_bar_inner";this.$l2.eventDelete="_event_delete";this.$l2.eventLine="_event_line";this.$l2.eventMovingSource="_event_moving_source";var $0b=this.$l2;this.$l9=function(x,y){var $9U=this.nav.timeHeader;var p=this.timeHeader[y][x];var $bo=y<this.timeHeader.length-1;var $R=p.left;var $D=p.width;var $6h=$6i.timeHeader(y);var top=$6h.top;var $V=$6h.height;var $T=document.createElement("div");$T.style.position="absolute";$T.style.top=top+"px";$T.style.left=$R+"px";$T.style.width=$D+"px";$T.style.height=$V+"px";if(p.toolTip){$T.title=p.toolTip;};$T.setAttribute("aria-hidden","true");if(p.cssClass){DayPilot.Util.addClass($T,p.cssClass);};$T.setAttribute("unselectable","on");$T.style.KhtmlUserSelect='none';$T.style.MozUserSelect='none';$T.style.webkitUserSelect='none';$T.oncontextmenu=function(){return false;};$T.cell={};$T.cell.start=p.start;$T.cell.end=p.end;$T.cell.level=y;$T.cell.th=p;$T.onclick=this.$je;$T.oncontextmenu=this.$jf;$T.style.overflow='hidden';if(!$k.timeHeaderTextWrappingEnabled){$T.style.whiteSpace="nowrap";};var $09=document.createElement("div");$09.setAttribute("unselectable","on");if(p.innerHTML){$09.innerHTML=p.innerHTML;};if(p.backColor){$09.style.background=p.backColor;};if(p.fontColor){$09.style.color=p.fontColor;};var cl=this.$eC($0b.timeheadercol);var $bp=this.$eC($0b.timeheadercolInner);if($bo){cl=this.$eC("_timeheadergroup");$bp=this.$eC("_timeheadergroup_inner");};DayPilot.Util.addClass($T,cl);DayPilot.Util.addClass($09,$bp);DayPilot.Util.addClass($T,$k.$eC("_timeheader_cell"));DayPilot.Util.addClass($09,$k.$eC("_timeheader_cell_inner"));DayPilot.list(p.areas).forEach(function($N){if($N.start){$N.left=$k.getPixels(new DayPilot.Date($N.start)).left-$R;if($N.end){$N.width=$k.getPixels(new DayPilot.Date($N.end)).left-$N.left-$R;}}});(function domAdd(){if(typeof $k.onBeforeTimeHeaderDomAdd!=="function"&&typeof $k.onBeforeTimeHeaderDomRemove!=="function"){return;};var $n={};$n.control=$k;$n.header={};$n.header.start=p.start;$n.header.end=p.end;$n.header.level=y;$n.element=null;$T.domArgs=$n;if(typeof $k.onBeforeTimeHeaderDomAdd==="function"){$k.onBeforeTimeHeaderDomAdd($n);var $9M=$n.element;if($9M){var $1M=$09;$n.$ho=$1M;$09.innerHTML="";var $7A=DayPilot.Util.isReactComponent($9M);if($7A){if(!$k.$hk.reactDOM){throw new DayPilot.Exception("Can't reach ReactDOM");};$k.$hk.reactDOM.render($9M,$1M);}else{$1M.appendChild($9M);}}}})();$T.appendChild($09);DayPilot.Areas.attach($T,p,{"areas":p.areas});this.$dJ.timeHeader[x+"_"+y]=$T;this.elements.timeHeader.push($T);$9U.appendChild($T);};this.$fE=function(){if($k.$dB){$7Y.calculateEventPositions();return;};var $2m=$k.$eY();$2m.forEach(function($A){var $aA=$A.getHeight()+$A.marginBottom+$A.marginTop;if($A.height!==$aA){$k.$gk=true;};$A.height=$aA;});if($k.$gk){$k.$dJ.drawArea=null;}};this.$e4=function(){var $2m=$k.$eY();$2m.forEach(function($A){if($A.hidden){return;};var $9U=$k.$i8($A.grid).divHeader;if(!$9U){return;};var $1n=$A.index;if(!$9U.rows[$1n]){return;};for(var c=0;c<$9U.rows[$1n].cells.length;c++){var $bq=$9U.rows[$1n].cells[c];if($k.$iZ){$bq.style.top=$A.top+"px";};var $a1=$A.height;if($bq&&$bq.firstChild&&parseInt($bq.firstChild.style.height,10)!==$a1){$bq.firstChild.style.height=$a1+"px";}}});if($k.$iZ){if($k.nav.resScrollSpace){$k.nav.resScrollSpace.style.top=$k.$dG+"px";}}};this.$kH=function($1n){var s=this.separators[$1n];s.location=s.location||s.Location;s.color=s.color||s.Color;s.layer=s.layer||s.Layer;s.width=s.width||s.Width;s.opacity=s.opacity||s.Opacity;var $0T=new DayPilot.Date(s.location);var $2N=s.color;var $D=s.width?s.width:1;var $2P=s.layer?s.layer==='AboveEvents':false;var $br=s.opacity?s.opacity:100;if($0T.getTime()<$k.$eZ().getTime()){return;};if($0T.getTime()>=$k.$f4().getTime()){return;};var $B=this.getPixels($0T);if($B.cut){return;};if($B.left<0){return;};if($B.left>$k.$eF()){return;};var $0H=document.createElement("div");$0H.style.width=$D+'px';$0H.style.height=$k.$dG+'px';$0H.style.position='absolute';$0H.style.left=($B.left-1)+'px';$0H.style.top='0px';$0H.style.backgroundColor=$2N;$0H.style.opacity=$br/100;$0H.style.filter="alpha(opacity="+$br+")";$0H.className=$k.$eC("_separator");if(s.cssClass){$0H.className+=" "+s.cssClass;};if($2P){this.divSeparatorsAbove.appendChild($0H);}else{this.divSeparators.appendChild($0H);};this.elements.separators.push($0H);};this.$kz=function(ev){return;};this.$ky=function(ev){if($k.timeRangeDoubleClickHandling==='Disabled'){return false;};if(DayPilotScheduler.timeRangeTimeout){clearTimeout(DayPilotScheduler.timeRangeTimeout);DayPilotScheduler.timeRangeTimeout=null;};var $1C={};$k.$fj(ev);ev=ev||window.event;ev.stopPropagation&&ev.stopPropagation();ev.cancelBubble=true;if($k.$lb($k.coords)){var $1D=$k.$gz($k.rangeHold);$k.$gC($1D.start,$1D.end,$1D.resource);}else{DayPilotScheduler.range=$k.$l1();if(DayPilotScheduler.range){DayPilotScheduler.rangeCalendar=$k;var $1D=$k.$gz(DayPilotScheduler.range);$k.$gC($1D.start,$1D.end,$1D.resource);$k.rangeHold=DayPilotScheduler.range;}};DayPilotScheduler.range=null;};this.$ks=function(ev){if(DayPilot.Global.touch.start||DayPilot.Global.touch.active){return;};if(DayPilotScheduler.timeRangeTimeout&&false){clearTimeout(DayPilotScheduler.timeRangeTimeout);DayPilotScheduler.timeRangeTimeout=null;};$k.$lc();$k.$kq();$k.$fj(ev);if(DayPilotScheduler.rectangleSelect){return false;};ev=ev||window.event;var $b1=DayPilot.Util.mouseButton(ev);if($b1.middle||($b1.right&&$k.$lb($k.coords))){return false;};if($k.$lb($k.coords)){return false;};var $bs=$b1.left?"left":($b1.right?"right":($b1.middle?"middle":"unknown"));var $1p=ev.ctrlKey;var $1q=ev.metaKey;var $1N=ev.shiftKey;var $18=$1p||$1q;var $n={};$n.action="None";if($0g.$fm()!=="Disabled"&&$1N){$n.action="RectangleSelect";}else if($k.timeRangeSelectedHandling!=='Disabled'){$n.action="TimeRangeSelect";};$n.shift=$1N;$n.ctrl=$1N;$n.meta=$1q;$n.originalEvent=ev;$n.button=$bs;$n.preventDefault=function(){$n.action="None";};if(typeof $k.onGridMouseDown==="function"){$k.onGridMouseDown($n);};if($n.action==="None"){ev.preventDefault();ev.stopPropagation();return false;};if($n.action==="RectangleSelect"){var $5k={};$5k.start=$k.coords;$5k.calendar=$k;DayPilotScheduler.rectangleSelect=$5k;return false;};if($k.allowMultiRange&&!$18){mr.clear();};var $A=$k.$h8($k.coords.y,$k.coords.grid).element;if($A.isNewRow){return false;};DayPilotScheduler.range=$k.$l1();if(DayPilotScheduler.range){DayPilotScheduler.range.ctrl=$18;DayPilotScheduler.rangeCalendar=$k;};return false;};this.$l1=function(){var $1C={};var cx=$k.$f9($k.coords.x).x;var $0T=$k.getDate($k.coords.x,true);$1C.start={y:$k.$h8($k.coords.y,$k.coords.grid).i,x:cx,"grid":$k.coords.grid,"time":$0T};$1C.end={x:cx,"time":$0T};if($k.$hs($k.$h8($k.coords.y,$k.coords.grid).i,$k.coords.grid)){return null;};$1C.calendar=$k;$k.$gB($1C);return $1C;};this.$iM=function(){$k.$ig();var $2n=DayPilotScheduler.resizingShadow;var ev=DayPilotScheduler.resizing;(function(){var $0P=$k.$ld;var $0u={"start":$2n.start,"end":$k.$fx($2n.end)};$2n.original=$0u;var so=$2n.original;if(so&&$0P&&$0P.start===so.start&&$0P.end===$k.$fx(so.end)){return;};$1f.clear();$1f.$iB();if($0P){DayPilot.Util.removeClass($2n,$0P.cssClass);$2n.firstChild.innerHTML="";};var $aw=ev.event.part.dayIndex;var $A=$k.rowlist[$aw];var $n={};$n.start=$0u.start;$n.end=$0u.end;$n.duration=new DayPilot.Duration($n.start,$n.end);$n.row=$k.$gH($A);$n.e=ev.event;$n.allowed=true;$n.resizing=DayPilotScheduler.resizing.dpBorder==="left"?"start":"end";$n.what=DayPilotScheduler.resizing.dpBorder==="left"?"start":"end";$n.left={};$n.left.html=$n.start.toString($k.eventResizingStartEndFormat,$0g.locale());$n.left.enabled=$k.eventResizingStartEndEnabled;$n.left.space=5;$n.left.width=null;$n.left.height=$k.eventHeight;$n.right={};$n.right.html=$n.end.toString($k.eventResizingStartEndFormat,$0g.locale());$n.right.enabled=$k.eventResizingStartEndEnabled;$n.right.space=5;$n.right.width=null;$n.right.height=$k.eventHeight;$n.cssClass=null;$n.html=null;$n.overlapping=$n.row.events.forRange($n.start,$n.end).filter(function(e){return !$k.$fY(e,$n.e);}).length>0;$n.multiresize=$1f.$iz();var $1g={};$1g.event=ev.event;$1g.start=$n.start;$1g.end=$n.end;$n.multiresize.splice(0,0,$1g);$k.$ld=$0u;if(typeof $k.onEventResizing==='function'){$k.onEventResizing($n);};$1f.list=DayPilot.list($n.multiresize,true);$1f.list.splice(0,1);$1f.$iF();$2n.allowed=$n.allowed;DayPilot.Util.addClass($2n,$n.cssClass);if($n.html){$2n.firstChild.innerHTML=$n.html;};var $O=$n.start;var end=$k.$gp($n.end);$2n.finalStart=$O;$2n.finalEnd=end;if($k.viewType==="Days"){var $1G=$A.start.getTime()-$k.$eZ().getTime();$O=$O.addTime(-$1G);end=end.addTime(-$1G);};var $0Y=DayPilot.DateUtil.diff($O,end);$0Y=DayPilot.Util.atLeast($0Y,1);var $3u=$0g.useBox($0Y);var $3N=$k.snapToGrid&&$k.snapToGridEventResizing;var $R=$3N?$k.getPixels($O).boxLeft:$k.getPixels($O).left;var $S=$3N?$k.getPixels(end).boxRight:$k.getPixels(end).left;$2n.style.left=$R+"px";$2n.style.width=($S-$R)+"px";$2n.left=$R;$2n.width=$S-$R;$k.$iN(DayPilotScheduler.resizingShadow,$n);$k.$iO(DayPilotScheduler.resizingShadow,$n);})();};this.$kx=function(ev){if(DayPilotScheduler.rectangleSelect){var ev=ev||window.event;ev.cancelBubble=true;ev.preventDefault&&ev.preventDefault();DayPilotScheduler.gMouseUp(ev);return false;};$k.$fd={};if($k.rangeHold){var $b1=DayPilot.Util.mouseButton(ev);if($b1.left){var $1C=$k.rangeHold;if($k.$lb($k.coords)){var $bt=function($1C){return function(){DayPilotScheduler.timeRangeTimeout=null;var $1D=$k.$gz($1C);if(!$1D){return;};var $n={};$n.start=$1D.start;$n.end=$1D.end;$n.resource=$1D.resource;$n.preventDefault=function(){$n.preventDefault.value=true;};if(typeof $k.onTimeRangeClick==="function"){$k.onTimeRangeClick($n);};if(!$n.preventDefault.value){if(typeof $k.onTimeRangeClicked==="function"){$k.onTimeRangeClicked($n);}}};};if($k.timeRangeClickHandling!="Disabled"){if($k.timeRangeDoubleClickHandling==="Disabled"){$bt($1C)();}else{clearTimeout(DayPilotScheduler.timeRangeTimeout);DayPilotScheduler.timeRangeTimeout=setTimeout($bt($1C),$k.doubleClickTimeout);}}}}};var $b1=DayPilot.Util.mouseButton(ev);if($b1.right){$k.$le(ev);}};this.$le=function(ev){if($k.timeRangeSelectedHandling==='Disabled'){return;};if($k.timeRangeRightClickHandling==="Disabled"){return;};var $A=$k.$h8($k.coords.y);if($k.$hs($A.i)){return;};var $bu=null;if($k.$lb($k.coords)){$bu=$k.$gz($k.rangeHold);}else{$bu=$k.$gz();};if(!$bu){return;};$bu.end=$k.$fx($bu.end);var $n={};$n.start=$bu.start;$n.end=$bu.end;$n.resource=$bu.resource;$n.ctrl=ev.ctrlKey;$n.shift=ev.shiftKey;$n.meta=ev.metaKey;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onTimeRangeRightClick==="function"){$k.onTimeRangeRightClick($n);if($n.preventDefault.value){return;}};if($k.timeRangeRightClickHandling==="ContextMenu"&&$k.contextMenuSelection){$k.contextMenuSelection.show($bu);};if(typeof $k.onTimeRangeRightClicked==="function"){$k.onTimeRangeRightClicked($n);}};this.$lf=function(){var $bv=DayPilotScheduler.resizing||DayPilotScheduler.moving||DayPilotScheduler.range;if($bv){return true;};if($k.$fd.start){return true;};return false;};this.$fj=function(ev){var $2k=DayPilot.mo3($k.$eq,ev);$2k.grid="main";if($k.$hr.top.enabled()){var top=$k.$hr.top;var $b5=DayPilot.mo3(top.divCells,ev);if($b5.y>0&&$b5.y<=top.height){$2k=$b5;$2k.grid="top";}};if($k.$hr.bottom.enabled()){var $00=$k.$hr.bottom;var $b6=DayPilot.mo3($00.divCells,ev);if($b6.y>0&&$b6.y<=$00.height){$2k=$b6;$2k.grid="bottom";}};$2k.stamp=$2k.grid+"_"+$2k.x+"_"+$2k.y;if(!$k.coords||$k.coords.stamp!==$2k.stamp){$k.coords=$2k;}};this.getCoords=function(){if(!$k.coords){return null;};var $l={};$l.x=$k.coords.x;$l.y=$k.coords.y;$l.grid=$k.coords.grid;var $A=$k.$h8($l.y,$l.grid).element;$l.row=$A;$l.time=$k.getDate($l.x,true);$l.cell=$k.cells.findByPixels($l.x,$l.y,$l.grid)[0];return $l;};this.$kp=true;this.$iS=function(ev){if(DayPilot.Global.touch.active){return;};DayPilotScheduler.activeCalendar=$k;ev=ev||window.event;var $bw=DayPilot.mc(ev);$k.$fj(ev);ev.insideMainD=true;$k.$kp=true;if(window.event&&window.event.srcElement){window.event.srcElement.inside=true;};if($k.$fd.start){var $bx=2;var $E=DayPilot.distance($k.$fd.originalMouse,$bw);if($E>$bx){DayPilot.Util.copyProps($k.$fd,DayPilotScheduler);document.body.style.cursor='move';$k.$fd={};}};if(DayPilotScheduler.resizing&&DayPilotScheduler.resizingEvent.calendar===$k){if(!DayPilotScheduler.resizing.event){DayPilotScheduler.resizing.event=DayPilotScheduler.resizingEvent;};$k.$lg();}else if(DayPilotScheduler.movingEvent){var $3B=DayPilotScheduler.movingEvent.calendar;var $by=$3B!==$k;if($by&&$3B){DayPilotScheduler.movingEvent.calendar.$j0();};DayPilotScheduler.movingEvent.part.external=$by;$k.$lh();}else if(DayPilotScheduler.range&&DayPilotScheduler.range.calendar===$k){DayPilotScheduler.range.moved=true;$k.$li();}else if($2D.source){var $0r=$2D.source;$1u.drawShadow($0r.coords,$k.coords);}else if(DayPilotScheduler.rectangleSelect){DayPilotScheduler.rectangleSelect.moved=true;clearTimeout($13.$lj);$13.$lj=setTimeout(function(){$13.draw();},0);};if($k.crosshairType!=='Disabled'){$k.$lk();};$k.$ll();var $bz=$k.coords.insideEvent;if($k.cellBubble&&$k.coords&&$k.rowlist&&$k.rowlist.length>0&&!$bz){var x=$k.$f9($k.coords.x).x;var y=$k.$h8($k.coords.y).i;if(0<=y&&y<$k.rowlist.length&&0<=x&&x<$k.itline.length){var $T={};$T.calendar=$k;$T.start=$k.itline[x].start;$T.end=$k.itline[x].end;$T.resource=$k.rowlist[y].id;$T.toJSON=function(){var $1U={};$1U.start=this.start;$1U.end=this.end;$1U.resource=this.resource;return $1U;};$k.cellBubble.showCell($T);}};if(DayPilotScheduler.drag){$k.$lc();if(DayPilotScheduler.gShadow){document.body.removeChild(DayPilotScheduler.gShadow);};DayPilotScheduler.gShadow=null;if(!DayPilotScheduler.movingShadow&&$k.coords&&$k.rowlist.length>0){if(!DayPilotScheduler.movingEvent){DayPilotScheduler.moving=DayPilotScheduler.drag.schedulerSourceEvent||{};var $bA=DayPilotScheduler.drag.schedulerSourceEvent?DayPilotScheduler.drag.schedulerSourceEvent.event:null;var event=$bA||DayPilotScheduler.drag.event;if(!event){var $7F=$k.itline[0].start;var ev={'id':DayPilotScheduler.drag.id,'start':$7F,'end':$7F.addSeconds(DayPilotScheduler.drag.duration),'text':DayPilotScheduler.drag.text};var $s=DayPilotScheduler.drag.data;if($s){var $5G=['duration','element','remove','duration','id','text'];for(var name in $s){if(DayPilot.contains($5G,name)){continue;};ev[name]=$s[name];}};event=new DayPilot.Event(ev);event.calendar=$k;event.calendar=null;event.part.duration=DayPilotScheduler.drag.duration*1000;event.part.external=true;}else if($k!==event.calendar){var $3B=event.calendar;var $bB=event;var $bC=DayPilot.Util.copyProps(event.data);event=new DayPilot.Event($bC);event.calendar=$3B;event.part.duration=$3B.$i2($bB);event.part.external=true;}else{event.part.external=false;};if(!DayPilotScheduler.moving.event){DayPilotScheduler.moving.event=event;};DayPilotScheduler.movingEvent=event;};DayPilotScheduler.movingShadow=$k.$hp(DayPilotScheduler.movingEvent);};ev.cancelBubble=true;};var $2k={x:$k.coords.x,y:$k.coords.y,"grid":$k.coords.grid};$k.$l3($2k);};function invertedPct($90,$C){return 1-$90/$C;};this.$l3=function($2k){var $2o=$2k.grid;var $bD=DayPilotScheduler.moving||DayPilotScheduler.resizing||DayPilotScheduler.range||DayPilotScheduler.rectangleSelect;var $bE=$k.autoScroll==="Always";var $bF=$k.autoScroll==="Drag"&&$bD;var $bG=$bE||$bF;var $bH=false;var $bI=DayPilotScheduler.resizing||DayPilotScheduler.range||$2o!=="main";if($bG){var $bJ=$k.nav.scroll;$2k.x-=$bJ.scrollLeft;$2k.x+=$P.shiftX;$2k.y-=$bJ.scrollTop;var $D=$bJ.clientWidth;var $V=$bJ.clientHeight;var $4a=30;var $R=$2k.x<$4a?$2k.x:0;var $S=$D-$2k.x<$4a?$D-$2k.x:0;var top=$2k.y<$4a?$2k.y:0;var $00=$V-$2k.y<$4a?$V-$2k.y:0;var x=0;var y=0;var $bK=50;if($R){x=-$bK*invertedPct($R,$4a);};if($S){x=$bK*invertedPct($S,$4a);};if(top){y=-$bK*invertedPct(top,$4a)/2;};if($00){y=$bK*invertedPct(top,$4a)/2;};if($bI){y=0;};if($bH){x=0;};if(x||y){$k.$lm(x,y);}else{$k.$kq();}}};this.$li=function(){var $1C=DayPilotScheduler.range;var x=$k.$f9($k.coords.x).x;var $0T=$k.getDate($k.coords.x,true);$1C.end={x:x,"time":$0T};$k.$gB($1C);};this.$lg=function(){if(!DayPilotScheduler.resizingShadow){DayPilotScheduler.resizingShadow=$k.$hp(DayPilotScheduler.resizing);};$k.$iL();};this.$lh=function(){if(DayPilotScheduler.movingShadow&&DayPilotScheduler.movingShadow.calendar!==$k){DayPilotScheduler.movingShadow.calendar.$j0();DayPilotScheduler.movingShadow.calendar=null;DayPilot.de(DayPilotScheduler.movingShadow);DayPilotScheduler.movingShadow=null;};if(!DayPilotScheduler.movingShadow){var $bL=window.navigator.userAgent.indexOf("Chrome/61.0")>-1;if(!$bL){DayPilot.Util.addClass(DayPilotScheduler.moving,$k.$eC($0b.eventMovingSource));};var mv=DayPilotScheduler.movingEvent;DayPilotScheduler.movingShadow=$k.$hp(mv);};$k.$ic();$k.$ie();};this.$ln={};var $13=this.$ln;$13.start=function(){var $5k={};$5k.start=$k.coords;$5k.calendar=$k;DayPilotScheduler.rectangleSelect=$5k;};$13.draw=function(){var $5k=DayPilotScheduler.rectangleSelect;var $O=DayPilotScheduler.rectangleSelect.start;var end=$k.coords;$13.clear();var $0u={"x":$5k.x,"y":$5k.y,"width":$5k.width,"height":$5k.height};var $R,top,$D,$V;var $W,$Y,$X,$Z;(function rectifyStartEnd(){$W=Math.min($O.x,end.x);$X=Math.max($O.x,end.x);if($0g.$fm()==="Free"){$Y=Math.min($O.y,end.y);$Z=Math.max($O.y,end.y);}else if($0g.$fm()==="Row"){$Y=$O.y;$Z=$O.y;}})();if($0g.$fm()==="Free"){$R=$W;top=$Y;$D=$X-$W;$V=$Z-$Y;}else if($0g.$fm()==="Row"){var y=$k.$h8($Y).i;var $A=$k.rowlist[y];top=$A.top;$V=$A.height;var $4s=$k.$f9($W).cell;$R=$4s.left;var $4t=$k.$f9($X).cell;$D=$4t.left+$4t.width-$R;}else{throw "Invalid DayPilot.Scheduler.rectangleSelectMode value: "+$k.rectangleSelectMode;};var $06=DayPilot.Util.div($k.divRectangle,$R,top,$D,$V);$06.style.boxSizing="border-box";$06.className=$k.$eC("_selectionrectangle");$5k.x=$R;$5k.y=top;$5k.width=$D;$5k.height=$V;if($5k.x!==$0u.x||$5k.y!==$0u.y||$5k.width!==$0u.width||$5k.height!==$0u.height){if(typeof $k.onRectangleEventSelecting==="function"||typeof $k.onRectangleSelecting==="function"){var $bM=$k.$h8($5k.y).i;var $bN=$k.$h8($5k.y+$5k.height).i;var $N={"start":{"y":$bM},"end":{"y":$bN}};var $8S=$k.$h3($N);var $n={};$n.events=$U.eventsInRectangle($5k.x,$5k.y,$5k.width,$5k.height).map(function($04){return $04.event;});$n.start=$k.getDate($5k.x,true);$n.end=$k.getDate($5k.x+$5k.width,true);$n.resources=$8S;$n.visible=true;if(typeof $k.onRectangleEventSelecting==="function"){$k.onRectangleEventSelecting($n);};if(typeof $k.onRectangleSelecting==="function"){$k.onRectangleSelecting($n);};if(!$n.visible){$06.style.display="none";}}}};$13.clear=function(){$k.divRectangle.innerHTML='';$k.elements.rectangle=[];};this.$lo=function(){if(!$k.coords){return null;};if(!$k.$kw()){return null;};if(!$k.itline||$k.itline.length===0){return null;};var x=$k.$f9($k.coords.x).x;var $A=$k.$h8($k.coords.y,$k.coords.grid).element;if(!$A){return null;};var y=$A.index;var $Q=$k.cells.findXy(x,y,$k.coords.grid);return $Q[0];};this.$ll=function(){var $T=this.$lo();if(this.hover.cell){if(this.hover.cell.x===$T.x&&this.hover.cell.y===$T.y&&this.hover.cell.grid===$T.grid){return;};this.$kr();};this.hover.cell=$T;if(typeof this.onCellMouseOver==='function'){var $n={};$n.cell=$T;this.onCellMouseOver($n);}};this.$kr=function(){if(!this.hover.cell){return;};if(typeof this.onCellMouseOut==='function'){var $n={};$n.cell=this.hover.cell;this.onCellMouseOut($n);};this.hover.cell=null;};this.hover={};this.$lk=function(){var $2k=$k.$lp();if(!$2k){return;};var ch=$k.hover.crosshair;if(ch){if(ch.x===$2k.x&&ch.y===$2k.y&&ch.grid===$2k.grid&&ch.thX===$2k.thX){return;}};$k.hover.crosshair=$2k;this.$lq();};this.$lp=function(){if(!$k.coords){return null;};if(!$k.$kw()){return null;};if(!$k.itline||$k.itline.length===0){return null;};var $A=$k.$h8($k.coords.y,$k.coords.grid).element;if(!$A){return null;};var y=$A.index;var x=$k.$f9($k.coords.x).x;var $bO=$k.$lr();var $bP=$k.$is($bO,$k.coords.x);return{"x":x,"thX":$bP.x,"y":y,"grid":$k.coords.grid};};this.$lc=function(){this.divCrosshair.innerHTML='';this.$ls=null;this.$lt=null;};this.$kd=function(){this.$lc();$k.hover.crosshair=null;if(this.$lu&&this.$lu.parentNode){this.$lu.parentNode.removeChild(this.$lu);this.$lu=null;};if(this.$lv){for(var i=0;i<this.$lv.length;i++){var ch=this.$lv[i];if(ch.parentNode){ch.parentNode.removeChild(ch);}};this.$lv=null;};this.$dE=-1;this.$dD=-1;this.$lw=null;};this.$lr=function(){var $bO=this.timeHeader?this.timeHeader.length-1:1;if(typeof $k.crosshairTimeHeaderLevel==="number"){if($k.crosshairTimeHeaderLevel<$bO&&$k.crosshairTimeHeaderLevel>=0){$bO=$k.crosshairTimeHeaderLevel;}};return $bO;};this.$lq=function(){if(!$k.coords){return;};if(!$k.$kw()){return;};var $A=$k.$h8($k.coords.y,$k.coords.grid).element;if(!$A){return;};var x=$k.$f9($k.coords.x).x;var y=$A.index;var $2o=$A.grid;var $2l=$k.$i8($2o);var $01=this.crosshairType;if($01==='Full'){var $0S=this.itline[x];var $R=$0S.left;var $0H=this.$ls;if(!$0H){var $0H=document.createElement("div");$0H.style.height=$k.$dG+'px';$0H.style.position='absolute';$0H.style.top='0px';$0H.className=$k.$eC("_crosshair_vertical");$k.$ls=$0H;$k.divCrosshair.appendChild($0H);};$0H.style.left=$R+'px';$0H.style.width=$0S.width+'px';var top=$A.top;var $V=$A.height;var $D=$k.$eF();var $0H=$k.$lt;if(!$0H){var $0H=document.createElement("div");$0H.style.width=$D+'px';$0H.style.height=$V+'px';$0H.style.position='absolute';$0H.style.top=top+'px';$0H.style.left='0px';$0H.className=$k.$eC("_crosshair_horizontal");$k.$lt=$0H;this.divCrosshair.appendChild($0H);};$0H.style.top=top+'px';$0H.style.height=$V+'px';};var $bO=$k.$lr();var $bP=$k.$is($bO,$k.coords.x);if($bP&&$k.$dE!==$bP.x){if($k.$lu&&this.$lu.parentNode){$k.$lu.parentNode.removeChild($k.$lu);$k.$lu=null;};var $V=$6i.timeHeader($bO).height;var $0H=document.createElement("div");$0H.style.width=$bP.cell.width+"px";$0H.style.height=$V+"px";$0H.style.left='0px';$0H.style.top='0px';$0H.style.position='absolute';$0H.className=$k.$eC("_crosshair_top");$k.$lu=$0H;var $bi=this.divNorth;var $bQ=$bO;if($k.nav.timeHeader){$k.$dJ.timeHeader[$bP.x+"_"+$bQ].appendChild($0H);}else{if($bi&&$bi.firstChild.rows[$bQ].cells[x]){$bi.firstChild.rows[$bQ].cells[x].firstChild.appendChild($0H);}}};if($k.$dD!==y||$k.$lw!==$2o){if($k.$lv){for(var i=0;i<$k.$lv.length;i++){var ch=$k.$lv[i];if(ch.parentNode){ch.parentNode.removeChild(ch);}};$k.$lv=null;};var $28=this.rowHeaderCols?this.rowHeaderCols.length:1;$k.$lv=[];if($2l.divHeader.rows[y]){for(var i=0;i<$2l.divHeader.rows[y].cells.length;i++){var $D=$k.$eI();var $0H=document.createElement("div");$0H.style.width=$D+"px";$0H.style.height=$A.height+"px";$0H.style.left='0px';$0H.style.top='0px';$0H.style.position='absolute';$0H.className=$k.$eC("_crosshair_left");$k.$lv.push($0H);$2l.divHeader.rows[y].cells[i].firstChild.appendChild($0H);}}};if($bP){$k.$dE=$bP.x;};$k.$dD=y;$k.$lw=$2o;};this.$is=function(y,$B){var $A=$k.timeHeader[y];if(!$A){return null;};for(var i=0;i<$A.length;i++){var $T=$A[i];if($B>=$T.left&&$B<$T.left+$T.width){var $l={};$l.cell=$T;$l.x=i;return $l;}};return null;};this.$lx=function($B){return $k.$is($k.timeHeader.length-1,$B);};this.$kt=function(ev){ev.cancelBubble=true;if(!$k.allowDefaultContextMenu){return false;}};this.$lb=function($2k){var $1C=$k.rangeHold;if(!$1C||!$1C.start||!$1C.end){return false;};var $A=this.$hy($1C.start.y);var $bR=$1C.start.x<$1C.end.x;var $bS=($bR?$1C.start.x:$1C.end.x)*this.cellWidth;var $bT=($bR?$1C.end.x:$1C.start.x)*this.cellWidth+this.cellWidth;var $bU=$A.top;var $bV=$A.bottom;if($2k.x>=$bS&&$2k.x<=$bT&&$2k.y>=$bU&&$2k.y<=$bV&&$2k.grid===$1C.start.grid){return true;};return false;};this.$gB=function($1C,$bW){var $1C=$1C||DayPilotScheduler.range;if(!$1C){return;};if($1C.calendar!==$k){return;};var $2l=$k.$i8($1C.start.grid);var $2m=$2l.rowlist;function draw($1C){var $be=$1C.end.time>$1C.start.time;var $R,$S;var $bX,$bY;var y=$1C.start.y;var $bZ=$1C.start.time&&$1C.end.time;var $3N=$k.snapToGrid&&$k.snapToGridTimeRangeSelecting;if($3N||!$bZ){var $W=$be?$1C.start.x:$1C.end.x;var $X=($be?$1C.end.x:$1C.start.x);var $O=$k.itline[$W];var end=$k.itline[$X];$bX=$O.start;$bY=end.end;$R=$O.left;$S=end.left+end.width;}else{if($be){$bX=$1C.start.time;$bY=$1C.end.time;}else{$bX=$1C.end.time;$bY=$1C.start.time;};$R=$k.getPixels($bX).left;$S=$k.getPixels($bY).left;};var $D=$S-$R;var $T=$k.elements.range2;if(!$T){$T=document.createElement("div");$T.style.position='absolute';$T.setAttribute("unselectable","on");var $09=document.createElement("div");$09.className=$k.$eC("_shadow_inner");$T.appendChild($09);$2l.divShadow.appendChild($T);};if($T.grid!==$1C.start.grid){$T.parentNode.removeChild($T);$2l.divShadow.appendChild($T);};$T.className=$k.$eC("_shadow");$T.firstChild.innerHTML="";$T.style.left=($R)+"px";$T.style.top=$2m[y].top+"px";$T.style.width=$D+"px";$T.style.height=($2m[y].height-1)+"px";$T.calendar=$k;$T.grid=$1C.start.grid;$k.elements.range2=$T;(function checkOverlap(){$T.overlapping=false;var $A=$2m[y];$k.$iG($T,$A,$R,$D,null);var $O=$be?$1C.start.time:$1C.end.time;var end=$be?$1C.end.time:$1C.start.time;$k.$iH($T,$O,end,$A.id);})();return $T;};(function(){var $be=$1C.end.time>$1C.start.time;var $W=$be?$1C.start.x:$1C.end.x;var $X=($be?$1C.end.x:$1C.start.x);var y=$1C.start.y;var $A=$2m[y];if(!$A){return;};if($A.hidden){return;};var $O=$k.itline[$W];var end=$k.itline[$X];var $0P=$k.$ly;var $c0=$O.start.addTime($A.data.offset);var $c1=end.end.addTime($A.data.offset);var $3N=$k.snapToGrid&&$k.snapToGridTimeRangeSelecting;if(!$3N){if($be){$c0=$1C.start.time;$c1=$1C.end.time;}else{$c0=$1C.end.time;$c1=$1C.start.time;}};if(!$bW&&$0P&&$0P.start.getTime()===$c0.getTime()&&$0P.end.getTime()===$c1.getTime()&&$0P.resource===$2m[y].id){return;};var $0u={"start":$c0,"end":$k.$fx($c1),"resource":$2m[y].id};var $n={};$n.start=$0u.start;$n.end=$0u.end;$n.duration=new DayPilot.Duration($c0,$c1);$n.resource=$2m[y].id;$n.row=$k.$gH($A);$n.allowed=true;$n.left={};$n.left.html=$n.start.toString($k.timeRangeSelectingStartEndFormat,$0g.locale());$n.left.enabled=$k.timeRangeSelectingStartEndEnabled;$n.left.space=5;$n.left.width=null;$n.left.height=$k.eventHeight;$n.right={};$n.right.html=$n.end.toString($k.timeRangeSelectingStartEndFormat,$0g.locale());$n.right.enabled=$k.timeRangeSelectingStartEndEnabled;$n.right.space=5;$n.right.width=null;$n.right.height=$k.eventHeight;$n.overlapping=$n.row.events.forRange($c0,$c1).length>0;$n.html=null;$n.cssClass=null;$k.$ly=$0u;if(typeof $k.onTimeRangeSelecting==='function'&&!$bW){$k.onTimeRangeSelecting($n);$n.resource=$0u.resource;};$n.end=$k.$gp($n.end);$1C.args=$n;var $9c=$k.$lz($1C);$k.$gA($9c,$n.start,$n.end);var $T=draw($9c);if($n.html){$T.firstChild.innerHTML=$n.html;};if($n.cssClass){DayPilot.Util.addClass($T,$n.cssClass);};$k.$iN($T,$n);$1C.$l5=$9c;$1C.disabled=!$n.allowed;$k.$iO($T,$n);})();};this.$lz=function($1C){return{"start":{"x":$1C.start.x,"y":$1C.start.y,"time":$1C.start.time,"grid":$1C.start.grid},"end":{"x":$1C.end.x,"time":$1C.end.time},"disabled":$1C.disabled,"calendar":$1C.calendar,"args":$1C.args}};this.multirange={};this.multirange.get=function(){return mr.get(true);};this.multirange.add=function($1D){if(!$1D){throw new DayPilot.Exception("Range not specified");};if(!$1D.start||!$1D.end||!$1D.resource){throw new DayPilot.Exception("Invalid range specified");};if(DayPilot.list(mr.list).isEmpty()){var $c2=$k.$gz();if($c2){var $1C=$k.$lA($c2.start,$c2.end,$c2.resource);$k.$lB.add($1C);}};var $1C=$k.$lA($1D.start,$1D.end,$1D.resource);$k.$gB($1C);$k.$lB.add($1C);};this.multirange.clear=function(){mr.clear();$k.clearSelection();$k.$ly=null;};this.$lB={};var mr=this.$lB;this.$lB.list=[];this.$lB.drawLaterTimeout=null;this.$lB.drawLater=function(){clearTimeout($k.$lB.drawLaterTimeout);$k.$lB.drawLaterTimeout=setTimeout(function(){mr.list.forEach(function($1C){$k.elements.range2=null;$k.$gB($1C);});},0);};this.$lB.clear=function(){DayPilot.de(DayPilot.list(mr.list).map(function($04){return $04.div;}));mr.list=[];};this.$lB.add=function($1C){$1C.div=$k.elements.range2;$k.elements.range2=null;$k.$iR();mr.list.push($1C);};this.$lB.get=function($c3){var $02=DayPilot.list(mr.list).map(function($04){return $k.$gz($04);});if($c3&&$02.isEmpty()){var $1D=$k.$gz();if($1D){$02.push($1D);}};return $02;};this.$lB.dispatch=function(){if(!$k.allowMultiRange){return;};if(DayPilotScheduler.range){return;};var $0P=DayPilot.list(mr.list).last();$k.$gx($0P);};this.$lC=function(ev){if($k.timeRangeSelectedHandling==='Disabled'){return false;};if(DayPilot.Global.touch.active||DayPilot.Global.touch.start){return;};ev=ev||window.event;var $b1=DayPilot.Util.mouseButton(ev);if(DayPilotScheduler.range){return;};if(DayPilotScheduler.rectangleSelect){return;};if($k.rangeHold&&$k.$lb($k.coords)&&($b1.right||$b1.middle)){return;};if($k.$hs($k.$h8($k.coords.y).i)){return;};var $1C={};var cx=$k.$f9($k.coords.x).x;$1C.start={y:$k.$h8($k.coords.y).i,x:cx,"grid":$k.coords.grid};$1C.end={x:cx,};$1C.calendar=$k;$k.rangeHold=$1C;$k.$gx($1C);};this.timeouts={};this.timeouts.drawEvents=null;this.timeouts.drawCells=null;this.timeouts.drawRows=null;this.timeouts.click=null;this.timeouts.resClick=[];this.timeouts.updateFloats=null;this.$ej=function(ev){if(typeof DayPilot.Bubble!=="undefined"){DayPilot.Bubble.hideActive();};$k.$dR();var $c4=$k.nav.scroll;$k.$iq=$c4.scrollLeft;$k.$io=$c4.scrollTop;$k.$ir=$c4.clientWidth;if($k.divTimeScroll){$k.divTimeScroll.scrollLeft=$k.$iq;};if($k.$hr.top.enabled()){$k.$hr.top.div.scrollLeft=$k.$iq;};if($k.$hr.bottom.enabled()){$k.$hr.bottom.div.scrollLeft=$k.$iq;};$k.divResScroll.scrollTop=$k.$io;if($P.isEnabled()&&$k.$en&&$k.cellWidthSpec!="Auto"){if($P.active){$e();}else{if($k.nav.scroll.scrollLeft<$k.infiniteScrollingMargin){$P.active=true;$k.nav.scroll.style.overflowX="hidden";setTimeout(function(){$P.shiftStart(-$k.infiniteScrollingStepDays);},100);return;}else if($k.nav.scroll.scrollWidth-($k.nav.scroll.scrollLeft+$k.nav.scroll.clientWidth)<$k.infiniteScrollingMargin){$P.active=true;$k.nav.scroll.style.overflowX="hidden";setTimeout(function(){$P.shiftStart($k.infiniteScrollingStepDays);},100);return;}}};if($k.navigatorBackSync){(function backSync(){var $c5=DayPilot.Util.evalVariable($k.navigatorBackSync);var $O=$k.getViewPort().start;$c5.select($O,{"dontNotify":true,"dontFocus":true});})();};if($k.timeouts.drawCells){clearTimeout($k.timeouts.drawCells);$k.timeouts.drawCells=null;};if($k.scrollDelayCells>0){$k.timeouts.drawCells=setTimeout($k.$lD(),$k.scrollDelayCells);}else{var f=$k.$lD();f();};if($k.progressiveRowRendering){if($k.timeouts.drawRows){clearTimeout($k.timeouts.drawRows);$k.timeouts.drawRows=null;};if($k.scrollDelayRows>0){$k.timeouts.drawRows=setTimeout(function(){$k.$g3();},$k.scrollDelayRows);}else{$k.$g3();}};if($k.dynamicLoading){$k.$eg();$k.$lE();return;};if($k.timeouts.drawEvents){clearTimeout($k.timeouts.drawEvents);$k.timeouts.drawEvents=null;};if($k.scrollDelayEvents>0){$k.timeouts.drawEvents=setTimeout($k.$lF(),$k.scrollDelayEvents);}else{$k.$ed();};if($k.timeouts.updateFloats){clearTimeout($k.timeouts.updateFloats);$k.timeouts.updateFloats=null;};if($k.scrollDelayFloats>0){$k.timeouts.updateFloats=setTimeout(function(){$k.$eh();},$k.scrollDelayFloats);}else{$k.$eh();};$k.onScrollCalled=true;};this.$lD=function(){return function(){if(!$k){return;};$k.$eg();$k.$eb();};};this.$lF=function(){var $aq=true;return function(){if(!$k){return;};if($k.$kN()){window.setTimeout(function(){$k.$kK();window.setTimeout(function(){$k.$ed($aq);},50);},50);}else{$k.$ey();}};};this.$dR=function(){$k.$dJ.eventHeight=null;$k.$dJ.drawArea=null;};this.show=function(){$k.visible=true;$k.$dI=true;$k.nav.top.style.display='';$k.$e2();$k.$e3();$k.$hP();$k.$ej();};this.hide=function(){$k.visible=false;$k.$dI=false;$k.nav.top.style.display='none';};this.$lE=function(){var $c4=$k.nav.scroll;$k.$iq=$c4.scrollLeft;$k.$io=$c4.scrollTop;$k.$ir=$c4.clientWidth;$k.divTimeScroll.scrollLeft=$k.$iq;$k.divResScroll.scrollTop=$k.$io;if($k.refreshTimeout){window.clearTimeout($k.refreshTimeout);};var $0i=$k.scrollDelayDynamic;$k.refreshTimeout=window.setTimeout($k.$lG($c4.scrollLeft,$c4.scrollTop),$0i);$k.$eh();};this.$hK=function($s){if(!$k.events.list){return null;};for(var j=0;j<this.events.list.length;j++){var ex=this.events.list[j];if($k.$fY(ex,$s)){var $l={};$l.ex=ex;$l.index=j;$l.modified=!$k.$lH($s,ex);return $l;}};return null;};this.$lH=function($0V,$9d){for(var name in $0V){if(typeof $0V[name]==='object'&&!($0V[name]instanceof DayPilot.Date)){continue;};if($0V[name]!==$9d[name]){return false;}};for(var name in $9d){if(typeof $9d[name]==='object'){continue;};if($0V[name]!==$9d[name]){return false;}};return true;};this.$ee=function($c6,$c7,$n){var $9o=$n&&$n.clearEvents;var $c8=$n&&$n.remove;var $c9=$n&&$n.dontForceCellRendering;var $ca=[];if(!$k.events.list){$k.events.list=[];};if($9o){$k.$dX($c6);}else{var $cb=[];DayPilot.list($c8).forEach(function(id){var $s=DayPilot.list($k.events.list).find(function($s){return $s.id===id;});if($s){$cb.push($s);}});$cb.forEach(function($s){var $1l=$k.events.$fB($s);$ca=$ca.concat($1l);DayPilot.rfa($k.events.list,$s);});var $cc=[];for(var i=0;i<$c6.length;i++){var e=$c6[i];$cc[i]=$k.$hK(e);};for(var i=0;i<$c6.length;i++){var e=$c6[i];var $cd=$cc[i];var $2E=$cd&&$cd.modified;var $ce=!$cd;if($2E){this.events.list[$cd.index]=e;var $1l=$k.events.$fB($cd.ex);$ca=$ca.concat($1l);}else if($ce){this.events.list.push(e);};if($2E||$ce){$ca=$ca.concat($k.events.$fC(e));}};$k.$fD($ca);$k.$fE();};$k.$e1();$k.$e6();var $cf=!$9o;if($9o||$c9){$k.$e8();var $cg=$k.$gk;if($cg){$k.$e7();};$k.$e4();if($cg){$k.$eb();}else{$k.$hP();};$k.$ed();}else{$k.$fF($ca,false,function(){$c7&&$c7();$k.$kK();$k.$ed();});$k.$hP();}};this.$lG=function(scrollX,scrollY){if(!$k.$eS()){return function(){if(typeof $k.onScroll==='function'){var $2E=function($n){var $c7=function(){if($k.$ek()){if(typeof $k.onAfterRender==='function'){var $n={};$n.isCallBack=false;$n.isScroll=true;$n.data=null;$k.onAfterRender($n);}}};$k.$ee($n.events,$c7,$n);};var $n={};$n.viewport=$k.getViewPort();$n.async=true;$n.events=[];$n.remove=[];$n.clearEvents=true;$n.dontForceCellRendering=false;$n.loaded=function(){if(this.async){$2E($n);}};$k.onScroll($n);if(!$n.async){$2E($n);}}};}else{return function(){$k.scrollX=scrollX;$k.scrollY=scrollY;$k.$fg('Scroll');};}};this.$lI=function(){var $N=this.$ev();var $ch=$N.xStart;var $0B=$N.xEnd-$N.xStart;var $4k=$N.yStart;var $ci=$N.yEnd-$N.yStart;if(!this.cellProperties){this.cellProperties={};};var $cj=$k.$hr.top;var $ck=$k.$hr.bottom;for(var i=0;i<=$0B;i++){var x=$ch+i;for(var j=0;j<$ci;j++){var y=$4k+j;if(!this.rowlist[y].hidden){this.$hS(x,y);}};this.$lJ(x);if($cj.enabled()){for(var y=0;y<$cj.rowlist.length;y++){this.$hS(x,y,"top");};this.$lJ(x,"top");};if($ck.enabled()){for(var y=0;y<$ck.rowlist.length;y++){this.$hS(x,y,"bottom");};this.$lJ(x,"bottom");}};var $cl=this.$iV();for(var y=$cl.start;y<$cl.end;y++){if(!this.rowlist[y].hidden){this.$lK(y);}};if($cj.enabled()){for(var y=0;y<$cj.rowlist.length;y++){if(!$cj.rowlist[y].hidden){this.$lK(y,"top");}}};if($ck.enabled()){for(var y=0;y<$ck.rowlist.length;y++){if(!$ck.rowlist[y].hidden){this.$lK(y,"bottom");}}}};this.$eb=function(){if($k.$dF){return;};var $2m=$k.$eY();if($2m&&$2m.length>0){var $cm=this.cellSweeping;if($cm){var $cn=this.cellSweepingCacheSize;this.$kM($cn);};this.$lI();this.$lL();};this.$gk=false;};this.$lL=function(){var $N=this.$ev();for(var x=$N.xStart;x<$N.xEnd;x++){var $co=(x<this.itline.length-1)?this.itline[x+1].breakBefore:false;if($co){this.$lM(x);}}};this.$lM=function(x){var $1n="x"+x;if(this.$dJ.breaks[$1n]){return;};var $R=this.itline[x+1].left-1;var $V=this.$dG;var $0H=document.createElement("div");$0H.style.left=$R+"px";$0H.style.top="0px";$0H.style.width="1px";$0H.style.height=$V+"px";$0H.style.fontSize='1px';$0H.style.lineHeight='1px';$0H.style.overflow='hidden';$0H.style.position='absolute';$0H.setAttribute("unselectable","on");$0H.className=this.$eC("_matrix_vertical_break");this.divBreaks.appendChild($0H);this.elements.breaks.push($0H);this.$dJ.breaks[$1n]=$0H;};this.$ev=function(){if($k.$dJ.drawArea){return $k.$dJ.drawArea;};if(!this.nav.scroll){return null;};var $cp=$k.$io;var $N={};var $cq=this.dynamicEventRenderingMarginX!=null?this.dynamicEventRenderingMarginX:this.dynamicEventRenderingMargin;var $cr=this.dynamicEventRenderingMarginY!=null?this.dynamicEventRenderingMarginY:this.dynamicEventRenderingMargin;var $R=$k.$iq-$cq-$P.shiftX;var $S=$R+$k.$ir+2*$cq;var $O=0;var end=0;if($k.itline&&$k.itline.length>0){$O=$k.$f9($R).x;end=$k.$f9($S,true).x;var $4p=this.$ip();end=Math.min(end,$4p);$O=DayPilot.Util.atLeast($O,0);};var top=$cp-$cr;var $00=$cp+this.nav.scroll.offsetHeight+2*$cr;var $4k=this.$h8(top).i;var $4l=this.$h8($00).i;if($4l<this.rowlist.length){$4l++;};$N.xStart=$O;$N.xEnd=end;$N.yStart=$4k;$N.yEnd=$4l;var $6w=$k.nav.scroll;if($6w.clientWidth===0){$6w=$k.divTimeScroll;};$N.pixels={};$N.pixels.left=$6w.scrollLeft-$P.shiftX;$N.pixels.right=$6w.scrollLeft-$P.shiftX+$6w.clientWidth;$N.pixels.top=$6w.scrollTop;$N.pixels.bottom=$6w.scrollTop+$6w.clientHeight;$N.pixels.width=$6w.scrollWidth;$N.sw=DayPilot.sw($k.nav.scroll);$k.$dJ.drawArea=$N;return $N;};this.$eF=function(){var $l=0;var $0P=this.itline[this.itline.length-1];if(!$0P){$l=0;}else{$l=$0P.left+$0P.width;};if($l<0||isNaN($l)){$l=0;};return $l;};this.$lK=function(y,$2o){$2o=$2o||"main";var $2l=$k.$hr[$2o];var $2m=$2l.rowlist;var $a7=$2l.divLines;var $cs=$2o==="main";var $1n=$2o+"_y_"+y;if(this.$dJ.linesHorizontal[$1n]){return;};var $A=$2m[y];var $V=typeof $A.forcedHeight==="number"?$A.forcedHeight:$A.height;var top=$A.top+$V-1;var $D=this.$eF();var $0H=document.createElement("div");$0H.style.left="0px";$0H.style.top=top+"px";$0H.style.width=$D+"px";$0H.style.height="1px";$0H.style.fontSize='1px';$0H.style.lineHeight='1px';$0H.style.overflow='hidden';$0H.style.position='absolute';$0H.setAttribute("unselectable","on");$0H.className=this.$eC("_matrix_horizontal_line");$a7.appendChild($0H);this.$dJ.linesHorizontal[$1n]=$0H;};this.$lJ=function(x,$2o){var $0S=this.itline[x];if(!$0S){return;};$2o=$2o||"main";var $2l=$k.$hr[$2o];var $a7=$2l.divLines;var $cs=$2o==="main";var $V=$cs?$k.$dG:$2l.height;var $1n=$2o+"_x_"+x;if(this.$dJ.linesVertical[$1n]){return;};var $R=$0S.left+$0S.width-1;var $0H=document.createElement("div");$0H.style.left=$R+"px";$0H.style.top="0px";$0H.style.width="1px";$0H.style.height=$V+"px";$0H.style.fontSize='1px';$0H.style.lineHeight='1px';$0H.style.overflow='hidden';$0H.style.position='absolute';$0H.setAttribute("unselectable","on");$0H.className=this.$eC("_matrix_vertical_line");$a7.appendChild($0H);this.elements.linesVertical.push($0H);this.$dJ.linesVertical[$1n]=$0H;};this.$id=function($1n,$j){$k.$el.skip=true;var $A=this.rowlist[$1n];var $ct=!$A.expanded;$A.expanded=$ct;if($A.resource){$A.resource.expanded=$ct;};$j=$j||{};if($k.treeAnimation&&!$j.notAnimated){var $1l=this.$lN($1n,$A.expanded,true);$k.$jh($1l,$ct?"show":"hide",function onComplete(){performUpdate();});}else{performUpdate();};function performUpdate(){var $1l=$k.$lN($1n,$A.expanded,false);if(!$ct){for(var i=0;i<$1l.length;i++){var ri=$1l[i];$k.$gl(ri);}};$k.$ji();$k.$eg();var r=$k.$gH($A,$1n);if($ct){$k.$gQ(r);}else{$k.$gP(r);}}};this.$ji=function(){$k.$e1();$k.$dY();$k.$e6();$k.$dR();$k.$gn();$1u.load();$k.$e7();$k.$eb();$k.$g3();$k.$ed();$k.$dR();};this.$jd=function(i){var $15={};$15.index=i;if(typeof this.onLoadNode==='function'){var $n={};var $1B=this.rowlist[i].resource;$n.resource=$1B;$n.async=false;$n.loaded=function(){if(this.async){$1B.dynamicChildren=false;$1B.expanded=true;$k.update();}};this.onLoadNode($n);if(!$n.async){$1B.dynamicChildren=false;$1B.expanded=true;this.update();}}else{this.$fg('LoadNode',$15);}};this.$lN=function(i,$cu,$cv){var $A=this.rowlist[i];var $8P=[];if($A.children===null||$A.children.length===0){return $8P;};for(var k=0;k<$A.children.length;k++){var $1n=$A.children[k];var $cw=this.rowlist[$1n];var $aC=$cu&&$A.expanded&&!$cw.$jS;if($cu&&$cw.hidden){$cw.forcedHeight=0;};if(!$cv||$cu){$cw.hidden=!$aC;};if(!$cv){delete $cw.forcedHeight;};if($cu===$aC){$8P.push($1n);};var $cx=this.$lN($1n,$cu);if($cx.length>0){$8P=$8P.concat($cx);}};return $8P;};this.$lm=function($cy,$cz){this.$kq();this.$lO($cy,$cz);};this.$lP=function($I){if(!$I){return false;};var $0l=this.nav.scroll.scrollWidth;var $O=this.nav.scroll.scrollLeft;var $D=this.nav.scroll.clientWidth;var $S=$O+$D;if($I<0&&$O<=0){return false;};if($I>0&&$S>=$0l){return false;};this.nav.scroll.scrollLeft+=$I;$k.coords.x+=$I;$k.$lQ();return true;};this.$lR=function($I){if(!$I){return false;};var $0l=this.nav.scroll.scrollHeight;var $O=this.nav.scroll.scrollTop;var $V=this.nav.scroll.clientHeight;var $00=$O+$V;if($I<0&&$O<=0){return false;};if($I>0&&$00>=$0l){return false;};this.nav.scroll.scrollTop+=$I;$k.coords.y+=$I;$k.$lQ();return true;};this.$lQ=function(){if(DayPilotScheduler.resizing&&DayPilotScheduler.resizing.event.calendar===$k){$k.$lg();}else if(DayPilotScheduler.moving&&(DayPilotScheduler.movingEvent.calendar===$k||(DayPilotScheduler.movingEvent.calendar&&DayPilotScheduler.movingEvent.calendar.dragOutAllowed))){if(!DayPilotScheduler.moving.event){DayPilotScheduler.moving.event=DayPilotScheduler.movingEvent;};$k.$lh();}else if(DayPilotScheduler.range&&DayPilotScheduler.range.calendar===$k){$k.$li();}};this.$lO=function($cy,$cz){var $cA=this.$lP($cy)||this.$lR($cz);if(!$cA){return;};var $cB=function($cy,$cz){return function(){$k.$lO($cy,$cz);};};this.$lS=window.setTimeout($cB($cy,$cz),100);};this.$kq=function(){if($k.$lS){window.clearTimeout($k.$lS);$k.$lS=null;}};this.$e1=function(){if($k.$hr.top.enabled()){$k.$hr.top.height=$k.$lT($k.$hr.top.rowlist,0);};if($k.$hr.bottom.enabled()){$k.$hr.bottom.height=$k.$lT($k.$hr.bottom.rowlist,0);};$k.$dG=$k.$lT($k.rowlist,$k.$hr.top.height);};this.$lT=function($2m,top){var $cC=0;var $cD=top||0;var top=top||0;for(var i=0;i<$2m.length;i++){var $A=$2m[i];if(!$A.hidden){$A.top=top;$A.displayY=$cC;if(typeof $A.forcedHeight==="number"){top+=$A.forcedHeight;}else{top+=$A.height;};$cC+=1;};$A.absTop=$cD;$cD+=$A.height;};return top;};this.$e7=function(){if(DayPilot.browser.ie){$k.$lU();};$k.elements.cells=[];$k.elements.breaks=[];$k.$dJ.cells=[];$k.$dJ.breaks=[];$k.divCells.innerHTML='';$k.divBreaks.innerHTML='';$k.$j3();};this.$j3=function(){$k.divLines.innerHTML='';$k.$hr.top.divLines.innerHTML='';$k.$dJ.linesVertical={};$k.$dJ.linesHorizontal={};$k.elements.linesVertical=[];};this.$lU=function(y){var $02=DayPilot.list();for(var name in $k.$dJ.cells){$02.push($k.$dJ.cells[name]);};$02.forEach(function($04){$k.$hR($04);});};this.$go=function(y,$2o){$2o=$2o||"main";var $02=DayPilot.list();for(var name in $k.$dJ.cells){$02.push($k.$dJ.cells[name]);};$02.filter(function($04){return $04&&$04.coords&&$04.coords.y===y&&$04.coords.grid===$2o;}).forEach(function($04){$k.$hR($04);});};this.$lV=0;this.$lW=DayPilot.list(['html','cssClass','backColor','backImage','backRepeat','areas','disabled']);this.$lX=$k.$lW.add('business');this.$hS=function(x,y,$2o){if(!this.$en){return;};var $0S=$k.$fi(x);if(!$0S){return;};$2o=$2o||"main";var $2l=this.$hr[$2o];var $2m=$2l.rowlist;var $a6=$2l.divCells;var $cs=$2o==="main";var $1n=$2o+"_"+x+'_'+y;if(this.$dJ.cells[$1n]){return;};var p=this.$hT(x,y,$2o);$k.$iw(x,y,$2o);if(!this.drawBlankCells){var $cE=false;if($cs&&this.$ia(y)){$cE=false;}else if(!this.$lY(p,$k.$lW)){$cE=true;};if($cE){return;}};var $T=document.createElement("div");$T.style.left=($0S.left)+"px";$T.style.top=$2m[y].top+"px";$T.style.width=($0S.width)+"px";$T.style.height=($2m[y].height)+"px";$T.style.position='absolute';if(p&&p.backColor){$T.style.backgroundColor=p.backColor;};$T.setAttribute("unselectable","on");$T.className=this.$eC('_cell');$T.coords={};$T.coords.x=x;$T.coords.y=y;$T.coords.grid=$2o;if($cs&&$k.$ia(y)){DayPilot.Util.addClass($T,this.$eC("_cellparent"));};if($7s.$dJ[y]){DayPilot.Util.addClass($T,this.$eC("_cell_selected"));};var c=$k.cells.findXy(x,y,$2o)[0];if(p){if(p.cssClass){DayPilot.Util.addClass($T,p.cssClass);};if(!DayPilot.Util.isNullOrUndefined(p.html)){$T.innerHTML=p.html;};if(p.backImage){$T.style.backgroundImage="url(\"" + p.backImage + "\")";};if(p.backRepeat){$T.style.backgroundRepeat=p.backRepeat;};if(p.business&&$k.cellsMarkBusiness){DayPilot.Util.addClass($T,$k.$eC("_cell_business"));};if(p.disabled){DayPilot.Util.addClass($T,$k.$eC("_cell_disabled"));};DayPilot.list(p.areas).forEach(function($N){if($N.start||$N.end){$N.left=$k.getPixels(new DayPilot.Date($N.start)).left-$0S.left;$N.width=$k.getPixels(new DayPilot.Date($N.end)).left-$N.left-$0S.left;}});DayPilot.Areas.attach($T,c,{"areas":p.areas});};var $cF=$cG.getCell();if($cF){if($cF.x===x&&$cF.y===y){DayPilot.Util.addClass($T,$k.$eC("_cell_focus"));}};$a6.appendChild($T);this.elements.cells.push($T);this.$dJ.cells[$1n]=$T;if(typeof $k.onAfterCellRender==='function'){var $n={};$n.cell=DayPilot.Util.copyProps(c,{},["x","y","displayY","start","end","resource","grid"]);$n.div=$T;$k.onAfterCellRender($n);}};this.$f1={};this.$hP=function(){var $1l=$k.$lZ();$1l.forEach(function(y){$k.$go(y);});$k.$eb();};this.$lZ=function(){var $l=DayPilot.list();var $N=this.$ev();var $ch=$N.xStart;var $0B=$N.xEnd-$N.xStart;var $4k=$N.yStart;var $ci=$N.yEnd-$N.yStart;for(var j=0;j<$ci;j++){var y=$4k+j;for(var i=0;i<=$0B;i++){var x=$ch+i;if(!this.rowlist[y].hidden){if(!$k.$f1[x+"_"+y]){$l.push(y);break;}}}};return $l;};this.$iw=function(x,y,$2o){if(typeof this.onBeforeCellRender==='function'){$2o=$2o||"main";var $1n=$2o+"_"+x+"_"+y;if($k.beforeCellRenderCaching&&$k.$f1[$1n]){return;};$k.$f1[$1n]=true;var $0S=$k.$fi(x);if(!$0S){return;};var $T=$k.cells.findXy(x,y,$2o)[0];var $n={};$n.cell=$T;$n.getPixels=function($w){var $w=new DayPilot.Date($w);var $cH=$k.getPixels($w).left;return $cH-$0S.left;};this.onBeforeCellRender($n);DayPilot.Util.copyProps($n.cell,$n.cell.properties,$k.$lX);if($n.cell.properties.disabled){$k.$f1.$iP=true;};return $n;}};this.$lY=function($2h,$0a){if($0a){for(var i=0;i<$0a.length;i++){if(!DayPilot.Util.isNullOrUndefined($2h[$0a[i]])){return true;}}}else{for(var name in $2h){if(!DayPilot.Util.isNullOrUndefined($2h[name])){return true;}}};return false;};this.clearSelection=function(){this.$ef();mr.clear();};this.cleanSelection=this.clearSelection;this.$lA=function($O,end,$1B){$O=new DayPilot.Date($O);end=new DayPilot.Date(end);var $A=$k.$et($1B);var $cI=$k.$fb($O);var $3Y=$cI.current||$cI.next;if(!$3Y){throw new DayPilot.Exception("Time range selection 'start' out of timeline");};var $cJ=$k.$fb(new DayPilot.Date(end).addMilliseconds(-1));var $3Z=$cJ.current||$cJ.previous;if(!$3Z){throw new DayPilot.Exception("Time range selection 'end' out of timeline");};var $1C={};$1C.start={y:$A.index,x:DayPilot.indexOf($k.itline,$3Y),"time":$O,"grid":$A.grid};$1C.end={x:DayPilot.indexOf($k.itline,$3Z),"time":end};$1C.calendar=this;return $1C;};this.selectTimeRange=function($O,end,$1B,$cK){var $1C=$k.$lA($O,end,$1B);$k.$gB($1C);if(!$cK){setTimeout(function(){$k.$gx($1C);},0);}};this.$gt=function(){DayPilot.de(DayPilotScheduler.movingShadow);DayPilotScheduler.movingShadow=null;$k.$iR();$k.$iJ.clear();if(DayPilot.Global.movingLink){DayPilot.Global.movingLink.clear();DayPilot.Global.movingLink=null;}};this.$ef=function(){if($k.divShadow){$k.divShadow.innerHTML="";};if($k.$hr.top.divShadow){$k.$hr.top.divShadow.innerHTML="";};if($k.$hr.bottom.divShadow){$k.$hr.bottom.divShadow.innerHTML="";};$k.elements.range=[];$k.elements.range2=null;$k.$iR();$k.rangeHold=null;};var $cG={};$cG.cell=null;$cG.focusCell=function(x,y){$cG.unfocusCell();var $06=$cG.cellDiv(x,y);if($06){DayPilot.Util.addClass($06,$k.$eC("_cell_focus"));};$cG.cell={x:x,y:y};var $N=$k.$h9();if($N.start.x>=x){var $O=$k.itline[x].start;$k.scrollTo($O);}else if($N.end.x<=x){var end=$k.itline[x].end;$k.scrollTo(end,false,"right");}};$cG.unfocusCell=function(){if(!$cG.cell){return;};var $06=$cG.cellDiv($cG.cell.x,$cG.cell.y);if($06){DayPilot.Util.removeClass($06,$k.$eC("_cell_focus"));};$cG.cell=null;};$cG.cellDiv=function(x,y,$2o){$2o=$2o||"main";var $1n=$2o+"_"+x+"_"+y;var $06=$k.$dJ.cells[$1n];return $06;};$cG.getCell=function(){return $cG.cell;};$cG.target=function(){var $cL=$k.temp.keyboardTarget;switch($cL){case "component":return $k.nav.top;case "document":return document;};throw new DayPilot.Exception("Invalid keyboardTarget value: "+$cL);};$cG.$m0=null;$cG.activateGrid=function(){var $1M=$cG.target();if($1M!==document){$k.nav.top.setAttribute("tabindex","-1");};$1M.addEventListener("keyup",function(ev){if(ev.keyCode===16){var $1C=$cG.$m0;$cG.$m0=null;$cG.timeRangeSelect($1C.start.x,$1C.start.y,$1C.end.x);}});$1M.addEventListener("keydown",function(ev){var $R=37;var up=38;var $S=39;var $cM=40;var $cN=13;var $c5=[$R,up,$S,$cM];if($c5.indexOf(ev.keyCode)!==-1){ev.preventDefault();};var $1N=ev.shiftKey;if($1N&&!$cG.$m0){$cG.$m0={"calendar":$k,"start":{x:$cG.cell.x,y:$cG.cell.y}};};var $cO=!$cG.$m0;switch(ev.keyCode){case $S:if($cG.cell.x<$k.itline.length-1){$cG.focusCell($cG.cell.x+1,$cG.cell.y);};break;case $R:if($cG.cell.x>0){$cG.focusCell($cG.cell.x-1,$cG.cell.y);};break;case up:if($cG.cell.y>0&&$cO){$cG.focusCell($cG.cell.x,$cG.cell.y-1);};break;case $cM:if($cG.cell.y<$k.rowlist.length-1&&$cO){$cG.focusCell($cG.cell.x,$cG.cell.y+1);};break;case $cN:$cG.timeRangeSelect($cG.cell.x,$cG.cell.y);break;};if(ev.keyCode===$R||ev.keyCode===$S){if($cG.$m0){$cG.$m0.end={x:$cG.cell.x,y:$cG.cell.y};$k.$gB($cG.$m0);}}});};$cG.timeRangeSelect=function(x,y,x2){var $1C={};$1C.start={y:y,x:x};$1C.end={x:typeof x2==="undefined"?x:x2};$1C.calendar=$k;$k.rangeHold=$1C;$k.$gx($1C);};$cG.initGrid=function(){$cG.activateGrid();var $N=$k.$h9();$cG.focusCell($N.start.x,$N.start.y);if($cG.target()!==document){$k.nav.top.focus();}};this.$m1=$cG;this.$g8={};var $0g=this.$g8;$0g.clearCache=function(){delete $k.$dJ.eventHeight;delete $k.$dJ.headerHeight;};$0g.locale=function(){return DayPilot.Locale.find($k.locale);};$0g.timeFormat=function(){if($k.timeFormat!=='Auto'){return $k.timeFormat;};return $0g.locale().timeFormat;};$0g.weekStarts=function(){if($k.weekStarts==='Auto'){var $8W=$0g.locale();if($8W){return $8W.weekStarts;}else{return 0;}}else{return $k.weekStarts||0;}};$0g.mobile=function(){var ua=navigator.userAgent.toLowerCase();return ua.indexOf("mobile")!==-1||ua.indexOf("android")!=-1;};$0g.layout=function(){var $cP=/MSIE 6/i.test(navigator.userAgent);if($k.layout==='Auto'){if($cP){return 'TableBased';}else{return 'DivBased';}};return $k.layout;};$0g.notifyType=function(){var $01;if($k.notifyCommit==='Immediate'){$01="Notify";}else if($k.notifyCommit==='Queue'){$01="Queue";}else{throw "Invalid notifyCommit value: "+$k.notifyCommit;};return $01;};$0g.isResourcesView=function(){return $k.viewType!=='Days';};$0g.useBox=function($cQ){if($k.useEventBoxes==='Always'){return true;};if($k.useEventBoxes==='Never'){return false;};return $cQ<$k.$hZ()*60*1000;};$0g.eventHeight=function(){if($k.$dJ.eventHeight){return $k.$dJ.eventHeight;};var $V=$k.$kC("_event_height").height;if(!$V){$V=$k.eventHeight;};$k.$dJ.eventHeight=$V;return $V;};$0g.headerHeight=function(){if($k.$dJ.headerHeight){return $k.$dJ.headerHeight;};var $V=$k.$kC("_header_height").height;if(!$V){$V=$k.headerHeight;};$k.$dJ.headerHeight=$V;return $V;};$0g.$kh=function(){if($k.$dJ.scrollLineHeight){return $k.$dJ.scrollLineHeight;};var $06=document.createElement("div");$06.style.fontSize="initial";$06.style.display="none";document.body.appendChild($06);var $l=parseInt(window.getComputedStyle($06).fontSize)||16;document.body.removeChild($06);$k.$dJ.headerHeight=$l;return $l;};$0g.splitterWidth=function(){if($k.rowHeaderScrolling){return $k.rowHeaderSplitterWidth;};return 1;};$0g.$fm=function(){if(typeof $k.multiSelectRectangle==="string"){return $k.multiSelectRectangle;};if($k.rectangleSelectHandling==="Disabled"){return "Disabled";};return $k.rectangleSelectMode;};$0g.$iu=function(){return DayPilot.list($k.rowHeaderColumns).filter(function($5j){return !$5j.hidden;});};this.$m2={};var $6i=this.$m2;$6i.timeHeader=function($1o){var h={};h.top=0;h.height=0;var $cR=$0g.headerHeight();for(var i=0;i<=$1o;i++){var th=$k.timeHeaders[i];h.top+=h.height;h.height=th.height||$cR;};return h;};this.$hT=function(x,y,$2o){$2o=$2o||"main";var $1n=$2o+"_"+x+'_'+y;var $2l=$k.$hr[$2o];var $2m=$2l.rowlist;if($k.cellConfig){$1n=x+'_'+y;var $cS=0;for(var i=0;i<$k.resources.length;i++){if(!$k.resources[i].hidden){if($cS===y){y=i;break;};$cS+=1;}}};if(!this.cellProperties){this.cellProperties={};};if(this.cellProperties[$1n]){return this.cellProperties[$1n];};if(this.$dz){this.cellProperties[$1n]=$k.$m3(x,y);};if(!this.cellProperties[$1n]){var $A=$2m[y];var $1B=$A.id;var $1G=$A.start.getTime()-$k.$eZ().getTime();var $0S=$k.$fi(x);var $O=$0S.start.addTime($1G);var end=$0S.end.addTime($1G);var $cT={};$cT.start=$O;$cT.end=end;$cT.resource=$1B;var $T={};$T.business=$k.isBusiness($cT);if($A.cellsDisabled){$k.$f1.$iP=true;$T.disabled=true;};this.cellProperties[$1n]=$T;};return this.cellProperties[$1n];};this.$m4=function($1L,x,y){var $1n=x+'_'+y;this.cellProperties[$1n]={};DayPilot.Util.copyProps($1L,this.cellProperties[$1n],$k.$lX);return this.cellProperties[$1n];};this.$m3=function(x,y){if(!this.cellConfig){return null;};var $6s=this.cellConfig;var $T=this.cellProperties[x+"_"+y];if(!$T&&$6s.vertical){$T=this.cellProperties[x+"_0"];};if(!$T&&$6s.horizontal){$T=this.cellProperties["0_"+y];};if(!$T&&$6s["default"]){$T=$6s["default"];};var $9c={};DayPilot.Util.copyProps($T,$9c,$k.$lX);return $9c;};this.$dW=function(){if(this.$dz){return;};if(this.$dA){return;};this.$dA=true;if(!this.cellConfig){return;};var $6s=this.cellConfig;if($6s.vertical){for(var x=0;x<$6s.x;x++){var $cU=this.cellProperties[x+"_0"];if(!$cU){continue;};for(var y=1;y<$6s.y;y++){this.$m4($cU,x,y);}}};if($6s.horizontal){for(var y=0;y<$6s.y;y++){var $cU=this.cellProperties["0_"+y];if(!$cU){continue;};for(var x=1;x<$6s.x;x++){this.$m4($cU,x,y);}}};if($6s["default"]){var $cU=$6s["default"];for(var y=0;y<$6s.y;y++){for(var x=0;x<$6s.x;x++){if(!this.cellProperties[x+"_"+y]){this.$m4($cU,x,y);}}}}};this.isBusiness=function($T,$0I){var $O=$T.start;var end=$T.end;var $40=(end.getTime()-$O.getTime())/(1000*60);if($40<=1440){if(!$k.businessWeekends&&!$0I){if($T.start.dayOfWeek()===0||$T.start.dayOfWeek()===6){return false;}}};if($40<720){var $cV=$O.getHours();$cV+=$O.getMinutes()/60.0;$cV+=$O.getSeconds()/3600.0;$cV+=$O.getMilliseconds()/3600000.0;if($cV<this.businessBeginsHour){return false;};if(this.businessEndsHour>=24){return true;};if($cV>=this.businessEndsHour){return false;}};return true;};this.$m5=function(){switch($k.$dK){case "aspnet":if(!this.$gZ()){throw new DayPilot.Exception("ASP.NET WebForms environment required. https://doc.daypilot.org/common/asp-net-webforms-required/");};break;case "netmvc":if(!this.backendUrl){throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-asp-net-mvc/");};break;case "javaxx":if(!this.backendUrl){throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-java/");};break;}};this.$e2=function(){if(this.nav.top.style.visibility==='hidden'){this.nav.top.style.visibility='visible';}};this.$ih=function(){var el=$k.nav.top;if(!el){return false;};return el.offsetWidth>0&&el.offsetHeight>0;};this.$m6=function(){var $aC=$k.$ih;if(!$aC()&&!$k.$hf){$k.$hf=setInterval(function(){if($aC()){clearInterval($k.$hf);$k.show();$k.$iX();}},100);}};this.$m7=function($B){if(this.heightSpec!=="Parent100Pct"){this.heightSpec="Fixed";};this.height=$B-(this.$eJ()+2);this.$e6();};this.setHeight=this.$m7;this.$et=function(id){return $k.$jk(id).first();};this.$m8=function(){if(this.id&&this.id.tagName){this.nav.top=this.id;}else if(typeof this.id==="string"){this.nav.top=document.getElementById(this.id);if(!this.nav.top){throw "DayPilot.Scheduler: The placeholder element not found: '"+id+"'.";}}else{throw "DayPilot.Scheduler() constructor requires the target element or its ID as a parameter";}};this.$m9=function(){this.rowHeaderColumnsMode="Legacy";this.$kB();this.$dV();this.$gb();this.$e3();this.$kF();this.$hd();DayPilotScheduler.register(this);this.$dP(this.afterRenderData,false);this.$kG();this.$dO();this.$fg("Init");};this.init=function(){if(this.$en){throw new DayPilot.Exception("This instance is already initialized. Use update() to change properties.")};this.$m5();this.$ma();this.$mb();this.$m6();this.$kk();this.$mc();return this;};this.$mc=function(){if($k.temp.keyboard){$cG.initGrid();}};this.$md=function(){$k.multiselect.$ea($k.selectedEvents);};this.$mb=function(){this.$m8();if(this.nav.top.dp){return;};this.$g6();var $cW=this.$hz();if($cW){this.$m9();this.$en=true;this.$dR();return;};this.$kF();this.$hd();DayPilotScheduler.register(this);this.$kG();this.$md();if($k.zoomLevels&&$k.zoomLevels[$k.zoom.active]){$k.zoom.setActive($k.zoom.active);};this.$fO();var angular=$k.$gc.scope||$k.$el.enabled;if($k.scrollToDate){$k.scrollTo($k.scrollToDate);}else if($k.scrollX||$k.scrollY){$k.setScroll($k.scrollX,$k.scrollY);}else if(!angular){$k.$ej();};if($k.scrollToResourceId){$k.scrollToResource($k.scrollToResourceId);$k.scrollToResourceId=null;};var $cX=function(){if($k.scrollY){$k.setScroll($k.scrollX,$k.scrollY);}};window.setTimeout($cX,200);if(this.messageHTML){window.setTimeout(function(){$k.message($k.messageHTML);},0);};this.$dO();this.$dR();this.$dP(this.afterRenderData,false);if($k.initEventEnabled){setTimeout(function(){$k.$fg("Init");});};this.$gg();this.$en=true;this.$he=true;var p=$k.$eo;if(p){$k.scrollTo(p.date,p.animated,p.position);}else{$k.$ej();}};this.$ma=function(){if($k.$eS()){delete $k.infinite;}};this.$me=null;this.$ge=function($j){if(!$j){return;};var $cY={"events":{"preInit":function(){var $03=this.data;if(!$03){return;};if(DayPilot.isArray($03.list)){$k.events.list=$03.list;}else{$k.events.list=$03;}},"postInit":function(){}},"links":{"preInit":function(){var $cZ=this.data;if(!$cZ){return;};if(DayPilot.isArray($cZ.list)){$k.links.list=$cZ.list;}else{$k.links.list=$cZ;}},"postInit":function(){}},"scrollTo":{"preInit":function(){},"postInit":function(){if(this.data){$k.$em(this.data,$j.scrollToAnimated,$j.scrollToPosition);}}},"scrollX":{"postInit":function(){if(this.data){$k.$er(this.data);}}},"scrollY":{"postInit":function(){if(this.data){$k.$eG(this.data);}}},"zoom":{"preInit":function(){var $1n=this.data;if(typeof $1n==="string"){var id=$1n;$1n=$k.zoom.$fI(id);};var $d0=$1n!==$k.zoom.active;var $w=$k.zoom.$fJ();var $n=$k.zoom.$fK($1n,$w);if($d0){this.date=$w;}else{this.date=null;}},"postInit":function(){if(this.date){$k.$em(this.date,false,$k.zoomPosition);}}},};$k.$me=$cY;if($k.$el.scrollToRequested){$cY.scrollTo.data=$k.$el.scrollToRequested;$k.$el.scrollToRequested=null;};if($k.$el.scrollXRequested){$cY.scrollX.data=$k.$el.scrollXRequested;$k.$el.scrollXRequested=null;};if($k.$el.scrollYRequested){$cY.scrollY.data=$k.$el.scrollYRequested;$k.$el.scrollYRequested=null;};for(var name in $j){if(!$cY[name]){$k[name]=$j[name];}};for(var name in $j){if($cY[name]){var $04=$cY[name];$04.data=$j[name];if($04.preInit){$04.preInit();}}}};this.$gg=function(){var $cY=$k.$me;for(var name in $cY){var $04=$cY[name];if($04.postInit){$04.postInit();}};$k.$me={};};this.diag=function(){var $l={};$l.dataEvents=$k.events.list&&$k.events.list.length;$l.dataRows=$k.rowlist&&$k.rowlist.length;$l.dataTimeline=$k.itline&&$k.itline.length;$l.dataCells=$l.dataTimeline*$l.dataRows;$l.renderedEvents=$k.elements.events.length;$l.renderedCells=$k.elements.cells.length;$l.renderedRows=$k.divResScroll.firstChild.childNodes.length-1;$l.domEvents=$k.divEvents.getElementsByTagName("*").length;$l.domCells=$k.divCells.getElementsByTagName("*").length;$l.domRows=$k.divResScroll.getElementsByTagName("*").length;return $l;};this.temp={};this.temp.keyboard=false;this.temp.keyboardTarget="document";this.temp.allowDuplicateEventIds=false;this.internal={};this.internal.initialized=function(){return $k.$en;};this.internal.dragInProgress=this.$lf;this.internal.startMoving=this.$kZ;this.internal.invokeEvent=this.$fv;this.internal.eventMenuClick=this.$gw;this.internal.timeRangeMenuClick=this.$gD;this.internal.resourceHeaderMenuClick=this.$gF;this.internal.linkMenuClick=this.$gE;this.internal.bubbleCallBack=this.$gu;this.internal.findEventDiv=this.$fV;this.internal.rowtools=this.$gN;this.internal.getNodeChildren=this.$hb;this.internal.callback=function(){$k.$fg.apply($k,arguments);};this.internal.createRowObject=this.$gH;this.internal.restools=this.$jJ;this.internal.gantt=null;this.internal.adjustEndIn=$k.$gp;this.internal.adjustEndNormalize=$k.$gq;this.internal.touch=$k.$l0;this.internal.cssNames=$k.$l2;this.internal.enableCellStacking=function($9Y){$k.$dB=true;$k.$dC=$9Y;};this.internal.deleteDragSource=function(){$k.$dM();};this.internal.skipUpdate=$k.$el.skipUpdate;this.internal.skipped=$k.$el.skipped;this.internal.loadOptions=$k.$ge;this.internal.postInit=$k.$gg;this.internal.enableAngular2=function(){$k.$el.enabled=true;};this.internal.enableReact=function($d1,$d2){$k.$hk.react=$d1;$k.$hk.reactDOM=$d2;};this.internal.reactRefs=function(){return DayPilot.Util.copyProps($k.$hk,{},["react","reactDOM"]);};this.Init=this.init;this.$ge($j);};debug=new DayPilot.Scheduler().v==="${v\u007d";DayPilot.Row=function($A,$k){if(!$A){throw "Now row object supplied when creating DayPilot.Row";};if(!$k){throw "No parent control supplied when creating DayPilot.Row";};var $1n=DayPilot.indexOf($k.rowlist,$A);this.$mf={};var $0u=this.$mf;$0u.id=$A.id;$0u.name=$A.name;$0u.data=$A.resource;$0u.tags=$A.tags;var r=this;r.isRow=true;r.menuType='resource';r.start=$A.start;r.name=$A.name;r.value=$A.id;r.id=$A.id;r.tags=$A.tags;r.bubbleHtml=$A.bubbleHtml;r.index=$1n;r.displayY=$A.displayY;r.level=$A.level;r.calendar=$k;r.data=$A.resource;r.grid=$A.grid;r.$iE=$A;r.$={};r.$.row=$A;r.toJSON=function($7S){var $1U={};$1U.start=this.start;$1U.name=this.name;$1U.value=this.value;$1U.id=this.id;$1U.index=this.index;return $1U;};r.parent=function(){if(!r.$iE.$jT){return null;};return $k.$gH(r.$iE.$jT);};r.children=function(){var $02=DayPilot.list(r.$.row.children).map(function(i){return $k.$gH($k.rowlist[i]);});$02.add=function($cw){var r1=r.$.row.resource;if(!r1.children){r1.children=[];};r1.children.push($cw);};return $02;};r.loaded=function(){return r.$iE.loaded;};Object.defineProperty(r,"hidden",{get:function(){return r.$iE.hidden;},});Object.defineProperty(r,"hiddenUsingFilter",{get:function(){return r.$iE.$jS;},set:function($d3){r.$iE.$jS=$d3;if(!$d3){r.$iE.hidden=!r.$iE.$jV();}}});r.cells={};r.cells.all=function(){var $02=[];var $22=$k.itline.length;var y=r.index;for(var x=0;x<$22;x++){var $T=$k.cells.findXy(x,y);$02.push($T[0]);};return $k.$hU($02);};r.cells.forRange=function($O,end){var $A=r;var $1G=$A.start.getTime()-$k.$eZ().getTime();$O=new DayPilot.Date($O);end=new DayPilot.Date(end);var $3q=$k.$eZ().addTime($1G);var $2p=$k.$f4().addTime($1G);if($O<$3q){$O=$3q;};if(end>$2p){end=$2p;};var $4s=$k.cells.find($O,r)[0];var $4t=$k.cells.find(end.addTime(-1),r)[0];if(!$4s){return null;};if(!$4t){return null;};if($4s.y!==$4t.y){return null;};var y=$4s.y;var $02=[];for(var x=$4s.x;x<=$4t.x;x++){$02.push($k.cells.$hQ(x,y,$4s.grid));};return $k.$hU($02);};r.cells.totalDuration=function(){return new DayPilot.Duration(r.cells.all().map(function($T){return $T.end.getTime()-$T.start.getTime();}).reduce(function($d4,$d3){return $d4+$d3;},0));};r.events={};r.events.all=function(){var $02=DayPilot.list();for(var i=0;i<r.$iE.events.length;i++){$02.push(r.$iE.events[i]);};return $02;};r.events.isEmpty=function(){return r.$iE.events.length===0;};r.events.forRange=function($O,end){return r.$iE.events.forRange($O,end);};r.events.totalDuration=function(){var $0J=0;r.events.all().forEach(function($04){$0J+=$04.part.end.getTime()-$04.part.start.getTime();});return new DayPilot.Duration($0J);};r.groups={};r.groups.collapseAll=function(){for(var i=0;i<r.$iE.blocks.length;i++){var $82=r.$iE.blocks[i];var $d5=new $d6($82);$d5.$mg();};$k.$fE();$k.$fF([r.$iE]);$k.$e6();};r.groups.expandAll=function(){for(var i=0;i<r.$iE.blocks.length;i++){var $82=r.$iE.blocks[i];var $d5=new $d6($82);$d5.$mh();};$k.$fE();$k.$fF([r.$iE]);$k.$e6();};r.groups.expanded=function(){var $02=[];for(var i=0;i<r.$iE.blocks.length;i++){var $82=r.$iE.blocks[i];if($82.expanded&&$82.lines.length>$k.groupConcurrentEventsLimit){$02.push(new $d6($82));}};return DayPilot.list($02);};r.groups.collapsed=function(){var $02=[];for(var i=0;i<r.$iE.blocks.length;i++){var $82=r.$iE.blocks[i];if(!$82.expanded){$02.push(new $d6($82));}};return DayPilot.list($02);};r.groups.all=function(){var $02=[];for(var i=0;i<r.$iE.blocks.length;i++){var $82=r.$iE.blocks[i];$02.push(new $d6($82));};return DayPilot.list($02);};r.events.collapseGroups=r.groups.collapseAll;r.events.expandGroups=r.groups.expandAll;r.column=function(i){return new $d7(r,i);};r.toggle=function(){$k.$id(r.index);};r.collapse=function(){if(r.$.row.expanded){r.toggle();}};r.expand=function(){if(!r.$.row.expanded){r.toggle();}};r.remove=function(){$k.rows.remove(r);};r.edit=function(){$k.rows.edit(r);};r.addClass=function($4w){var $A=r;var $7f=$k.divHeader;var $A=$7f.rows[$A.index];if($A){var $Q=DayPilot.list($A.cells).map(function($T){return $T.cellDiv;});DayPilot.Util.addClass($Q,$4w);};r.$.row.cssClass=DayPilot.Util.addClassToString(r.$.row.cssClass,$4w);r.data.cssClass=$4w;};r.removeClass=function($4w){var $A=r;var $7f=$k.divHeader;var $A=$7f.rows[$A.index];if($A){var $Q=DayPilot.list($A.cells).map(function($T){return $T.cellDiv;});DayPilot.Util.removeClass($Q,$4w);};r.$.row.cssClass=DayPilot.Util.removeClassFromString(r.$.row.cssClass,$4w);r.data.cssClass=DayPilot.Util.removeClassFromString(r.data.cssClass,$4w);};var $d6=function($82){var $d8=function($82){for(var i=0;i<$k.elements.events.length;i++){var $06=$k.elements.events[i];if($06.event===$82){return $06;}};return null;};this.$mh=function(){$82.expanded=true;var $02=$k.$jp;DayPilot.list($82.events).forEach(function(e){$02.push(e.id());});var $06=$d8($82);if($06){$k.$kJ($06);var $aH=DayPilot.indexOf($k.elements.events,$06);if($aH!==-1){$k.elements.events.splice($aH,1);}}};this.expand=function(){this.$mh();$k.$fE();$k.$fF([$82.row]);$k.$e6();};this.$mg=function(){if($82.lines.length>$k.groupConcurrentEventsLimit){$82.expanded=false;var $47=DayPilot.list($82.events).map(function(e){return e.id()});$k.$jp=$k.$jp.filter(function($04){return !DayPilot.contains($47,$04);});}};this.collapse=function(){this.$mg();$k.$fE();$k.$fF([$82.row]);$k.$e6();};};var $d7=function($A,i){this.html=function($0h){var $7f=$A.calendar.divHeader;var $T=$7f.rows[$A.index].cells[i];var $5n=$T.textDiv;if(typeof $0h==="undefined"){return $5n.innerHTML;}else{$5n.innerHTML=$0h;}};};};DayPilotScheduler.moving=null;DayPilotScheduler.movingEvent=null;DayPilotScheduler.originalMouse=null;DayPilotScheduler.resizing=null;DayPilotScheduler.resizingEvent=null;DayPilotScheduler.preventEventClick=false;DayPilotScheduler.globalHandlers=false;DayPilotScheduler.timeRangeTimeout=null;DayPilotScheduler.selectedCells=null;DayPilotScheduler.dragStart=function(element,$0Y,id,$5n){DayPilot.us(element);var $d9=DayPilotScheduler.drag={};$d9.element=element;$d9.duration=$0Y;$d9.text=$5n;$d9.id=id;$d9.data={"id":id,"text":$5n,"duration":$0Y,"externalHtml":$5n};return false;};DayPilot.Scheduler.startDragging=function($j){var $j=$j||{};var element=$j.element;var $da=$j.keepElement?null:element;DayPilot.us(element);var $d9=DayPilotScheduler.drag={};$d9.element=$da;$d9.id=$j.id;$d9.duration=$j.duration||60;$d9.text=$j.text||"";$d9.data=$j;return false;};DayPilot.Scheduler.makeDraggable=function($j){$j=$j||{};var element=$j.element;var $da=$j.keepElement?null:($j.remove||element);if(!element){throw new DayPilot.Exception("makeDraggable(options): options.element must be specified");};DayPilot.us(element);DayPilot.re(element,"mousedown",function(ev){if(!DayPilot.Util.mouseButton(ev).left){return;};startDragging();var element=(ev.target||ev.srcElement);if(element.tagName){var $db=element.tagName.toLowerCase();if($db==="textarea"||$db==="select"||$db==="input"){return false;}};ev.preventDefault&&ev.preventDefault();return false;});element.ontouchstart=function(ev){var $b2=0;window.setTimeout(function(){startDragging();DayPilotScheduler.gTouchMove(ev);ev.preventDefault();},$b2);ev.preventDefault();};function startDragging(){var $0Y=$j.duration||60;if($0Y instanceof DayPilot.Duration){$0Y=$0Y.totalSeconds();};var $d9=DayPilotScheduler.drag={};$d9.element=$da;$d9.id=$j.id;$d9.duration=$0Y;$d9.text=$j.text||"";$d9.data=$j;}};DayPilot.Scheduler.stopDragging=function(){if(DayPilotScheduler.drag){if(DayPilotScheduler.drag.schedulerSourceEvent){var e=DayPilotScheduler.drag.schedulerSourceEvent;var $dc=e.event.calendar;if($dc){DayPilot.Util.removeClass(e,$dc.$eC($k.$l2.eventMovingSource));}}};DayPilotScheduler.dragStop();if(DayPilotScheduler.resizing){DayPilot.de(DayPilotScheduler.resizingShadow);DayPilotScheduler.resizing=null;DayPilotScheduler.resizingEvent=null;DayPilotScheduler.resizingShadow=null;};if(DayPilotScheduler.moving){var $k=DayPilotScheduler.movingEvent.calendar;if($k){DayPilot.Util.removeClass(DayPilotScheduler.moving,$k.$eC($k.$l2.eventMovingSource));};DayPilot.de(DayPilotScheduler.movingShadow);DayPilotScheduler.moving=null;DayPilotScheduler.movingEvent=null;DayPilotScheduler.movingShadow=null;};if(DayPilotScheduler.range){var $k=DayPilotScheduler.range.calendar;$k.clearSelection();DayPilotScheduler.range=null;};document.body.style.cursor='';DayPilot.list(DayPilotScheduler.registered).forEach(function($k){$k.$kq();$k.$iR();$k.$gN.resetMoving();});};DayPilotScheduler.dragStop=function(){if(DayPilotScheduler.gShadow){document.body.removeChild(DayPilotScheduler.gShadow);DayPilotScheduler.gShadow=null;};DayPilotScheduler.drag=null;};DayPilotScheduler.register=function($k){if(!DayPilotScheduler.registered){DayPilotScheduler.registered=DayPilot.list();DayPilotScheduler.registered.out=function(){var $02=DayPilotScheduler.registered;$02.forEach(function(c){c.$j0();});};};for(var i=0;i<DayPilotScheduler.registered.length;i++){if(DayPilotScheduler.registered[i]===$k){return;}};DayPilotScheduler.registered.push($k);};DayPilotScheduler.unregister=function($k){var a=DayPilotScheduler.registered;if(a){var i=DayPilot.indexOf(a,$k);if(i!==-1){a.splice(i,1);};if(a.length===0){a=null;}};if(!a){DayPilot.ue(document,'mousemove',DayPilotScheduler.gMouseMove);DayPilot.ue(document,'mouseup',DayPilotScheduler.gMouseUp);DayPilot.ue(document,'mousedown',DayPilotScheduler.gMouseDown);DayPilot.ue(document,'touchmove',DayPilotScheduler.gTouchMove);DayPilot.ue(document,'touchend',DayPilotScheduler.gTouchEnd);DayPilot.ue(window,'keyup',DayPilotScheduler.gKeyUp);DayPilotScheduler.globalHandlers=false;}};function calendarFromTouchEvent(ev){var $dd=ev.touches[0].clientX;var $de=ev.touches[0].clientY;var el=document.elementFromPoint($dd,$de);while(el&&el.parentNode){el=el.parentNode;if(el.daypilotMainD){return el.calendar;}};return false;};function touchMousePos(ev){var x=ev.touches[0].pageX;var y=ev.touches[0].pageY;var $bw={};$bw.x=x;$bw.y=y;return $bw;};function status($g,$9o){var status=document.getElementById("status");if(!status){return;};if($9o){status.innerHTML="";};status.innerHTML+=" "+$g;};DayPilotScheduler.gTouchMove=function(ev){if(DayPilotScheduler.resizing){var $k=DayPilotScheduler.resizing.event.calendar;$k.coords=$k.$l0.relativeCoords(ev);$k.$l0.updateResizing();ev.preventDefault();};if(DayPilotScheduler.moving&&!DayPilotScheduler.drag){ev.preventDefault();var $k=DayPilotScheduler.movingEvent.calendar;$k.coords=$k.$l0.relativeCoords(ev);$k.$l0.updateMoving();(function dragOut(){if(!$k.dragOutAllowed){return;};var $df=calendarFromTouchEvent(ev);if(!$df||$df!==$k){var e=DayPilotScheduler.movingEvent;DayPilotScheduler.drag={};var $d9=DayPilotScheduler.drag;$d9.id=e.id();$d9.text=e.text();$d9.schedulerSourceEvent=DayPilotScheduler.moving;$d9.element=null;$d9.duration=(e.rawend().getTime()-e.start().getTime())/1000;$d9.text=e.text();$d9.id=e.id();$d9.event=DayPilot.Util.copyProps(e,new DayPilot.Event());$k.$iR();DayPilot.de(DayPilotScheduler.movingShadow);DayPilotScheduler.movingShadow.calendar=null;DayPilotScheduler.movingShadow=null;DayPilotScheduler.moveDragStart=null;DayPilotScheduler.registered.out();}})();};if(DayPilotScheduler.drag){ev.preventDefault();var $bw=touchMousePos(ev);var $k=calendarFromTouchEvent(ev);if($k){if(DayPilotScheduler.gShadow){document.body.removeChild(DayPilotScheduler.gShadow);};DayPilotScheduler.gShadow=null;$k.coords=$k.$l0.relativeCoords(ev);if(!DayPilotScheduler.movingShadow&&$k.rowlist.length>0){if(!DayPilotScheduler.moving){DayPilotScheduler.moving={};var event=DayPilotScheduler.drag.event;if(!event){var $7F=$k.itline[0].start;var ev={'id':DayPilotScheduler.drag.id,'start':$7F,'end':$7F.addSeconds(DayPilotScheduler.drag.duration),'text':DayPilotScheduler.drag.text};var $s=DayPilotScheduler.drag.data;if($s){var $5G=['duration','element','remove','id','text'];for(var name in $s){if(DayPilot.contains($5G,name)){continue;};ev[name]=$s[name];}};event=new DayPilot.Event(ev);event.calendar=$k;event.part.duration=DayPilotScheduler.drag.duration*1000;};event.part.external=true;var $0r=DayPilotScheduler.drag.schedulerSourceEvent;if($0r&&$0r.event&&$0r.event.calendar===$k){event.part.external=false;};DayPilotScheduler.movingEvent=event;};DayPilotScheduler.movingShadow=$k.$hp(DayPilotScheduler.movingEvent);};if(DayPilotScheduler.moving){$k.$l0.updateMoving();}}else{DayPilot.de(DayPilotScheduler.movingShadow);var $dg=DayPilotScheduler.moving;DayPilotScheduler.moving=null;DayPilotScheduler.movingEvent=null;DayPilotScheduler.movingShadow=null;if(!DayPilotScheduler.gShadow){DayPilotScheduler.gShadow=DayPilotScheduler.createGShadow(DayPilotScheduler.drag.data);DayPilotScheduler.gShadow.source=$dg;};var $2n=DayPilotScheduler.gShadow;$2n.style.left=$bw.x+'px';$2n.style.top=$bw.y+'px';DayPilotScheduler.registered.out();}}};DayPilotScheduler.gTouchEnd=function(ev){DayPilotScheduler.gMouseUp(ev);};DayPilotScheduler.gMouseMove=function(ev){if(typeof(DayPilotScheduler)==='undefined'){return;};if(DayPilot.Global.touch.active||DayPilot.Global.touch.start){return;};ev=ev||window.event;if(ev.insideMainD){return;}else if(ev.srcElement){if(ev.srcElement.inside){return;}};var $bw=DayPilot.mc(ev);if(DayPilotScheduler.drag){if(!DayPilotScheduler.drag.startFired){var $s=DayPilotScheduler.drag.data||{};var $dh=$s.onDragStart;var $1J=false;if(typeof $dh==="function"){var $n={};$n.data=$s;$n.preventDefault=function(){$n.preventDefault.value=true;};$dh($n);$1J=$n.preventDefault.value;};DayPilotScheduler.drag.startFired=true;if($1J){DayPilotScheduler.drag=null;return;}};document.body.style.cursor='move';if(!DayPilotScheduler.gShadow){DayPilotScheduler.gShadow=DayPilotScheduler.createGShadow(DayPilotScheduler.drag.data);};var $2n=DayPilotScheduler.gShadow;$2n.style.left=$bw.x+'px';$2n.style.top=$bw.y+'px';DayPilotScheduler.moving=null;DayPilotScheduler.movingEvent=null;if(DayPilotScheduler.movingShadow){var $di=DayPilotScheduler.movingShadow.calendar;$di&&$di.$iR();DayPilotScheduler.movingShadow.calendar=null;DayPilot.de(DayPilotScheduler.movingShadow);DayPilotScheduler.movingShadow=null;}}else if(DayPilotScheduler.moving&&DayPilotScheduler.movingEvent&&DayPilotScheduler.movingEvent.calendar.dragOutAllowed&&!DayPilotScheduler.drag){var $di=DayPilotScheduler.movingEvent.calendar;var ev=DayPilotScheduler.movingEvent;document.body.style.cursor='move';if(!DayPilotScheduler.gShadow){DayPilotScheduler.gShadow=DayPilotScheduler.createGShadow(ev.data);DayPilotScheduler.gShadow.source=DayPilotScheduler.moving;};var $2n=DayPilotScheduler.gShadow;$2n.style.left=$bw.x+'px';$2n.style.top=$bw.y+'px';DayPilotScheduler.drag={};var $d9=DayPilotScheduler.drag;$d9.schedulerSourceEvent=DayPilotScheduler.moving;$d9.element=null;$d9.duration=(ev.rawend().getTime()-ev.start().getTime())/1000;$d9.text=ev.text();$d9.id=ev.value();$d9.event=DayPilot.Util.copyProps(ev,new DayPilot.Event());$di.$iR();DayPilot.de(DayPilotScheduler.movingShadow);DayPilotScheduler.movingShadow.calendar=null;DayPilotScheduler.movingShadow=null;};DayPilotScheduler.registered.out();};DayPilotScheduler.gUnload=function(ev){if(!DayPilotScheduler.registered){return;};for(var i=0;i<DayPilotScheduler.registered.length;i++){var c=DayPilotScheduler.registered[i];DayPilotScheduler.unregister(c);}};DayPilotScheduler.gMouseDown=function(ev){if(DayPilotScheduler.editing){DayPilotScheduler.editing.blur();}};DayPilotScheduler.gKeyUp=function(ev){var ev=ev||window.event;var $7S=ev.keyCode;if($7S===17){if(DayPilotScheduler.rangeCalendar){var $k=DayPilotScheduler.rangeCalendar;$k.$lB.dispatch();}}};DayPilotScheduler.gMouseUp=function(ev){DayPilot.list(DayPilotScheduler.registered).forEach(function($k){$k.$kq();$k.$fd={};});if(DayPilotScheduler.resizing){var $dj=function(){var e=DayPilotScheduler.resizingEvent;var $k=e.calendar;document.body.style.cursor='';DayPilotScheduler.resizing=null;DayPilotScheduler.resizingEvent=null;DayPilot.de(DayPilotScheduler.resizingShadow);DayPilotScheduler.resizingShadow=null;if($k){$k.$ld=null;}};setTimeout(function(){DayPilotScheduler.preventEventClick=false;});if(!DayPilotScheduler.resizingShadow){$dj();return;};var e=DayPilotScheduler.resizingEvent;var $k=e.calendar;var $0v=DayPilotScheduler.resizingShadow.finalStart;var $1a=DayPilotScheduler.resizingShadow.finalEnd;var $3i=DayPilotScheduler.resizingShadow.overlapping;var $b4=!DayPilotScheduler.resizingShadow.allowed;var $dk=$k.$iy.isInvalid();$k.$iR();$k.$iy.clear();var $1d=DayPilotScheduler.resizing.dpBorder==="left"?"start":"end";$dj();if($3i||$b4||$dk||$k.$iy.forbidden){return;};$k.$fw(e,$0v,$1a,$1d);}else if(DayPilotScheduler.movingEvent){var $dj=function(){DayPilot.Global.movingAreaData=null;var $k=DayPilotScheduler.movingShadow&&DayPilotScheduler.movingShadow.calendar;if(DayPilotScheduler.movingShadow){DayPilot.de(DayPilotScheduler.movingShadow);DayPilotScheduler.movingShadow.calendar=null;};document.body.style.cursor='';DayPilotScheduler.moving=null;DayPilotScheduler.movingEvent=null;DayPilotScheduler.drag=null;if($k){$k.$gs=null;}};if(!DayPilotScheduler.movingShadow){$dj();return;};var $0r=DayPilotScheduler.drag&&DayPilotScheduler.drag.schedulerSourceEvent;var e=$0r?$0r.event:DayPilotScheduler.movingEvent;var $k=DayPilotScheduler.movingShadow.calendar;if(!$k){$dj();return;};if(e.calendar&&e.calendar!==$k){var $3B=e.calendar;var $bB=e;var $bC=DayPilot.Util.copyProps(e.data);e=new DayPilot.Event($bC,$3B);e.part={"external":true,"duration":$3B.$i2($bB)};};DayPilot.Util.removeClass(DayPilotScheduler.moving,$k.$eC($k.$l2.eventMovingSource));(function clearSourceCss(){if(DayPilotScheduler.drag){if(DayPilotScheduler.drag.schedulerSourceEvent){var e=DayPilotScheduler.drag.schedulerSourceEvent;if(e&&e.event){var $dc=e.event.calendar;DayPilot.Util.removeClass(e,$dc.$eC($k.$l2.eventMovingSource));}}}})();if(!DayPilotScheduler.movingShadow.row){$dj();return;};clearTimeout($k.$ib.timeout);var $0v=DayPilotScheduler.movingShadow.start;var $1a=DayPilotScheduler.movingShadow.end;var $1i=($k.viewType!=='Days')?DayPilotScheduler.movingShadow.row.id:null;var external=e.part.external;var $0H=DayPilotScheduler.movingShadow.line;var $3i=DayPilotScheduler.movingShadow.overlapping;var $b4=!DayPilotScheduler.movingShadow.allowed;if(DayPilotScheduler.drag){if(!$k.todo){$k.todo={};};$k.todo.del=DayPilotScheduler.drag.element;DayPilotScheduler.drag=null;};DayPilotScheduler.movingShadow.calendar=null;document.body.style.cursor='';DayPilotScheduler.moving=null;DayPilotScheduler.movingEvent=null;if($3i||$b4||$k.$iJ.forbidden||$k.$iJ.invalid){$k.$gt();return;};var ev=ev||window.event;$k.$gr(e,$0v,$1a,$1i,external,ev,$0H);DayPilot.Global.movingAreaData=null;}else if(DayPilotScheduler.range){ev=ev||window.event;var $b1=DayPilot.Util.mouseButton(ev);var $1C=DayPilotScheduler.range;var $k=$1C.calendar;var $dj=function(){};$k.$ly=null;var $1p=ev.ctrlKey||ev.metaKey;if($k.allowMultiRange){if(!$k.elements.range2.overlapping){$k.$lB.add($1C);}else{DayPilot.de($k.elements.range2);$k.elements.range2=null;$k.$iR();};DayPilotScheduler.range=null;if(!$1p){if($b1.left){$k.$lB.dispatch();}};$dj();return;};if(DayPilotScheduler.timeRangeTimeout){clearTimeout(DayPilotScheduler.timeRangeTimeout);DayPilotScheduler.timeRangeTimeout=null;$dj();return;};$k.rangeHold=$1C;DayPilotScheduler.range=null;var $dl=function($1C){return function(){DayPilotScheduler.timeRangeTimeout=null;var $2n=$k.elements.range2;if($2n&&$2n.overlapping){$k.clearSelection();return;};$k.$gx($1C);if($k.timeRangeSelectedHandling!=="Hold"&&$k.timeRangeSelectedHandling!=="HoldForever"){$e();}else{$k.rangeHold=$1C;}};};var rc=$k.$lz($1C);$dj();if(!$b1.left){DayPilotScheduler.timeRangeTimeout=null;return;};if($1C.moved||$k.timeRangeDoubleClickHandling==='Disabled'){$dl(rc)();var ev=ev||window.event;ev.cancelBubble=true;return false;}else{DayPilotScheduler.timeRangeTimeout=setTimeout($dl(rc),$k.doubleClickTimeout);}}else if($7z.row){var $k=$7z.calendar;if($k){$k.$jE();}}else if($2D.source){var $k=$2D.calendar;$k.$ht.clearShadow();$k.$ht.hideLinkpoints();$2D.source=null;$2D.calendar=null;}else if(DayPilotScheduler.splitting){var $9z=DayPilotScheduler.splitting;$9z.cleanup();DayPilotScheduler.splitting=null;}else if(DayPilotScheduler.rectangleSelect){var $5k=DayPilotScheduler.rectangleSelect;var $k=$5k.calendar;if(!$5k.moved){DayPilotScheduler.rectangleSelect=null;if(!$k.$lb($k.coords)){$k.$lC(ev);};return;};var x=$5k.x;var y=$5k.y;var $D=$5k.width;var $V=$5k.height;var $dm=false;var $03=$k.$ez.eventsInRectangle(x,y,$D,$V).map(function($04){return $04.event;});var $dn=function(){setTimeout(function(){$k.$ln.clear();DayPilotScheduler.rectangleSelect=null;},0);$k.$iR();};if(typeof $k.onRectangleEventSelect==="function"||typeof $k.onRectangleSelect==="function"){var $bM=$k.$h8(y).i;var $bN=$k.$h8(y+$V).i;var $N={"start":{"y":$bM},"end":{"y":$bN}};var $8S=$k.$h3($N);var $n={};$n.events=$03;$n.append=false;$n.start=$k.getDate(x,true);$n.end=$k.getDate(x+$D,true);$n.resources=$8S;$n.preventDefault=function(){this.preventDefault.value=true;};if(typeof $k.onRectangleEventSelect==="function"){$k.onRectangleEventSelect($n);};if(typeof $k.onRectangleSelect==="function"){$k.onRectangleSelect($n);};if($n.preventDefault.value){$k.$ln.clear();DayPilotScheduler.rectangleSelect=null;$dn();return;};$dm=$n.append;};if($k.rectangleSelectHandling==="EventSelect"){if(!$dm){$k.multiselect.clear(true);};$03.forEach(function(e){$k.multiselect.add(e,true);});$k.multiselect.redraw();};$dn();if(typeof $k.onRectangleEventSelected==="function"||typeof $k.onRectangleSelected==="function"){var $n={};$n.events=$03;if(typeof $k.onRectangleEventSelected==="function"){$k.onRectangleEventSelected($n);};if(typeof $k.onRectangleSelected==="function"){$k.onRectangleSelected($n);}}};if(DayPilotScheduler.drag){if(DayPilotScheduler.drag.event&&DayPilotScheduler.drag.event.part){delete DayPilotScheduler.drag.event.part.external;};DayPilotScheduler.drag=null;document.body.style.cursor='';};if(DayPilotScheduler.gShadow){if(DayPilotScheduler.gShadow.source){var $k=DayPilotScheduler.gShadow.source.event.calendar;DayPilot.Util.removeClass(DayPilotScheduler.gShadow.source,$k.$eC($k.$l2.eventMovingSource));};document.body.removeChild(DayPilotScheduler.gShadow);DayPilotScheduler.gShadow=null;};DayPilotScheduler.moveOffsetX=null;DayPilotScheduler.moveDragStart=null;};DayPilotScheduler.createGShadow=function($j){var $j=$j||{};var $2n=document.createElement('div');$2n.setAttribute('unselectable','on');$2n.style.position='absolute';$2n.style.width='100px';$2n.style.height='20px';$2n.style.zIndex=101;$2n.style.pointerEvents="none";$2n.style.backgroundColor="#aaaaaa";$2n.style.opacity=0.5;$2n.style.filter="alpha(opacity=50)";$2n.className=$j.externalCssClass;if($j.externalHtml){$2n.innerHTML=$j.externalHtml;};document.body.appendChild($2n);return $2n;};var $7z={};DayPilot.Global.rowmoving=$7z;var $2D={};DayPilot.Global.linking=$2D;if(typeof jQuery!=='undefined'){(function($){$.fn.daypilotScheduler=function($j){var $0V=null;var j=this.each(function(){if(this.daypilot){return;};var $do=new DayPilot.Scheduler(this.id||this,$j);$do.init();this.daypilot=$do;if(!$0V){$0V=$do;}});if(this.length===1){return $0V;}else{return j;}};})(jQuery);};(function registerAngularModule(){var $dp=DayPilot.am();if(!$dp){return;};$dp.directive("daypilotScheduler",['$parse',function($dq){return{"restrict":"E","template":"<div id='{{id}};'></div>","compile":function compile(element,$dr){element[0].removeAttribute("id");element[0].innerHTML=this["template"].replace("{{id\u007d\u007d",$dr["id"]);return function link($ds,element,$dr){var $k=new DayPilot.Scheduler(element[0].firstChild);$k.$gc.scope=$ds;var $dt=$dr["id"];if($dt){$ds[$dt]=$k;};var $du=$dr["publishAs"];if($du){var getter=$dq($du);var setter=getter.assign;setter($ds,$k);};for(var name in $dr){if(name.indexOf("on")===0){var $dv=DayPilot.Util.shouldApply(name);if($dv){(function(name){$k[name]=function($n){var f=$dq($dr[name]);DayPilot.Util.safeApply($ds,function(){f($ds,{"args":$n});});};})(name);}else{(function(name){$k[name]=function($n){var f=$dq($dr[name]);f($ds,{"args":$n});};})(name);}}};var $dw=$ds["$watch"];var $6s=$dr["config"]||$dr["daypilotConfig"];var $03=$dr["events"]||$dr["daypilotEvents"];if(!$6s){$k.init();};$dw.call($ds,$6s,function($90,$dx){$k.$ge($90);if($k.$en){$k.update();$k.$gg();}else{$k.init();}},true);$03&&$dw.call($ds,$03,function($90){$k.events.list=$90;$k.$fO({"eventsOnly":true});},true);$ds.$on("$destroy",function(){$k.dispose();});};}};}]);})();if(typeof Sys!=='undefined'&&Sys.Application&&Sys.Application.notifyScriptLoaded){Sys.Application.notifyScriptLoaded();}})(DayPilot);


